<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
    <script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
    <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
    <script>

        var socket = io("http://192.168.1.39:3000");

        /*socket.on('moAccel', function(msg){
            document.getElementById("moAccel").innerHTML = msg;
        });
        socket.on('moAccelGrav', function(msg){
            document.getElementById("moAccelGrav").innerHTML = msg;
        });
        socket.on('moRotation', function(msg){
            document.getElementById("moRotation").innerHTML = msg;
        });
        socket.on('moInterval', function(msg){
            document.getElementById("moInterval").innerHTML = msg;
        });*/

        if (window.DeviceMotionEvent) {
            window.addEventListener('devicemotion', deviceMotionHandler, false);
        } else {
            document.getElementById("dmEvent").innerHTML = "Not supported."
        }
        function deviceMotionHandler(eventData) {
            var info, xyz = {};

            // Grab the acceleration from the results
           /* var acceleration = eventData.acceleration;
            info = xyz.replace("X", acceleration.x);
            info = info.replace("Y", acceleration.y);
            info = info.replace("Z", acceleration.z);
            socket.emit('moAccel', info);

            // Grab the acceleration including gravity from the results
            acceleration = eventData.accelerationIncludingGravity;
            info = xyz.replace("X", acceleration.x);
            info = info.replace("Y", acceleration.y);
            info = info.replace("Z", acceleration.z);
            socket.emit('moAccelGrav', info);*/

            // Grab the rotation rate from the results
            /*var rotation = eventData.rotationRate;
            info = xyz.replace("X", rotation.alpha);
            info = info.replace("Y", rotation.beta);
            info = info.replace("Z", rotation.gamma);
            socket.emit('moRotation', info);
            */
            var rotation = eventData.rotationRate;
            xyz.alpha = rotation.alpha;
            xyz.beta = rotation.beta;
            xyz.gamma = rotation.gamma;
            socket.emit('moRotation', xyz);
            /*
            // // Grab the refresh interval from the results
            info = eventData.interval;
            socket.emit('moInterval', info);*/
        }
    </script>
</head>
<body>
<div class="main">
    <h2>Device Motion</h2>
    <table>
        <tr>
            <td>Event Supported</td>
            <td id="dmEvent"></td>
        </tr>
        <tr>
            <td>acceleration</td>
            <td id="moAccel"></td>
        </tr>
        <tr>
            <td>accelerationIncludingGravity</td>
            <td id="moAccelGrav"></td>
        </tr>
        <tr>
            <td>rotationRate</td>
            <td id="moRotation"></td>
        </tr>
        <tr>
            <td>interval</td>
            <td id="moInterval"></td>
        </tr>
    </table>
</div>
</body>
</html>