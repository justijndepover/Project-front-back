!function(){angular.module("app",["qrScanner"])}(),function(){var e=function(e,t){e.joinRoom=function(e,n){var r={};r.username=e,r.room=n,t.emit("gsmConnect",r)},e.leaveRoom=function(){t.emit("gsmDisconnect",null)};var n=function(e){var n={};n.gamma=e.gamma,n.beta=e.beta,n.delta=e.delta,t.emit("deviceOrientation",n)};return{sendDeviceOrientation:n}};angular.module("app").controller("socketController",["$scope","socketService",e])}(),function(){"use strict";angular.module("app").directive("qrScanner",["$interval","$window",function(e,t){return{restrict:"E",scope:{ngSuccess:"&ngSuccess",ngError:"&ngError",ngVideoError:"&ngVideoError"},link:function(n,r,o){window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var a=o.height||300,i=o.width||250,c=t.document.createElement("video");c.setAttribute("width",i),c.setAttribute("height",a),c.setAttribute("style","-moz-transform:rotateY(-180deg);-webkit-transform:rotateY(-180deg);transform:rotateY(-180deg);");var d=t.document.createElement("canvas");d.setAttribute("id","qr-canvas"),d.setAttribute("width",i),d.setAttribute("height",a),d.setAttribute("style","display:none;"),angular.element(r).append(c),angular.element(r).append(d);var s,u=d.getContext("2d"),l=function(){if(t.localMediaStream){u.drawImage(c,0,0,307,250);try{qrcode.decode()}catch(e){n.ngError({error:e})}}},g=function(r){c.src=window.URL&&window.URL.createObjectURL(r)||r,t.localMediaStream=r,n.video=c,c.play(),s=e(l,500)};navigator.getUserMedia?navigator.getUserMedia({video:!0},g,function(e){n.ngVideoError({error:e})}):n.ngVideoError({error:"Native web camera streaming (getUserMedia) not supported in this browser."}),qrcode.callback=function(e){n.ngSuccess({data:e})},r.bind("$destroy",function(){t.localMediaStream&&t.localMediaStream.stop(),s&&e.cancel(s)})}}}])}(),function(){var e=function(e){"use strict";var t=io.connect(window.location.host),n=function(n,r){t.on(n,function(){var n=arguments;e.$apply(function(){r.apply(t,n)})})},r=function(n,r,o){t.emit(n,r,function(){var n=arguments;e.$apply(function(){o&&o.apply(t,n)})})};return{on:n,emit:r,socket:t}};angular.module("app").factory("socketService",["$rootScope",e])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNvbnRyb2xsZXIvc29ja2V0Q29udHJvbGxlci5qcyIsImRpcmVjdGl2ZS9xclNjYW5uZXIuanMiLCJzZXJ2aWNlcy9zb2NrZXRTZXJ2aWNlLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJzb2NrZXRDb250cm9sbGVyIiwiJHNjb3BlIiwic29ja2V0U2VydmljZSIsImpvaW5Sb29tIiwidXNlcm5hbWUiLCJyb29tIiwiZGF0YSIsImVtaXQiLCJsZWF2ZVJvb20iLCJzZW5kRGV2aWNlT3JpZW50YXRpb24iLCJldmVudERhdGEiLCJnYW1tYSIsImJldGEiLCJkZWx0YSIsImNvbnRyb2xsZXIiLCJkaXJlY3RpdmUiLCIkaW50ZXJ2YWwiLCIkd2luZG93IiwicmVzdHJpY3QiLCJzY29wZSIsIm5nU3VjY2VzcyIsIm5nRXJyb3IiLCJuZ1ZpZGVvRXJyb3IiLCJsaW5rIiwiZWxlbWVudCIsImF0dHJzIiwid2luZG93IiwiVVJMIiwid2Via2l0VVJMIiwibW96VVJMIiwibXNVUkwiLCJuYXZpZ2F0b3IiLCJnZXRVc2VyTWVkaWEiLCJ3ZWJraXRHZXRVc2VyTWVkaWEiLCJtb3pHZXRVc2VyTWVkaWEiLCJtc0dldFVzZXJNZWRpYSIsImhlaWdodCIsIndpZHRoIiwidmlkZW8iLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJjYW52YXMiLCJhcHBlbmQiLCJzdG9wU2NhbiIsImNvbnRleHQiLCJnZXRDb250ZXh0Iiwic2NhbiIsImxvY2FsTWVkaWFTdHJlYW0iLCJkcmF3SW1hZ2UiLCJxcmNvZGUiLCJkZWNvZGUiLCJlIiwiZXJyb3IiLCJzdWNjZXNzQ2FsbGJhY2siLCJzdHJlYW0iLCJzcmMiLCJjcmVhdGVPYmplY3RVUkwiLCJwbGF5IiwiY2FsbGJhY2siLCJiaW5kIiwic3RvcCIsImNhbmNlbCIsIiRyb290U2NvcGUiLCJzb2NrZXQiLCJpbyIsImNvbm5lY3QiLCJsb2NhdGlvbiIsImhvc3QiLCJvbiIs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QUNBZCxFQUFBZSxNQUFBVixFQUFBTyxRQUtBaEUsRUFBQSxTQUFBK0QsRUFBQWhFLEVBQUFxRCxHQUNBSyxFQUFBekQsS0FBQStELEVBQUFoRSxFQUFBLFdBQ0EsR0FBQWlFLEdBQUFDLFNBQ0FULEdBQUFVLE9BQUEsV0FDQWQsR0FDQUEsRUFBQWUsTUFBQVYsRUFBQU8sT0FPQSxRQUNBRixHQUFBQSxFQUNBOUQsS0FBQUEsRUFDQXlELE9BQUFBLEdBSUFsRSxTQUFBQyxPQUFBLE9BQUE0RSxRQUFBLGlCQUFBLGFBQUF6RSIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDcmVhdGVkIGJ5IE1pY2hpZWwgb24gMjUvMTEvMjAxNS5cbiAqL1xuKGZ1bmN0aW9uKCl7XG5cbiAgICB2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoXCJhcHBcIixbJ3FyU2Nhbm5lciddKTtcbn0pKCk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkganVzdGlqbmRlcG92ZXIgb24gMDkvMTIvMTUuXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc29ja2V0Q29udHJvbGxlciA9IGZ1bmN0aW9uKCRzY29wZSwgc29ja2V0U2VydmljZSl7XHJcblxyXG4gICAgICAgIC8vcHJpdmF0ZVxyXG5cclxuXHJcbiAgICAgICAgLy9mdW5jdGlvbnNcclxuICAgICAgICAkc2NvcGUuam9pblJvb20gPSBmdW5jdGlvbih1c2VybmFtZSwgcm9vbSl7XHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge307XHJcbiAgICAgICAgICAgIGRhdGEudXNlcm5hbWUgPSB1c2VybmFtZTtcclxuICAgICAgICAgICAgZGF0YS5yb29tID0gcm9vbTtcclxuICAgICAgICAgICAgc29ja2V0U2VydmljZS5lbWl0KFwiZ3NtQ29ubmVjdFwiLCBkYXRhKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUubGVhdmVSb29tID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgc29ja2V0U2VydmljZS5lbWl0KFwiZ3NtRGlzY29ubmVjdFwiLCBudWxsKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgc2VuZERldmljZU9yaWVudGF0aW9uID0gZnVuY3Rpb24oZXZlbnREYXRhKXtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7fTtcclxuICAgICAgICAgICAgZGF0YS5nYW1tYSA9IGV2ZW50RGF0YS5nYW1tYTtcclxuICAgICAgICAgICAgZGF0YS5iZXRhID0gZXZlbnREYXRhLmJldGE7XHJcbiAgICAgICAgICAgIGRhdGEuZGVsdGEgPSBldmVudERhdGEuZGVsdGE7XHJcbiAgICAgICAgICAgIHNvY2tldFNlcnZpY2UuZW1pdChcImRldmljZU9yaWVudGF0aW9uXCIsIGRhdGEpXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm57XHJcbiAgICAgICAgICAgIHNlbmREZXZpY2VPcmllbnRhdGlvbjogc2VuZERldmljZU9yaWVudGF0aW9uXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5jb250cm9sbGVyKFwic29ja2V0Q29udHJvbGxlclwiLCBbXCIkc2NvcGVcIiwgXCJzb2NrZXRTZXJ2aWNlXCIsIHNvY2tldENvbnRyb2xsZXJdKTtcclxuXHJcbn0pKCk7IiwiXHJcbi8qIGlmICghYW5ndWxhcikgdmFyIGFuZ3VsYXIgPSByZXF1aXJlKCdhbmd1bGFyJyk7XHJcbiBpZiAoIXFyY29kZSkgdmFyIHFyY29kZSA9IHJlcXVpcmUoJ2pzcXJjb2RlJyk7Ki9cclxuXHJcbihmdW5jdGlvbigpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuZGlyZWN0aXZlKCdxclNjYW5uZXInLCBbJyRpbnRlcnZhbCcsICckd2luZG93JywgZnVuY3Rpb24oJGludGVydmFsLCAkd2luZG93KSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcclxuICAgICAgICAgICAgc2NvcGU6IHtcclxuICAgICAgICAgICAgICAgIG5nU3VjY2VzczogJyZuZ1N1Y2Nlc3MnLFxyXG4gICAgICAgICAgICAgICAgbmdFcnJvcjogJyZuZ0Vycm9yJyxcclxuICAgICAgICAgICAgICAgIG5nVmlkZW9FcnJvcjogJyZuZ1ZpZGVvRXJyb3InXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xyXG5cclxuICAgICAgICAgICAgICAgIHdpbmRvdy5VUkwgPSB3aW5kb3cuVVJMIHx8IHdpbmRvdy53ZWJraXRVUkwgfHwgd2luZG93Lm1velVSTCB8fCB3aW5kb3cubXNVUkw7XHJcbiAgICAgICAgICAgICAgICBuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhID0gbmF2aWdhdG9yLmdldFVzZXJNZWRpYSB8fCBuYXZpZ2F0b3Iud2Via2l0R2V0VXNlck1lZGlhIHx8IG5hdmlnYXRvci5tb3pHZXRVc2VyTWVkaWEgfHwgbmF2aWdhdG9yLm1zR2V0VXNlck1lZGlhO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBoZWlnaHQgPSBhdHRycy5oZWlnaHQgfHwgMzAwO1xyXG4gICAgICAgICAgICAgICAgdmFyIHdpZHRoID0gYXR0cnMud2lkdGggfHwgMjUwO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciB2aWRlbyA9ICR3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmlkZW8nKTtcclxuICAgICAgICAgICAgICAgIHZpZGVvLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCB3aWR0aCk7XHJcbiAgICAgICAgICAgICAgICB2aWRlby5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsIGhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICB2aWRlby5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJy1tb3otdHJhbnNmb3JtOnJvdGF0ZVkoLTE4MGRlZyk7LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlWSgtMTgwZGVnKTt0cmFuc2Zvcm06cm90YXRlWSgtMTgwZGVnKTsnKTtcclxuICAgICAgICAgICAgICAgIHZhciBjYW52YXMgPSAkd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xyXG4gICAgICAgICAgICAgICAgY2FudmFzLnNldEF0dHJpYnV0ZSgnaWQnLCAncXItY2FudmFzJyk7XHJcbiAgICAgICAgICAgICAgICBjYW52YXMuc2V0QXR0cmlidXRlKCd3aWR0aCcsIHdpZHRoKTtcclxuICAgICAgICAgICAgICAgIGNhbnZhcy5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsIGhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICBjYW52YXMuc2V0QXR0cmlidXRlKCdzdHlsZScsICdkaXNwbGF5Om5vbmU7Jyk7XHJcblxyXG4gICAgICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KGVsZW1lbnQpLmFwcGVuZCh2aWRlbyk7XHJcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoZWxlbWVudCkuYXBwZW5kKGNhbnZhcyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHN0b3BTY2FuO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBzY2FuID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCR3aW5kb3cubG9jYWxNZWRpYVN0cmVhbSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmRyYXdJbWFnZSh2aWRlbywgMCwgMCwgMzA3LDI1MCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxcmNvZGUuZGVjb2RlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2goZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUubmdFcnJvcih7ZXJyb3I6IGV9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgc3VjY2Vzc0NhbGxiYWNrID0gZnVuY3Rpb24oc3RyZWFtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmlkZW8uc3JjID0gKHdpbmRvdy5VUkwgJiYgd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoc3RyZWFtKSkgfHwgc3RyZWFtO1xyXG4gICAgICAgICAgICAgICAgICAgICR3aW5kb3cubG9jYWxNZWRpYVN0cmVhbSA9IHN0cmVhbTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUudmlkZW8gPSB2aWRlbztcclxuICAgICAgICAgICAgICAgICAgICB2aWRlby5wbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RvcFNjYW4gPSAkaW50ZXJ2YWwoc2NhbiwgNTAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBDYWxsIHRoZSBnZXRVc2VyTWVkaWEgbWV0aG9kIHdpdGggb3VyIGNhbGxiYWNrIGZ1bmN0aW9uc1xyXG4gICAgICAgICAgICAgICAgaWYgKG5hdmlnYXRvci5nZXRVc2VyTWVkaWEpIHtcclxuICAgICAgICAgICAgICAgICAgICBuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhKHt2aWRlbzogdHJ1ZX0sIHN1Y2Nlc3NDYWxsYmFjaywgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZS5uZ1ZpZGVvRXJyb3Ioe2Vycm9yOiBlfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLm5nVmlkZW9FcnJvcih7ZXJyb3I6ICdOYXRpdmUgd2ViIGNhbWVyYSBzdHJlYW1pbmcgKGdldFVzZXJNZWRpYSkgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGJyb3dzZXIuJ30pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHFyY29kZS5jYWxsYmFjayA9IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBzY29wZS5uZ1N1Y2Nlc3Moe2RhdGE6IGRhdGF9KTtcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5iaW5kKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkd2luZG93LmxvY2FsTWVkaWFTdHJlYW0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHdpbmRvdy5sb2NhbE1lZGlhU3RyZWFtLnN0b3AoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0b3BTY2FuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRpbnRlcnZhbC5jYW5jZWwoc3RvcFNjYW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfV0pO1xyXG59KSgpO1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBqdXN0aWpuZGVwb3ZlciBvbiAwOS8xMi8xNS5cclxuICovXHJcblxyXG4oZnVuY3Rpb24oKXtcclxuXHJcbiAgICB2YXIgc29ja2V0U2VydmljZSA9IGZ1bmN0aW9uKCRyb290U2NvcGUpe1xyXG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xyXG4gICAgICAgIC8vcHJpdmF0ZVxyXG4gICAgICAgIHZhciBzb2NrZXQgPSBpby5jb25uZWN0KHdpbmRvdy5sb2NhdGlvbi5ob3N0KTtcclxuICAgICAgICAvL2Z1bmN0aW9uc1xyXG4gICAgICAgIHZhciBvbiA9IGZ1bmN0aW9uIChldmVudE5hbWUsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIHNvY2tldC5vbihldmVudE5hbWUsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xyXG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KHNvY2tldCwgYXJncyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGVtaXQgPSBmdW5jdGlvbiAoZXZlbnROYW1lLCBkYXRhLCBjYWxsYmFjaykge1xyXG4gICAgICAgICAgICBzb2NrZXQuZW1pdChldmVudE5hbWUsIGRhdGEsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xyXG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5hcHBseShzb2NrZXQsIGFyZ3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vcHVibGljXHJcbiAgICAgICAgcmV0dXJue1xyXG4gICAgICAgICAgICBvbjogb24sXHJcbiAgICAgICAgICAgIGVtaXQ6IGVtaXQsXHJcbiAgICAgICAgICAgIHNvY2tldDogc29ja2V0XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5mYWN0b3J5KFwic29ja2V0U2VydmljZVwiLCBbXCIkcm9vdFNjb3BlXCIsIHNvY2tldFNlcnZpY2VdKTtcclxuXHJcbn0pKCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
