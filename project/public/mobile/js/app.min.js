!function(){angular.module("app",[])}(),function(){var t=function(t,e,n){t.LCShow=n.getLCShow,e.on("startGame",function(t){console.log("start game")}),e.on("roomDisconnect",function(t){n.setPCShow(!1),n.setLCShow(!0)}),t.joinRoom=function(t,n){var o={};o.username=t,o.room=n.toUpperCase(),e.emit("gsmConnect",o)},e.on("message",function(e){switch(e){case"connectionEstablished":n.setPCShow(!0),n.setLCShow(!1);break;case"connectionRefused":t.text="Something went wrong";break;case"usernameExist":t.text="Username already exist";break;case"roomFull":t.text="Room is already full."}})};angular.module("app").controller("loginController",["$scope","socketService","displayService",t])}(),function(){"use strict";var t=function(t,e,n,o,i){t.PCShow=i.getPCShow,t.showSettings=i.getSettingShow,t.startGame=!1,t.Settings=function(){var t=document.getElementsByClassName("btnSettings")[0].children[0];1==t.classList.contains("rotate")?(i.setSettingShow(!1),t.setAttribute("class","rotateAnti")):(i.setSettingShow(!0),t.setAttribute("class","rotate"))},t.shoot=function(){n.emit("playerShot",null)};var a=function(t){var e={};e.beta=t.beta,n.emit("deviceOrientation",e)};o.subscribeMe(),e.$on("app.deviceorientationEvent",function(t,e){a(e)}),t.leaveRoom=function(){n.emit("gsmDisconnect",null),i.setLCShow(!0),i.setPCShow(!1)},n.on("message",function(e){console.log(e),"connectionEstablished"==e?(t.text="Waiting on other players",t.startGame=!1):"startGame"==e&&(t.startGame=!0)})};angular.module("app").controller("playController",["$scope","$rootScope","socketService","eventService","displayService",t])}(),function(){var t=function(){var t=!0,e=!1,n=!1;return{getLCShow:function(){return t},setLCShow:function(e){t=e},getPCShow:function(){return e},setPCShow:function(t){e=t},getSettingShow:function(){return n},setSettingShow:function(t){n=t}}};angular.module("app").factory("displayService",[t])}(),function(){var t=function(t,e){function n(){e.addEventListener("deviceorientation",function(e){t.$broadcast("app.deviceorientationEvent",e)})}return{subscribeMe:n}};angular.module("app").factory("eventService",["$rootScope","$window",t])}(),function(){var t=function(t){"use strict";var e=io.connect(window.location.host),n=function(n,o){e.on(n,function(){var n=arguments;t.$apply(function(){o.apply(e,n)})})},o=function(n,o,i){e.emit(n,o,function(){var n=arguments;t.$apply(function(){i&&i.apply(e,n)})})};return{on:n,emit:o,socket:e}};angular.module("app").factory("socketService",["$rootScope",t])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNvbnRyb2xsZXIvbG9naW5Db250cm9sbGVyLmpzIiwiY29udHJvbGxlci9wbGF5Q29udHJvbGxlci5qcyIsInNlcnZpY2VzL2Rpc3BsYXlTZXJ2aWNlLmpzIiwic2VydmljZXMvZXZlbnRTZXJ2aWNlLmpzIiwic2VydmljZXMvc29ja2V0U2VydmljZS5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwibG9naW5Db250cm9sbGVyIiwiJHNjb3BlIiwic29ja2V0U2VydmljZSIsImRpc3BsYXlTZXJ2aWNlIiwiTENTaG93IiwiZ2V0TENTaG93Iiwib24iLCJkYXRhIiwiY29uc29sZSIsImxvZyIsInNldFBDU2hvdyIsInNldExDU2hvdyIsImpvaW5Sb29tIiwidXNlcm5hbWUiLCJyb29tIiwidG9VcHBlckNhc2UiLCJlbWl0IiwibWVzc2FnZSIsInRleHQiLCJjb250cm9sbGVyIiwicGxheUNvbnRyb2xsZXIiLCIkcm9vdFNjb3BlIiwiZXZlbnRTZXJ2aWNlIiwiUENTaG93IiwiZ2V0UENTaG93Iiwic2hvd1NldHRpbmdzIiwiZ2V0U2V0dGluZ1Nob3ciLCJzdGFydEdhbWUiLCJTZXR0aW5ncyIsImJ0biIsImRvY3VtZW50IiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImNoaWxkcmVuIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJzZXRTZXR0aW5nU2hvdyIsInNldEF0dHJpYnV0ZSIsInNob290Iiwic2VuZERldmljZU9yaWVudGF0aW9uIiwiZXZlbnREYXRhIiwiYmV0YSIsInN1YnNjcmliZU1lIiwiJG9uIiwiYSIsImIiLCJsZWF2ZVJvb20iLCJTZXR0aW5nU2hvdyIsInZhbHVlIiwiZmFjdG9yeSIsIiR3aW5kb3ciLCJzdWJzRnVuYyIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiJGJyb2FkY2FzdCIsInNvY2tldCIsImlvIiwiY29ubmVjdCIsIndpbmRvdyIsImxvY2F0aW9uIiwiaG9zdCIsImV2ZW50TmFtZSIsImNhbGxi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QUFBMUIsT0NYQSxXQUVBLEdBQUFwQixHQUFBLFNBQUFtQixHQUNBLFlBRUEsSUFBQWlDLEdBQUFDLEdBQUFDLFFBQUFDLE9BQUFDLFNBQUFDLE1BRUFyRCxFQUFBLFNBQUFzRCxFQUFBQyxHQUNBUCxFQUFBaEQsR0FBQXNELEVBQUEsV0FDQSxHQUFBRSxHQUFBQyxTQUNBMUMsR0FBQTJDLE9BQUEsV0FDQUgsRUFBQUksTUFBQVgsRUFBQVEsUUFLQTlDLEVBQUEsU0FBQTRDLEVBQUFyRCxFQUFBc0QsR0FDQVAsRUFBQXRDLEtBQUE0QyxFQUFBckQsRUFBQSxXQUNBLEdBQUF1RCxHQUFBQyxTQUNBMUMsR0FBQTJDLE9BQUEsV0FDQUgsR0FDQUEsRUFBQUksTUFBQVgsRUFBQVEsT0FPQSxRQUNBeEQsR0FBQUEsRUFDQVUsS0FBQUEsRUFDQXNDLE9BQUFBLEdBSUF4RCxTQUFBQyxPQUFBLE9BQUFpRCxRQUFBLGlCQUFBLGFBQUE5QyIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDcmVhdGVkIGJ5IE1pY2hpZWwgb24gMjUvMTEvMjAxNS5cbiAqL1xuKGZ1bmN0aW9uKCl7XG5cbiAgICB2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoXCJhcHBcIixbXSk7XG59KSgpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGp1c3Rpam5kZXBvdmVyIG9uIDE2LzEyLzE1LlxyXG4gKi9cclxuXHJcblxyXG4oZnVuY3Rpb24oKXtcclxuXHJcbiAgICB2YXIgbG9naW5Db250cm9sbGVyID0gZnVuY3Rpb24oJHNjb3BlLCBzb2NrZXRTZXJ2aWNlLCBkaXNwbGF5U2VydmljZSl7XHJcbiAgICAgICAgJHNjb3BlLkxDU2hvdyA9IGRpc3BsYXlTZXJ2aWNlLmdldExDU2hvdztcclxuICAgICAgICAvL2Z1bmN0aW9uc1xyXG4gICAgICAgIHNvY2tldFNlcnZpY2Uub24oXCJzdGFydEdhbWVcIiwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJzdGFydCBnYW1lXCIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHNvY2tldFNlcnZpY2Uub24oXCJyb29tRGlzY29ubmVjdFwiLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICBkaXNwbGF5U2VydmljZS5zZXRQQ1Nob3coZmFsc2UpO1xyXG4gICAgICAgICAgICBkaXNwbGF5U2VydmljZS5zZXRMQ1Nob3codHJ1ZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICRzY29wZS5qb2luUm9vbSA9IGZ1bmN0aW9uKHVzZXJuYW1lLCByb29tKXtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7fTtcclxuICAgICAgICAgICAgZGF0YS51c2VybmFtZSA9IHVzZXJuYW1lO1xyXG4gICAgICAgICAgICBkYXRhLnJvb20gPSByb29tLnRvVXBwZXJDYXNlKCk7XHJcbiAgICAgICAgICAgIHNvY2tldFNlcnZpY2UuZW1pdChcImdzbUNvbm5lY3RcIiwgZGF0YSk7XHJcblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHNvY2tldFNlcnZpY2Uub24oXCJtZXNzYWdlXCIsIGZ1bmN0aW9uKG1lc3NhZ2Upe1xyXG4gICAgICAgICAgICBzd2l0Y2gobWVzc2FnZSl7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiY29ubmVjdGlvbkVzdGFibGlzaGVkXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheVNlcnZpY2Uuc2V0UENTaG93KHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlTZXJ2aWNlLnNldExDU2hvdyhmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiY29ubmVjdGlvblJlZnVzZWRcIjpcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudGV4dCA9IFwiU29tZXRoaW5nIHdlbnQgd3JvbmdcIjtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJ1c2VybmFtZUV4aXN0XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRleHQgPSBcIlVzZXJuYW1lIGFscmVhZHkgZXhpc3RcIjtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJyb29tRnVsbFwiIDpcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudGV4dCA9IFwiUm9vbSBpcyBhbHJlYWR5IGZ1bGwuXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0IDpcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5jb250cm9sbGVyKFwibG9naW5Db250cm9sbGVyXCIsIFtcIiRzY29wZVwiLCBcInNvY2tldFNlcnZpY2VcIiwgXCJkaXNwbGF5U2VydmljZVwiLCBsb2dpbkNvbnRyb2xsZXJdKTtcclxufSkoKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBqdXN0aWpuZGVwb3ZlciBvbiAxNi8xMi8xNS5cclxuICovXHJcblxyXG5cclxuKGZ1bmN0aW9uKCl7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuICAgIHZhciBwbGF5Q29udHJvbGxlciA9IGZ1bmN0aW9uKCRzY29wZSwgJHJvb3RTY29wZSwgc29ja2V0U2VydmljZSwgZXZlbnRTZXJ2aWNlLCBkaXNwbGF5U2VydmljZSl7XHJcbiAgICAgICAgJHNjb3BlLlBDU2hvdyA9IGRpc3BsYXlTZXJ2aWNlLmdldFBDU2hvdztcclxuICAgICAgICAkc2NvcGUuc2hvd1NldHRpbmdzID0gZGlzcGxheVNlcnZpY2UuZ2V0U2V0dGluZ1Nob3c7XHJcbiAgICAgICAgJHNjb3BlLnN0YXJ0R2FtZSA9IGZhbHNlO1xyXG4gICAgICAgICRzY29wZS5TZXR0aW5ncyA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHZhciBidG4gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdidG5TZXR0aW5ncycpWzBdLmNoaWxkcmVuWzBdO1xyXG4gICAgICAgICAgICBpZihidG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdyb3RhdGUnKT09dHJ1ZSl7XHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5U2VydmljZS5zZXRTZXR0aW5nU2hvdyhmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICBidG4uc2V0QXR0cmlidXRlKCdjbGFzcycsICdyb3RhdGVBbnRpJyk7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgZGlzcGxheVNlcnZpY2Uuc2V0U2V0dGluZ1Nob3codHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICBidG4uc2V0QXR0cmlidXRlKCdjbGFzcycsICdyb3RhdGUnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9O1xyXG4gICAgICAgICRzY29wZS5zaG9vdCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHNvY2tldFNlcnZpY2UuZW1pdChcInBsYXllclNob3RcIiwgbnVsbCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIHNlbmREZXZpY2VPcmllbnRhdGlvbiA9IGZ1bmN0aW9uKGV2ZW50RGF0YSl7XHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge307XHJcbiAgICAgICAgICAgIC8vZGF0YS5nYW1tYSA9IGV2ZW50RGF0YS5nYW1tYTtcclxuICAgICAgICAgICAgZGF0YS5iZXRhID0gZXZlbnREYXRhLmJldGE7XHJcbiAgICAgICAgICAgIC8vZGF0YS5hbHBoYSA9IGV2ZW50RGF0YS5hbHBoYTtcclxuICAgICAgICAgICAgc29ja2V0U2VydmljZS5lbWl0KFwiZGV2aWNlT3JpZW50YXRpb25cIiwgZGF0YSlcclxuICAgICAgICB9O1xyXG4gICAgICAgIGV2ZW50U2VydmljZS5zdWJzY3JpYmVNZSgpO1xyXG4gICAgICAgICRyb290U2NvcGUuJG9uKCdhcHAuZGV2aWNlb3JpZW50YXRpb25FdmVudCcsIGZ1bmN0aW9uKGEsIGIpIHtcclxuICAgICAgICAgICAgc2VuZERldmljZU9yaWVudGF0aW9uKGIpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkc2NvcGUubGVhdmVSb29tID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgc29ja2V0U2VydmljZS5lbWl0KFwiZ3NtRGlzY29ubmVjdFwiLCBudWxsKTtcclxuICAgICAgICAgICAgZGlzcGxheVNlcnZpY2Uuc2V0TENTaG93KHRydWUpO1xyXG4gICAgICAgICAgICBkaXNwbGF5U2VydmljZS5zZXRQQ1Nob3coZmFsc2UpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHNvY2tldFNlcnZpY2Uub24oXCJtZXNzYWdlXCIsIGZ1bmN0aW9uKG1lc3NhZ2Upe1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhtZXNzYWdlKTtcclxuICAgICAgICAgICAgaWYobWVzc2FnZSA9PSBcImNvbm5lY3Rpb25Fc3RhYmxpc2hlZFwiKXtcclxuICAgICAgICAgICAgICAgICRzY29wZS50ZXh0ID0gXCJXYWl0aW5nIG9uIG90aGVyIHBsYXllcnNcIjtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zdGFydEdhbWUgPSBmYWxzZTtcclxuICAgICAgICAgICAgfWVsc2UgaWYobWVzc2FnZSA9PSBcInN0YXJ0R2FtZVwiKXtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zdGFydEdhbWUgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmNvbnRyb2xsZXIoXCJwbGF5Q29udHJvbGxlclwiLCBbXCIkc2NvcGVcIiwgXCIkcm9vdFNjb3BlXCIsIFwic29ja2V0U2VydmljZVwiLCBcImV2ZW50U2VydmljZVwiLCBcImRpc3BsYXlTZXJ2aWNlXCIsIHBsYXlDb250cm9sbGVyXSlcclxufSkoKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBqdXN0aWpuZGVwb3ZlciBvbiAxNi8xMi8xNS5cclxuICovXHJcblxyXG5cclxuKGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgZGlzcGxheVNlcnZpY2UgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgIC8vTG9naW4gQ29udHJvbGxlclxyXG4gICAgICAgIHZhciBMQ1Nob3cgPSB0cnVlO1xyXG4gICAgICAgIC8vUGxheSBjb250cm9sbGVyXHJcbiAgICAgICAgdmFyIFBDU2hvdyA9IGZhbHNlO1xyXG5cclxuICAgICAgICB2YXIgU2V0dGluZ1Nob3cgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgcmV0dXJue1xyXG4gICAgICAgICAgICBnZXRMQ1Nob3c6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTENTaG93O1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzZXRMQ1Nob3c6IGZ1bmN0aW9uKHZhbHVlKXtcclxuICAgICAgICAgICAgICAgIExDU2hvdyA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBnZXRQQ1Nob3c6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUENTaG93O1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzZXRQQ1Nob3c6IGZ1bmN0aW9uKHZhbHVlKXtcclxuICAgICAgICAgICAgICAgIFBDU2hvdyA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBnZXRTZXR0aW5nU2hvdzogZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIHJldHVybiBTZXR0aW5nU2hvdztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2V0U2V0dGluZ1Nob3c6IGZ1bmN0aW9uKHZhbHVlKXtcclxuICAgICAgICAgICAgICAgIFNldHRpbmdTaG93ID0gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuZmFjdG9yeSgnZGlzcGxheVNlcnZpY2UnLCBbZGlzcGxheVNlcnZpY2VdKTtcclxufSkoKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBNaWNoaWVsIG9uIDE2LzEyLzIwMTUuXHJcbiAqL1xyXG4oZnVuY3Rpb24oKXtcclxuICAgIHZhciBldmVudFNlcnZpY2UgPSBmdW5jdGlvbigkcm9vdFNjb3BlLCR3aW5kb3cpe1xyXG4gICAgICAgIGZ1bmN0aW9uIHN1YnNGdW5jKCkge1xyXG4gICAgICAgICAgICAkd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2RldmljZW9yaWVudGF0aW9uJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdhcHAuZGV2aWNlb3JpZW50YXRpb25FdmVudCcsIGUpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgXCJzdWJzY3JpYmVNZVwiOiBzdWJzRnVuY1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5mYWN0b3J5KFwiZXZlbnRTZXJ2aWNlXCIsIFtcIiRyb290U2NvcGVcIixcIiR3aW5kb3dcIiwgZXZlbnRTZXJ2aWNlXSk7XHJcbn0pKCk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkganVzdGlqbmRlcG92ZXIgb24gMDkvMTIvMTUuXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgdmFyIHNvY2tldFNlcnZpY2UgPSBmdW5jdGlvbigkcm9vdFNjb3BlKXtcclxuICAgICAgICBcInVzZSBzdHJpY3RcIjtcclxuICAgICAgICAvL3ByaXZhdGVcclxuICAgICAgICB2YXIgc29ja2V0ID0gaW8uY29ubmVjdCh3aW5kb3cubG9jYXRpb24uaG9zdCk7XHJcbiAgICAgICAgLy9mdW5jdGlvbnNcclxuICAgICAgICB2YXIgb24gPSBmdW5jdGlvbiAoZXZlbnROYW1lLCBjYWxsYmFjaykge1xyXG4gICAgICAgICAgICBzb2NrZXQub24oZXZlbnROYW1lLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcclxuICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5hcHBseShzb2NrZXQsIGFyZ3MpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBlbWl0ID0gZnVuY3Rpb24gKGV2ZW50TmFtZSwgZGF0YSwgY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgc29ja2V0LmVtaXQoZXZlbnROYW1lLCBkYXRhLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcclxuICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkoc29ja2V0LCBhcmdzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvL3B1YmxpY1xyXG4gICAgICAgIHJldHVybntcclxuICAgICAgICAgICAgb246IG9uLFxyXG4gICAgICAgICAgICBlbWl0OiBlbWl0LFxyXG4gICAgICAgICAgICBzb2NrZXQ6IHNvY2tldFxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoXCJhcHBcIikuZmFjdG9yeShcInNvY2tldFNlcnZpY2VcIiwgW1wiJHJvb3RTY29wZVwiLCBzb2NrZXRTZXJ2aWNlXSk7XHJcblxyXG59KSgpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
