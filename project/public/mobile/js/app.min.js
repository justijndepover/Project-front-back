!function(){angular.module("app",[])}(),function(){var t=function(t,e,n){t.LCShow=n.getLCShow,e.on("startGame",function(t){console.log("start game")}),e.on("roomDisconnect",function(t){n.setPCShow(!1),n.setLCShow(!0)}),t.joinRoom=function(t,n){var o={};o.username=t,o.room=n.toUpperCase(),e.emit("gsmConnect",o)},e.on("message",function(e){switch(e){case"connectionEstablished":n.setPCShow(!0),n.setLCShow(!1);break;case"connectionRefused":t.text="Something went wrong";break;case"usernameExist":t.text="Username already exist";break;case"roomFull":t.text="Room is already full."}})};angular.module("app").controller("loginController",["$scope","socketService","displayService",t])}(),function(){"use strict";var t=function(t,e,n,o,i){t.PCShow=i.getPCShow,t.showSettings=i.getSettingShow,t.startGame=!1,t.Settings=function(){var t=document.getElementsByClassName("btnSettings")[0].children[0];1==t.classList.contains("rotate")?(i.setSettingShow(!1),t.setAttribute("class","rotateAnti")):(i.setSettingShow(!0),t.setAttribute("class","rotate"))},t.shoot=function(){n.emit("playerShot",null)};var a=function(t){var e={};e.beta=t.beta,n.emit("deviceOrientation",e)};o.subscribeMe(),e.$on("app.deviceorientationEvent",function(t,e){a(e)}),t.leaveRoom=function(){n.emit("gsmDisconnect",null),i.setLCShow(!0),i.setPCShow(!1),i.setSettingShow(!1)},n.on("message",function(e){console.log(e),"connectionEstablished"==e?(t.text="Waiting on other players",t.startGame=!1):"startGame"==e&&(t.startGame=!0)})};angular.module("app").controller("playController",["$scope","$rootScope","socketService","eventService","displayService",t])}(),function(){var t=function(){var t=!0,e=!1,n=!1;return{getLCShow:function(){return t},setLCShow:function(e){t=e},getPCShow:function(){return e},setPCShow:function(t){e=t},getSettingShow:function(){return n},setSettingShow:function(t){n=t}}};angular.module("app").factory("displayService",[t])}(),function(){var t=function(t,e){function n(){e.addEventListener("deviceorientation",function(e){t.$broadcast("app.deviceorientationEvent",e)})}return{subscribeMe:n}};angular.module("app").factory("eventService",["$rootScope","$window",t])}(),function(){var t=function(t){"use strict";var e=io.connect(window.location.host),n=function(n,o){e.on(n,function(){var n=arguments;t.$apply(function(){o.apply(e,n)})})},o=function(n,o,i){e.emit(n,o,function(){var n=arguments;t.$apply(function(){i&&i.apply(e,n)})})};return{on:n,emit:o,socket:e}};angular.module("app").factory("socketService",["$rootScope",t])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNvbnRyb2xsZXIvbG9naW5Db250cm9sbGVyLmpzIiwiY29udHJvbGxlci9wbGF5Q29udHJvbGxlci5qcyIsInNlcnZpY2VzL2Rpc3BsYXlTZXJ2aWNlLmpzIiwic2VydmljZXMvZXZlbnRTZXJ2aWNlLmpzIiwic2VydmljZXMvc29ja2V0U2VydmljZS5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwibG9naW5Db250cm9sbGVyIiwiJHNjb3BlIiwic29ja2V0U2VydmljZSIsImRpc3BsYXlTZXJ2aWNlIiwiTENTaG93IiwiZ2V0TENTaG93Iiwib24iLCJkYXRhIiwiY29uc29sZSIsImxvZyIsInNldFBDU2hvdyIsInNldExDU2hvdyIsImpvaW5Sb29tIiwidXNlcm5hbWUiLCJyb29tIiwidG9VcHBlckNhc2UiLCJlbWl0IiwibWVzc2FnZSIsInRleHQiLCJjb250cm9sbGVyIiwicGxheUNvbnRyb2xsZXIiLCIkcm9vdFNjb3BlIiwiZXZlbnRTZXJ2aWNlIiwiUENTaG93IiwiZ2V0UENTaG93Iiwic2hvd1NldHRpbmdzIiwiZ2V0U2V0dGluZ1Nob3ciLCJzdGFydEdhbWUiLCJTZXR0aW5ncyIsImJ0biIsImRvY3VtZW50IiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImNoaWxkcmVuIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJzZXRTZXR0aW5nU2hvdyIsInNldEF0dHJpYnV0ZSIsInNob290Iiwic2VuZERldmljZU9yaWVudGF0aW9uIiwiZXZlbnREYXRhIiwiYmV0YSIsInN1YnNjcmliZU1lIiwiJG9uIiwiYSIsImIiLCJsZWF2ZVJvb20iLCJTZXR0aW5nU2hvdyIsInZhbHVlIiwiZmFjdG9yeSIsIiR3aW5kb3ciLCJzdWJzRnVuYyIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiJGJyb2FkY2FzdCIsInNvY2tldCIsImlvIiwiY29ubmVjdCIsIndpbmRvdyIsImxvY2F0aW9uIiwiaG9zdCIsImV2ZW50TmFtZSIsImNhbGxi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aUQsUUFBQSxnQkFBQSxhQUFBLFVBQUExQixPQ1hBLFdBRUEsR0FBQXBCLEdBQUEsU0FBQW1CLEdBQ0EsWUFFQSxJQUFBaUMsR0FBQUMsR0FBQUMsUUFBQUMsT0FBQUMsU0FBQUMsTUFFQXJELEVBQUEsU0FBQXNELEVBQUFDLEdBQ0FQLEVBQUFoRCxHQUFBc0QsRUFBQSxXQUNBLEdBQUFFLEdBQUFDLFNBQ0ExQyxHQUFBMkMsT0FBQSxXQUNBSCxFQUFBSSxNQUFBWCxFQUFBUSxRQUtBOUMsRUFBQSxTQUFBNEMsRUFBQXJELEVBQUFzRCxHQUNBUCxFQUFBdEMsS0FBQTRDLEVBQUFyRCxFQUFBLFdBQ0EsR0FBQXVELEdBQUFDLFNBQ0ExQyxHQUFBMkMsT0FBQSxXQUNBSCxHQUNBQSxFQUFBSSxNQUFBWCxFQUFBUSxPQU9BLFFBQ0F4RCxHQUFBQSxFQUNBVSxLQUFBQSxFQUNBc0MsT0FBQUEsR0FJQXhELFNBQUFDLE9BQUEsT0FBQWlELFFBQUEsaUJBQUEsYUFBQTlDIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENyZWF0ZWQgYnkgTWljaGllbCBvbiAyNS8xMS8yMDE1LlxuICovXG4oZnVuY3Rpb24oKXtcblxuICAgIHZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZShcImFwcFwiLFtdKTtcbn0pKCk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkganVzdGlqbmRlcG92ZXIgb24gMTYvMTIvMTUuXHJcbiAqL1xyXG5cclxuXHJcbihmdW5jdGlvbigpe1xyXG5cclxuICAgIHZhciBsb2dpbkNvbnRyb2xsZXIgPSBmdW5jdGlvbigkc2NvcGUsIHNvY2tldFNlcnZpY2UsIGRpc3BsYXlTZXJ2aWNlKXtcclxuICAgICAgICAkc2NvcGUuTENTaG93ID0gZGlzcGxheVNlcnZpY2UuZ2V0TENTaG93O1xyXG4gICAgICAgIC8vZnVuY3Rpb25zXHJcbiAgICAgICAgc29ja2V0U2VydmljZS5vbihcInN0YXJ0R2FtZVwiLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcInN0YXJ0IGdhbWVcIik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgc29ja2V0U2VydmljZS5vbihcInJvb21EaXNjb25uZWN0XCIsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIGRpc3BsYXlTZXJ2aWNlLnNldFBDU2hvdyhmYWxzZSk7XHJcbiAgICAgICAgICAgIGRpc3BsYXlTZXJ2aWNlLnNldExDU2hvdyh0cnVlKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmpvaW5Sb29tID0gZnVuY3Rpb24odXNlcm5hbWUsIHJvb20pe1xyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHt9O1xyXG4gICAgICAgICAgICBkYXRhLnVzZXJuYW1lID0gdXNlcm5hbWU7XHJcbiAgICAgICAgICAgIGRhdGEucm9vbSA9IHJvb20udG9VcHBlckNhc2UoKTtcclxuICAgICAgICAgICAgc29ja2V0U2VydmljZS5lbWl0KFwiZ3NtQ29ubmVjdFwiLCBkYXRhKTtcclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgc29ja2V0U2VydmljZS5vbihcIm1lc3NhZ2VcIiwgZnVuY3Rpb24obWVzc2FnZSl7XHJcbiAgICAgICAgICAgIHN3aXRjaChtZXNzYWdlKXtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJjb25uZWN0aW9uRXN0YWJsaXNoZWRcIjpcclxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5U2VydmljZS5zZXRQQ1Nob3codHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheVNlcnZpY2Uuc2V0TENTaG93KGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJjb25uZWN0aW9uUmVmdXNlZFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS50ZXh0ID0gXCJTb21ldGhpbmcgd2VudCB3cm9uZ1wiO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInVzZXJuYW1lRXhpc3RcIjpcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudGV4dCA9IFwiVXNlcm5hbWUgYWxyZWFkeSBleGlzdFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInJvb21GdWxsXCIgOlxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS50ZXh0ID0gXCJSb29tIGlzIGFscmVhZHkgZnVsbC5cIjtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQgOlxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmNvbnRyb2xsZXIoXCJsb2dpbkNvbnRyb2xsZXJcIiwgW1wiJHNjb3BlXCIsIFwic29ja2V0U2VydmljZVwiLCBcImRpc3BsYXlTZXJ2aWNlXCIsIGxvZ2luQ29udHJvbGxlcl0pO1xyXG59KSgpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGp1c3Rpam5kZXBvdmVyIG9uIDE2LzEyLzE1LlxyXG4gKi9cclxuXHJcblxyXG4oZnVuY3Rpb24oKXtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG4gICAgdmFyIHBsYXlDb250cm9sbGVyID0gZnVuY3Rpb24oJHNjb3BlLCAkcm9vdFNjb3BlLCBzb2NrZXRTZXJ2aWNlLCBldmVudFNlcnZpY2UsIGRpc3BsYXlTZXJ2aWNlKXtcclxuICAgICAgICAkc2NvcGUuUENTaG93ID0gZGlzcGxheVNlcnZpY2UuZ2V0UENTaG93O1xyXG4gICAgICAgICRzY29wZS5zaG93U2V0dGluZ3MgPSBkaXNwbGF5U2VydmljZS5nZXRTZXR0aW5nU2hvdztcclxuICAgICAgICAkc2NvcGUuc3RhcnRHYW1lID0gZmFsc2U7XHJcbiAgICAgICAgJHNjb3BlLlNldHRpbmdzID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgdmFyIGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2J0blNldHRpbmdzJylbMF0uY2hpbGRyZW5bMF07XHJcbiAgICAgICAgICAgIGlmKGJ0bi5jbGFzc0xpc3QuY29udGFpbnMoJ3JvdGF0ZScpPT10cnVlKXtcclxuICAgICAgICAgICAgICAgIGRpc3BsYXlTZXJ2aWNlLnNldFNldHRpbmdTaG93KGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIGJ0bi5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3JvdGF0ZUFudGknKTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5U2VydmljZS5zZXRTZXR0aW5nU2hvdyh0cnVlKTtcclxuICAgICAgICAgICAgICAgIGJ0bi5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3JvdGF0ZScpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH07XHJcbiAgICAgICAgJHNjb3BlLnNob290ID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgc29ja2V0U2VydmljZS5lbWl0KFwicGxheWVyU2hvdFwiLCBudWxsKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgc2VuZERldmljZU9yaWVudGF0aW9uID0gZnVuY3Rpb24oZXZlbnREYXRhKXtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7fTtcclxuICAgICAgICAgICAgLy9kYXRhLmdhbW1hID0gZXZlbnREYXRhLmdhbW1hO1xyXG4gICAgICAgICAgICBkYXRhLmJldGEgPSBldmVudERhdGEuYmV0YTtcclxuICAgICAgICAgICAgLy9kYXRhLmFscGhhID0gZXZlbnREYXRhLmFscGhhO1xyXG4gICAgICAgICAgICBzb2NrZXRTZXJ2aWNlLmVtaXQoXCJkZXZpY2VPcmllbnRhdGlvblwiLCBkYXRhKVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgZXZlbnRTZXJ2aWNlLnN1YnNjcmliZU1lKCk7XHJcbiAgICAgICAgJHJvb3RTY29wZS4kb24oJ2FwcC5kZXZpY2VvcmllbnRhdGlvbkV2ZW50JywgZnVuY3Rpb24oYSwgYikge1xyXG4gICAgICAgICAgICBzZW5kRGV2aWNlT3JpZW50YXRpb24oYik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICRzY29wZS5sZWF2ZVJvb20gPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBzb2NrZXRTZXJ2aWNlLmVtaXQoXCJnc21EaXNjb25uZWN0XCIsIG51bGwpO1xyXG4gICAgICAgICAgICBkaXNwbGF5U2VydmljZS5zZXRMQ1Nob3codHJ1ZSk7XHJcbiAgICAgICAgICAgIGRpc3BsYXlTZXJ2aWNlLnNldFBDU2hvdyhmYWxzZSk7XHJcbiAgICAgICAgICAgIGRpc3BsYXlTZXJ2aWNlLnNldFNldHRpbmdTaG93KGZhbHNlKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBzb2NrZXRTZXJ2aWNlLm9uKFwibWVzc2FnZVwiLCBmdW5jdGlvbihtZXNzYWdlKXtcclxuICAgICAgICAgICAgY29uc29sZS5sb2cobWVzc2FnZSk7XHJcbiAgICAgICAgICAgIGlmKG1lc3NhZ2UgPT0gXCJjb25uZWN0aW9uRXN0YWJsaXNoZWRcIil7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudGV4dCA9IFwiV2FpdGluZyBvbiBvdGhlciBwbGF5ZXJzXCI7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc3RhcnRHYW1lID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1lbHNlIGlmKG1lc3NhZ2UgPT0gXCJzdGFydEdhbWVcIil7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc3RhcnRHYW1lID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5jb250cm9sbGVyKFwicGxheUNvbnRyb2xsZXJcIiwgW1wiJHNjb3BlXCIsIFwiJHJvb3RTY29wZVwiLCBcInNvY2tldFNlcnZpY2VcIiwgXCJldmVudFNlcnZpY2VcIiwgXCJkaXNwbGF5U2VydmljZVwiLCBwbGF5Q29udHJvbGxlcl0pXHJcbn0pKCk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkganVzdGlqbmRlcG92ZXIgb24gMTYvMTIvMTUuXHJcbiAqL1xyXG5cclxuXHJcbihmdW5jdGlvbigpe1xyXG4gICAgdmFyIGRpc3BsYXlTZXJ2aWNlID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAvL0xvZ2luIENvbnRyb2xsZXJcclxuICAgICAgICB2YXIgTENTaG93ID0gdHJ1ZTtcclxuICAgICAgICAvL1BsYXkgY29udHJvbGxlclxyXG4gICAgICAgIHZhciBQQ1Nob3cgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgdmFyIFNldHRpbmdTaG93ID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHJldHVybntcclxuICAgICAgICAgICAgZ2V0TENTaG93OiBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIExDU2hvdztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2V0TENTaG93OiBmdW5jdGlvbih2YWx1ZSl7XHJcbiAgICAgICAgICAgICAgICBMQ1Nob3cgPSB2YWx1ZTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZ2V0UENTaG93OiBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBDU2hvdztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2V0UENTaG93OiBmdW5jdGlvbih2YWx1ZSl7XHJcbiAgICAgICAgICAgICAgICBQQ1Nob3cgPSB2YWx1ZTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZ2V0U2V0dGluZ1Nob3c6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gU2V0dGluZ1Nob3c7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNldFNldHRpbmdTaG93OiBmdW5jdGlvbih2YWx1ZSl7XHJcbiAgICAgICAgICAgICAgICBTZXR0aW5nU2hvdyA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmZhY3RvcnkoJ2Rpc3BsYXlTZXJ2aWNlJywgW2Rpc3BsYXlTZXJ2aWNlXSk7XHJcbn0pKCk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgTWljaGllbCBvbiAxNi8xMi8yMDE1LlxyXG4gKi9cclxuKGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgZXZlbnRTZXJ2aWNlID0gZnVuY3Rpb24oJHJvb3RTY29wZSwkd2luZG93KXtcclxuICAgICAgICBmdW5jdGlvbiBzdWJzRnVuYygpIHtcclxuICAgICAgICAgICAgJHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdkZXZpY2VvcmllbnRhdGlvbicsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnYXBwLmRldmljZW9yaWVudGF0aW9uRXZlbnQnLCBlKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIFwic3Vic2NyaWJlTWVcIjogc3Vic0Z1bmNcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgYW5ndWxhci5tb2R1bGUoXCJhcHBcIikuZmFjdG9yeShcImV2ZW50U2VydmljZVwiLCBbXCIkcm9vdFNjb3BlXCIsXCIkd2luZG93XCIsIGV2ZW50U2VydmljZV0pO1xyXG59KSgpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGp1c3Rpam5kZXBvdmVyIG9uIDA5LzEyLzE1LlxyXG4gKi9cclxuXHJcbihmdW5jdGlvbigpe1xyXG5cclxuICAgIHZhciBzb2NrZXRTZXJ2aWNlID0gZnVuY3Rpb24oJHJvb3RTY29wZSl7XHJcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XHJcbiAgICAgICAgLy9wcml2YXRlXHJcbiAgICAgICAgdmFyIHNvY2tldCA9IGlvLmNvbm5lY3Qod2luZG93LmxvY2F0aW9uLmhvc3QpO1xyXG4gICAgICAgIC8vZnVuY3Rpb25zXHJcbiAgICAgICAgdmFyIG9uID0gZnVuY3Rpb24gKGV2ZW50TmFtZSwgY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgc29ja2V0Lm9uKGV2ZW50TmFtZSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkoc29ja2V0LCBhcmdzKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZW1pdCA9IGZ1bmN0aW9uIChldmVudE5hbWUsIGRhdGEsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIHNvY2tldC5lbWl0KGV2ZW50TmFtZSwgZGF0YSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KHNvY2tldCwgYXJncyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy9wdWJsaWNcclxuICAgICAgICByZXR1cm57XHJcbiAgICAgICAgICAgIG9uOiBvbixcclxuICAgICAgICAgICAgZW1pdDogZW1pdCxcclxuICAgICAgICAgICAgc29ja2V0OiBzb2NrZXRcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmZhY3RvcnkoXCJzb2NrZXRTZXJ2aWNlXCIsIFtcIiRyb290U2NvcGVcIiwgc29ja2V0U2VydmljZV0pO1xyXG5cclxufSkoKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
