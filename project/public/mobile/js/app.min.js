!function(){angular.module("app",[])}(),function(){var e=function(e,n,o){e.LCShow=o.getLCShow,n.on("startGame",function(e){console.log("start game")}),n.on("roomDisconnect",function(e){}),e.joinRoom=function(e,o){var t={};t.username=e,t.room=o.toUpperCase(),n.emit("gsmConnect",t)},n.on("message",function(n){switch(console.log("connectie"),n){case"connectionEstablished":o.setPCShow(!0),o.setLCShow(!1);break;case"connectionRefused":e.text="Something went wrong";break;case"usernameExist":e.text="Username already exist";break;case"roomFull":e.text="Room is already full."}})};angular.module("app").controller("loginController",["$scope","socketService","displayService",e])}(),function(){"use strict";var e=function(e,n,o,t,a){e.PCShow=a.getPCShow,e.startGame=!1,e.shoot=function(){o.emit("playerShot",null)};var i=function(e){var n={};n.beta=e.beta,o.emit("deviceOrientation",n)};t.subscribeMe(),n.$on("app.deviceorientationEvent",function(e,n){i(n)}),e.leaveRoom=function(){o.emit("gsmDisconnect",null),a.setLCShow(!0),a.setPCShow(!1)},o.on("message",function(n){"connectionEstablished"==n?(e.text="Waiting on other players",e.startGame=!1):"startGame"==n&&(e.startGame=!0)})};angular.module("app").controller("playController",["$scope","$rootScope","socketService","eventService","displayService",e])}(),function(){var e=function(){var e=!0,n=!1;return{getLCShow:function(){return e},setLCShow:function(n){e=n},getPCShow:function(){return n},setPCShow:function(e){n=e}}};angular.module("app").factory("displayService",[e])}(),function(){var e=function(e,n){function o(){n.addEventListener("deviceorientation",function(n){e.$broadcast("app.deviceorientationEvent",n)})}return{subscribeMe:o}};angular.module("app").factory("eventService",["$rootScope","$window",e])}(),function(){var e=function(e){"use strict";var n=io.connect(window.location.host),o=function(o,t){n.on(o,function(){var o=arguments;e.$apply(function(){t.apply(n,o)})})},t=function(o,t,a){n.emit(o,t,function(){var o=arguments;e.$apply(function(){a&&a.apply(n,o)})})};return{on:o,emit:t,socket:n}};angular.module("app").factory("socketService",["$rootScope",e])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNvbnRyb2xsZXIvbG9naW5Db250cm9sbGVyLmpzIiwiY29udHJvbGxlci9wbGF5Q29udHJvbGxlci5qcyIsInNlcnZpY2VzL2Rpc3BsYXlTZXJ2aWNlLmpzIiwic2VydmljZXMvZXZlbnRTZXJ2aWNlLmpzIiwic2VydmljZXMvc29ja2V0U2VydmljZS5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwibG9naW5Db250cm9sbGVyIiwiJHNjb3BlIiwic29ja2V0U2VydmljZSIsImRpc3BsYXlTZXJ2aWNlIiwiTENTaG93IiwiZ2V0TENTaG93Iiwib24iLCJkYXRhIiwiY29uc29sZSIsImxvZyIsImpvaW5Sb29tIiwidXNlcm5hbWUiLCJyb29tIiwidG9VcHBlckNhc2UiLCJlbWl0IiwibWVzc2FnZSIsInNldFBDU2hvdyIsInNldExDU2hvdyIsInRleHQiLCJjb250cm9sbGVyIiwicGxheUNvbnRyb2xsZXIiLCIkcm9vdFNjb3BlIiwiZXZlbnRTZXJ2aWNlIiwiUENTaG93IiwiZ2V0UENTaG93Iiwic3RhcnRHYW1lIiwic2hvb3QiLCJzZW5kRGV2aWNlT3JpZW50YXRpb24iLCJldmVudERhdGEiLCJiZXRhIiwic3Vic2NyaWJlTWUiLCIkb24iLCJhIiwiYiIsImxlYXZlUm9vbSIsInZhbHVlIiwiZmFjdG9yeSIsIiR3aW5kb3ciLCJzdWJzRnVuYyIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiJGJyb2FkY2FzdCIsInNvY2tldCIsImlvIiwiY29ubmVjdCIsIndpbmRvdyIsImxvY2F0aW9uIiwiaG9zdCIsImV2ZW50TmFtZSIsImNhbGxiYWNrIiwiYXJncyIsImFyZ3VtZW50cyIsIiRhcHBseSIsImFwcGx5Il0sIm1hcHBpbmdzIjoiQ0FHQSxXQUVBQSxRQUFBQyxPQUFBLGFDQUEsV0FFQSxHQUFBQyxHQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEdBQ0FGLEVBQUFHLE9BQUFELEVBQUFFLFVBRUFILEVBQUFJLEdBQUEsWUFBQSxTQUFB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IDI1LzExLzIwMTUuXG4gKi9cbihmdW5jdGlvbigpe1xuXG4gICAgdmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIsW10pO1xufSkoKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkganVzdGlqbmRlcG92ZXIgb24gMTYvMTIvMTUuXG4gKi9cblxuXG4oZnVuY3Rpb24oKXtcblxuICAgIHZhciBsb2dpbkNvbnRyb2xsZXIgPSBmdW5jdGlvbigkc2NvcGUsIHNvY2tldFNlcnZpY2UsIGRpc3BsYXlTZXJ2aWNlKXtcbiAgICAgICAgJHNjb3BlLkxDU2hvdyA9IGRpc3BsYXlTZXJ2aWNlLmdldExDU2hvdztcbiAgICAgICAgLy9mdW5jdGlvbnNcbiAgICAgICAgc29ja2V0U2VydmljZS5vbihcInN0YXJ0R2FtZVwiLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJzdGFydCBnYW1lXCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgc29ja2V0U2VydmljZS5vbihcInJvb21EaXNjb25uZWN0XCIsIGZ1bmN0aW9uIChkYXRhKSB7XG5cbiAgICAgICAgfSk7XG5cbiAgICAgICAgJHNjb3BlLmpvaW5Sb29tID0gZnVuY3Rpb24odXNlcm5hbWUsIHJvb20pe1xuICAgICAgICAgICAgdmFyIGRhdGEgPSB7fTtcbiAgICAgICAgICAgIGRhdGEudXNlcm5hbWUgPSB1c2VybmFtZTtcbiAgICAgICAgICAgIGRhdGEucm9vbSA9IHJvb20udG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgIHNvY2tldFNlcnZpY2UuZW1pdChcImdzbUNvbm5lY3RcIiwgZGF0YSk7XG5cbiAgICAgICAgfTtcblxuICAgICAgICBzb2NrZXRTZXJ2aWNlLm9uKFwibWVzc2FnZVwiLCBmdW5jdGlvbihtZXNzYWdlKXtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiY29ubmVjdGllXCIpO1xuICAgICAgICAgICAgc3dpdGNoKCBtZXNzYWdlKXtcbiAgICAgICAgICAgICAgICBjYXNlIFwiY29ubmVjdGlvbkVzdGFibGlzaGVkXCI6XG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlTZXJ2aWNlLnNldFBDU2hvdyh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheVNlcnZpY2Uuc2V0TENTaG93KGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcImNvbm5lY3Rpb25SZWZ1c2VkXCI6XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS50ZXh0ID0gXCJTb21ldGhpbmcgd2VudCB3cm9uZ1wiO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwidXNlcm5hbWVFeGlzdFwiOlxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudGV4dCA9IFwiVXNlcm5hbWUgYWxyZWFkeSBleGlzdFwiO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwicm9vbUZ1bGxcIiA6XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS50ZXh0ID0gXCJSb29tIGlzIGFscmVhZHkgZnVsbC5cIjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdCA6XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJhcHBcIikuY29udHJvbGxlcihcImxvZ2luQ29udHJvbGxlclwiLCBbXCIkc2NvcGVcIiwgXCJzb2NrZXRTZXJ2aWNlXCIsIFwiZGlzcGxheVNlcnZpY2VcIiwgbG9naW5Db250cm9sbGVyXSk7XG59KSgpOyIsIi8qKlxuICogQ3JlYXRlZCBieSBqdXN0aWpuZGVwb3ZlciBvbiAxNi8xMi8xNS5cbiAqL1xuXG5cbihmdW5jdGlvbigpe1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIHZhciBwbGF5Q29udHJvbGxlciA9IGZ1bmN0aW9uKCRzY29wZSwgJHJvb3RTY29wZSwgc29ja2V0U2VydmljZSwgZXZlbnRTZXJ2aWNlLCBkaXNwbGF5U2VydmljZSl7XG4gICAgICAgICRzY29wZS5QQ1Nob3cgPSBkaXNwbGF5U2VydmljZS5nZXRQQ1Nob3c7XG4gICAgICAgICRzY29wZS5zdGFydEdhbWUgPSBmYWxzZTtcbiAgICAgICAgJHNjb3BlLnNob290ID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHNvY2tldFNlcnZpY2UuZW1pdChcInBsYXllclNob3RcIiwgbnVsbCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIHNlbmREZXZpY2VPcmllbnRhdGlvbiA9IGZ1bmN0aW9uKGV2ZW50RGF0YSl7XG4gICAgICAgICAgICB2YXIgZGF0YSA9IHt9O1xuICAgICAgICAgICAgLy9kYXRhLmdhbW1hID0gZXZlbnREYXRhLmdhbW1hO1xuICAgICAgICAgICAgZGF0YS5iZXRhID0gZXZlbnREYXRhLmJldGE7XG4gICAgICAgICAgICAvL2RhdGEuYWxwaGEgPSBldmVudERhdGEuYWxwaGE7XG4gICAgICAgICAgICBzb2NrZXRTZXJ2aWNlLmVtaXQoXCJkZXZpY2VPcmllbnRhdGlvblwiLCBkYXRhKVxuICAgICAgICB9O1xuICAgICAgICBldmVudFNlcnZpY2Uuc3Vic2NyaWJlTWUoKTtcbiAgICAgICAgJHJvb3RTY29wZS4kb24oJ2FwcC5kZXZpY2VvcmllbnRhdGlvbkV2ZW50JywgZnVuY3Rpb24oYSwgYikge1xuICAgICAgICAgICAgc2VuZERldmljZU9yaWVudGF0aW9uKGIpO1xuICAgICAgICB9KTtcblxuICAgICAgICAkc2NvcGUubGVhdmVSb29tID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHNvY2tldFNlcnZpY2UuZW1pdChcImdzbURpc2Nvbm5lY3RcIiwgbnVsbCk7XG4gICAgICAgICAgICBkaXNwbGF5U2VydmljZS5zZXRMQ1Nob3codHJ1ZSk7XG4gICAgICAgICAgICBkaXNwbGF5U2VydmljZS5zZXRQQ1Nob3coZmFsc2UpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHNvY2tldFNlcnZpY2Uub24oXCJtZXNzYWdlXCIsIGZ1bmN0aW9uKG1lc3NhZ2Upe1xuICAgICAgICAgICAgaWYobWVzc2FnZSA9PSBcImNvbm5lY3Rpb25Fc3RhYmxpc2hlZFwiKXtcbiAgICAgICAgICAgICAgICAkc2NvcGUudGV4dCA9IFwiV2FpdGluZyBvbiBvdGhlciBwbGF5ZXJzXCI7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnN0YXJ0R2FtZSA9IGZhbHNlO1xuICAgICAgICAgICAgfWVsc2UgaWYobWVzc2FnZSA9PSBcInN0YXJ0R2FtZVwiKXtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc3RhcnRHYW1lID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmNvbnRyb2xsZXIoXCJwbGF5Q29udHJvbGxlclwiLCBbXCIkc2NvcGVcIiwgXCIkcm9vdFNjb3BlXCIsIFwic29ja2V0U2VydmljZVwiLCBcImV2ZW50U2VydmljZVwiLCBcImRpc3BsYXlTZXJ2aWNlXCIsIHBsYXlDb250cm9sbGVyXSlcbn0pKCk7IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGp1c3Rpam5kZXBvdmVyIG9uIDE2LzEyLzE1LlxuICovXG5cblxuKGZ1bmN0aW9uKCl7XG4gICAgdmFyIGRpc3BsYXlTZXJ2aWNlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgLy9Mb2dpbiBDb250cm9sbGVyXG4gICAgICAgIHZhciBMQ1Nob3cgPSB0cnVlO1xuICAgICAgICAvL1BsYXkgY29udHJvbGxlclxuICAgICAgICB2YXIgUENTaG93ID0gZmFsc2U7XG5cbiAgICAgICAgcmV0dXJue1xuICAgICAgICAgICAgZ2V0TENTaG93OiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIHJldHVybiBMQ1Nob3c7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0TENTaG93OiBmdW5jdGlvbih2YWx1ZSl7XG4gICAgICAgICAgICAgICAgTENTaG93ID0gdmFsdWU7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0UENTaG93OiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIHJldHVybiBQQ1Nob3c7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0UENTaG93OiBmdW5jdGlvbih2YWx1ZSl7XG4gICAgICAgICAgICAgICAgUENTaG93ID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmZhY3RvcnkoJ2Rpc3BsYXlTZXJ2aWNlJywgW2Rpc3BsYXlTZXJ2aWNlXSk7XG59KSgpOyIsIi8qKlxuICogQ3JlYXRlZCBieSBNaWNoaWVsIG9uIDE2LzEyLzIwMTUuXG4gKi9cbihmdW5jdGlvbigpe1xuICAgIHZhciBldmVudFNlcnZpY2UgPSBmdW5jdGlvbigkcm9vdFNjb3BlLCR3aW5kb3cpe1xuICAgICAgICBmdW5jdGlvbiBzdWJzRnVuYygpIHtcbiAgICAgICAgICAgICR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignZGV2aWNlb3JpZW50YXRpb24nLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdhcHAuZGV2aWNlb3JpZW50YXRpb25FdmVudCcsIGUpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBcInN1YnNjcmliZU1lXCI6IHN1YnNGdW5jXG4gICAgICAgIH1cbiAgICB9O1xuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmZhY3RvcnkoXCJldmVudFNlcnZpY2VcIiwgW1wiJHJvb3RTY29wZVwiLFwiJHdpbmRvd1wiLCBldmVudFNlcnZpY2VdKTtcbn0pKCk7IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGp1c3Rpam5kZXBvdmVyIG9uIDA5LzEyLzE1LlxuICovXG5cbihmdW5jdGlvbigpe1xuXG4gICAgdmFyIHNvY2tldFNlcnZpY2UgPSBmdW5jdGlvbigkcm9vdFNjb3BlKXtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIC8vcHJpdmF0ZVxuICAgICAgICB2YXIgc29ja2V0ID0gaW8uY29ubmVjdCh3aW5kb3cubG9jYXRpb24uaG9zdCk7XG4gICAgICAgIC8vZnVuY3Rpb25zXG4gICAgICAgIHZhciBvbiA9IGZ1bmN0aW9uIChldmVudE5hbWUsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICBzb2NrZXQub24oZXZlbnROYW1lLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5hcHBseShzb2NrZXQsIGFyZ3MpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGVtaXQgPSBmdW5jdGlvbiAoZXZlbnROYW1lLCBkYXRhLCBjYWxsYmFjaykge1xuICAgICAgICAgICAgc29ja2V0LmVtaXQoZXZlbnROYW1lLCBkYXRhLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KHNvY2tldCwgYXJncyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH07XG5cbiAgICAgICAgLy9wdWJsaWNcbiAgICAgICAgcmV0dXJue1xuICAgICAgICAgICAgb246IG9uLFxuICAgICAgICAgICAgZW1pdDogZW1pdCxcbiAgICAgICAgICAgIHNvY2tldDogc29ja2V0XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJhcHBcIikuZmFjdG9yeShcInNvY2tldFNlcnZpY2VcIiwgW1wiJHJvb3RTY29wZVwiLCBzb2NrZXRTZXJ2aWNlXSk7XG5cbn0pKCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
