!function(){angular.module("app",[])}(),function(){var t=function(t,e,n){t.LCShow=n.getLCShow,e.on("startGame",function(t){console.log("start game")}),e.on("roomDisconnect",function(t){n.setPCShow(!1),n.setLCShow(!0)}),t.joinRoom=function(t,n){var o={};o.username=t,o.room=n.toUpperCase(),e.emit("gsmConnect",o)},e.on("message",function(e){switch(e){case"connectionEstablished":n.setPCShow(!0),n.setLCShow(!1);break;case"connectionRefused":t.text="Something went wrong";break;case"usernameExist":t.text="Username already exist";break;case"roomFull":t.text="Room is already full."}})};angular.module("app").controller("loginController",["$scope","socketService","displayService",t])}(),function(){"use strict";var t=function(t,e,n,o,i){t.PCShow=i.getPCShow,t.showSettings=i.getSettingShow,t.life=3,t.getNumber=function(t){return new Array(t)},t.color="blue",t.startGame=!1,t.Settings=function(){var t=document.getElementsByClassName("btnSettings")[0].children[0];1==t.classList.contains("rotate")?(i.setSettingShow(!1),t.setAttribute("class","rotateAnti")):(i.setSettingShow(!0),t.setAttribute("class","rotate"))},t.shoot=function(){n.emit("playerShot",null)};var a=function(t){var e={};e.beta=t.beta,n.emit("deviceOrientation",e)};o.subscribeMe(),e.$on("app.deviceorientationEvent",function(t,e){a(e)}),t.leaveRoom=function(){n.emit("gsmDisconnect",null),i.setLCShow(!0),i.setPCShow(!1),i.setSettingShow(!1)},n.on("message",function(e){console.log(e),"connectionEstablished"==e?(t.text="Waiting on other players",t.startGame=!1):"startGame"==e&&(t.startGame=!0)}),n.on("life",function(e){t.life=e})};angular.module("app").controller("playController",["$scope","$rootScope","socketService","eventService","displayService",t])}(),function(){var t=function(){var t=!0,e=!1,n=!1;return{getLCShow:function(){return t},setLCShow:function(e){t=e},getPCShow:function(){return e},setPCShow:function(t){e=t},getSettingShow:function(){return n},setSettingShow:function(t){n=t}}};angular.module("app").factory("displayService",[t])}(),function(){var t=function(t,e){function n(){e.addEventListener("deviceorientation",function(e){t.$broadcast("app.deviceorientationEvent",e)})}return{subscribeMe:n}};angular.module("app").factory("eventService",["$rootScope","$window",t])}(),function(){var t=function(t){"use strict";var e=io.connect(window.location.host),n=function(n,o){e.on(n,function(){var n=arguments;t.$apply(function(){o.apply(e,n)})})},o=function(n,o,i){e.emit(n,o,function(){var n=arguments;t.$apply(function(){i&&i.apply(e,n)})})};return{on:n,emit:o,socket:e}};angular.module("app").factory("socketService",["$rootScope",t])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNvbnRyb2xsZXIvbG9naW5Db250cm9sbGVyLmpzIiwiY29udHJvbGxlci9wbGF5Q29udHJvbGxlci5qcyIsInNlcnZpY2VzL2Rpc3BsYXlTZXJ2aWNlLmpzIiwic2VydmljZXMvZXZlbnRTZXJ2aWNlLmpzIiwic2VydmljZXMvc29ja2V0U2VydmljZS5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwibG9naW5Db250cm9sbGVyIiwiJHNjb3BlIiwic29ja2V0U2VydmljZSIsImRpc3BsYXlTZXJ2aWNlIiwiTENTaG93IiwiZ2V0TENTaG93Iiwib24iLCJkYXRhIiwiY29uc29sZSIsImxvZyIsInNldFBDU2hvdyIsInNldExDU2hvdyIsImpvaW5Sb29tIiwidXNlcm5hbWUiLCJyb29tIiwidG9VcHBlckNhc2UiLCJlbWl0IiwibWVzc2FnZSIsInRleHQiLCJjb250cm9sbGVyIiwicGxheUNvbnRyb2xsZXIiLCIkcm9vdFNjb3BlIiwiZXZlbnRTZXJ2aWNlIiwiUENTaG93IiwiZ2V0UENTaG93Iiwic2hvd1NldHRpbmdzIiwiZ2V0U2V0dGluZ1Nob3ciLCJsaWZlIiwiZ2V0TnVtYmVyIiwibnVtIiwiQXJyYXkiLCJjb2xvciIsInN0YXJ0R2FtZSIsIlNldHRpbmdzIiwiYnRuIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiY2hpbGRyZW4iLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInNldFNldHRpbmdTaG93Iiwic2V0QXR0cmlidXRlIiwic2hvb3QiLCJzZW5kRGV2aWNlT3JpZW50YXRpb24iLCJldmVudERhdGEiLCJiZXRhIiwic3Vic2NyaWJlTWUiLCIkb24iLCJhIiwiYiIsImxlYXZlUm9vbSIsIlNldHRpbmdTaG93IiwidmFsdWUiLCJmYWN0b3J5IiwiJHdpbmRvdyIsInN1YnNGdW5jIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCIkYnJvYWRjYXN0Iiwic29ja2V0IiwiaW8iLCJjb25uZWN0Iiwid2luZG93IiwibG9jYXRpb24iLCJob3N0IiwiZXZlbnROYW1lIiwiY2FsbGJhY2siLCJhcmdzIiwiYXJndW1lbnRzIiwiJGFwcGx5IiwiYXBwbHkiXSwibWFwcGluZ3MiOiJDQUdBLFdBRUFBLFFBQUFDLE9BQUEsYUNBQSxXQUVBLEdBQUFDLEdBQUEsU0FBQUMsRUFBQUMsRUFBQUMsR0FDQUYsRUFBQUcsT0FBQUQsRUFBQUUsVUFFQUgsRUFBQUksR0FBQSxZQUFBLFNBQUFDLEdBQ0FDLFFBQUFDLElBQUEsZ0JBRUFQLEVBQUFJLEdBQUEsaUJBQUEsU0FBQUMsR0FDQUosRUFBQU8sV0FBQSxHQUNBUCxFQUFBUSxXQUFBLEtBR0FWLEVBQUFXLFNBQUEsU0FBQUMsRUFBQUMsR0FDQSxHQUFBUCxLQUNBQSxHQUFBTSxTQUFBQSxFQUNBTixFQUFBTyxLQUFBQSxFQUFBQyxjQUNBYixFQUFBYyxLQUFBLGFBQUFULElBSUFMLEVBQUFJLEdBQUEsVUFBQSxTQUFBVyxHQUNBLE9BQUFBLEdBQ0EsSUFBQSx3QkFDQWQsRUFBQU8sV0FBQSxHQUNBUCxFQUFBUSxXQUFBLEVBQ0EsTUFDQSxLQUFBLG9CQUNBVixFQUFBaUIsS0FBQSxzQkFDQSxNQUNBLEtBQUEsZ0JBQ0FqQixFQUFBaUIsS0FBQSx3QkFDQSxNQUNBLEtBQUEsV0FDQWpCLEVBQUFpQixLQUFBLDJCQVFBcEIsU0FBQUMsT0FBQSxPQUFBb0IsV0FBQSxtQkFBQSxTQUFBLGdCQUFBLGlCQUFBbkIsT0MxQ0EsV0FDQSxZQUNBLElBQUFvQixHQUFBLFNBQUFuQixFQUFBb0IsRUFBQW5CLEVBQUFvQixFQUFBbkIsR0FDQUYsRUFBQXNCLE9BQUFwQixFQUFBcUIsVUFDQXZCLEVBQUF3QixhQUFBdEIsRUFBQXVCLGVBQ0F6QixFQUFBMEIsS0FBQSxFQUNBMUIsRUFBQTJCLFVBQUEsU0FBQUMsR0FDQSxNQUFBLElBQUFDLE9BQUFELElBRUE1QixFQUFBOEIsTUFBQSxPQUNBOUIsRUFBQStCLFdBQUEsRUFDQS9CLEVBQUFnQyxTQUFBLFdBQ0EsR0FBQUMsR0FBQUMsU0FBQUMsdUJBQUEsZUFBQSxHQUFBQyxTQUFBLEVBQ0EsSUFBQUgsRUFBQUksVUFBQUMsU0FBQSxXQUNBcEMsRUFBQXFDLGdCQUFBLEdBQ0FOLEVBQUFPLGFBQUEsUUFBQSxnQkFFQXRDLEVBQUFxQyxnQkFBQSxHQUNBTixFQUFBTyxhQUFBLFFBQUEsWUFJQXhDLEVBQUF5QyxNQUFBLFdBQ0F4QyxFQUFBYyxLQUFBLGFBQUEsTUFHQSxJQUFBMkIsR0FBQSxTQUFBQyxHQUNBLEdBQUFyQyxLQUVBQSxHQUFBc0MsS0FBQUQsRUFBQUMsS0FFQTNDLEVBQUFjLEtBQUEsb0JBQUFULEdBRUFlLEdBQUF3QixjQUNBekIsRUFBQTBCLElBQUEsNkJBQUEsU0FBQUMsRUFBQUMsR0FDQU4sRUFBQU0sS0FHQWhELEVBQUFpRCxVQUFBLFdBQ0FoRCxFQUFBYyxLQUFBLGdCQUFBLE1BQ0FiLEVBQUFRLFdBQUEsR0FDQVIsRUFBQU8sV0FBQSxHQUNBUCxFQUFBcUMsZ0JBQUEsSUFHQXRDLEVBQUFJLEdBQUEsVUFBQSxTQUFBVyxHQUNBVCxRQUFBQyxJQUFBUSxHQUNBLHlCQUFBQSxHQUNBaEIsRUFBQWlCLEtBQUEsMkJBQ0FqQixFQUFBK0IsV0FBQSxHQUNBLGFBQUFmLElBQ0FoQixFQUFBK0IsV0FBQSxLQUlBOUIsRUFBQUksR0FBQSxPQUFBLFNBQUFDLEdBQ0FOLEVBQUEwQixLQUFBcEIsSUFJQVQsU0FBQUMsT0FBQSxPQUFBb0IsV0FBQSxrQkFBQSxTQUFBLGFBQUEsZ0JBQUEsZUFBQSxpQkFBQUMsT0M1REEsV0FDQSxHQUFBakIsR0FBQSxXQUVBLEdBQUFDLElBQUEsRUFFQW1CLEdBQUEsRUFFQTRCLEdBQUEsQ0FFQSxRQUNBOUMsVUFBQSxXQUNBLE1BQUFELElBRUFPLFVBQUEsU0FBQXlDLEdBQ0FoRCxFQUFBZ0QsR0FFQTVCLFVBQUEsV0FDQSxNQUFBRCxJQUVBYixVQUFBLFNBQUEwQyxHQUNBN0IsRUFBQTZCLEdBRUExQixlQUFBLFdBQ0EsTUFBQXlCLElBRUFYLGVBQUEsU0FBQVksR0FDQUQsRUFBQUMsSUFNQXRELFNBQUFDLE9BQUEsT0FBQXNELFFBQUEsa0JBQUFsRCxPQ2xDQSxXQUNBLEdBQUFtQixHQUFBLFNBQUFELEVBQUFpQyxHQUNBLFFBQUFDLEtBQ0FELEVBQUFFLGlCQUFBLG9CQUFBLFNBQUFDLEdBQ0FwQyxFQUFBcUMsV0FBQSw2QkFBQUQsS0FJQSxPQUNBWCxZQUFBUyxHQUdBekQsU0FBQUMsT0FBQSxPQUFBc0QsUUFBQSxnQkFBQSxhQUFBLFVBQUEvQixPQ1hBLFdBRUEsR0FBQXBCLEdBQUEsU0FBQW1CLEdBQ0EsWUFFQSxJQUFBc0MsR0FBQUMsR0FBQUMsUUFBQUMsT0FBQUMsU0FBQUMsTUFFQTFELEVBQUEsU0FBQTJELEVBQUFDLEdBQ0FQLEVBQUFyRCxHQUFBMkQsRUFBQSxXQUNBLEdBQUFFLEdBQUFDLFNBQ0EvQyxHQUFBZ0QsT0FBQSxXQUNBSCxFQUFBSSxNQUFBWCxFQUFBUSxRQUtBbkQsRUFBQSxTQUFBaUQsRUFBQTFELEVBQUEyRCxHQUNBUCxFQUFBM0MsS0FBQWlELEVBQUExRCxFQUFBLFdBQ0EsR0FBQTRELEdBQUFDLFNBQ0EvQyxHQUFBZ0QsT0FBQSxXQUNBSCxHQUNBQSxFQUFBSSxNQUFBWCxFQUFBUSxPQU9BLFFBQ0E3RCxHQUFBQSxFQUNBVSxLQUFBQSxFQUNBMkMsT0FBQUEsR0FJQTdELFNBQUFDLE9BQUEsT0FBQXNELFFBQUEsaUJBQUEsYUFBQW5EIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENyZWF0ZWQgYnkgTWljaGllbCBvbiAyNS8xMS8yMDE1LlxuICovXG4oZnVuY3Rpb24oKXtcblxuICAgIHZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZShcImFwcFwiLFtdKTtcbn0pKCk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkganVzdGlqbmRlcG92ZXIgb24gMTYvMTIvMTUuXHJcbiAqL1xyXG5cclxuXHJcbihmdW5jdGlvbigpe1xyXG5cclxuICAgIHZhciBsb2dpbkNvbnRyb2xsZXIgPSBmdW5jdGlvbigkc2NvcGUsIHNvY2tldFNlcnZpY2UsIGRpc3BsYXlTZXJ2aWNlKXtcclxuICAgICAgICAkc2NvcGUuTENTaG93ID0gZGlzcGxheVNlcnZpY2UuZ2V0TENTaG93O1xyXG4gICAgICAgIC8vZnVuY3Rpb25zXHJcbiAgICAgICAgc29ja2V0U2VydmljZS5vbihcInN0YXJ0R2FtZVwiLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcInN0YXJ0IGdhbWVcIik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgc29ja2V0U2VydmljZS5vbihcInJvb21EaXNjb25uZWN0XCIsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIGRpc3BsYXlTZXJ2aWNlLnNldFBDU2hvdyhmYWxzZSk7XHJcbiAgICAgICAgICAgIGRpc3BsYXlTZXJ2aWNlLnNldExDU2hvdyh0cnVlKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmpvaW5Sb29tID0gZnVuY3Rpb24odXNlcm5hbWUsIHJvb20pe1xyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHt9O1xyXG4gICAgICAgICAgICBkYXRhLnVzZXJuYW1lID0gdXNlcm5hbWU7XHJcbiAgICAgICAgICAgIGRhdGEucm9vbSA9IHJvb20udG9VcHBlckNhc2UoKTtcclxuICAgICAgICAgICAgc29ja2V0U2VydmljZS5lbWl0KFwiZ3NtQ29ubmVjdFwiLCBkYXRhKTtcclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgc29ja2V0U2VydmljZS5vbihcIm1lc3NhZ2VcIiwgZnVuY3Rpb24obWVzc2FnZSl7XHJcbiAgICAgICAgICAgIHN3aXRjaChtZXNzYWdlKXtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJjb25uZWN0aW9uRXN0YWJsaXNoZWRcIjpcclxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5U2VydmljZS5zZXRQQ1Nob3codHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheVNlcnZpY2Uuc2V0TENTaG93KGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJjb25uZWN0aW9uUmVmdXNlZFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS50ZXh0ID0gXCJTb21ldGhpbmcgd2VudCB3cm9uZ1wiO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInVzZXJuYW1lRXhpc3RcIjpcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudGV4dCA9IFwiVXNlcm5hbWUgYWxyZWFkeSBleGlzdFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInJvb21GdWxsXCIgOlxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS50ZXh0ID0gXCJSb29tIGlzIGFscmVhZHkgZnVsbC5cIjtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQgOlxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmNvbnRyb2xsZXIoXCJsb2dpbkNvbnRyb2xsZXJcIiwgW1wiJHNjb3BlXCIsIFwic29ja2V0U2VydmljZVwiLCBcImRpc3BsYXlTZXJ2aWNlXCIsIGxvZ2luQ29udHJvbGxlcl0pO1xyXG59KSgpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGp1c3Rpam5kZXBvdmVyIG9uIDE2LzEyLzE1LlxyXG4gKi9cclxuXHJcblxyXG4oZnVuY3Rpb24oKXtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG4gICAgdmFyIHBsYXlDb250cm9sbGVyID0gZnVuY3Rpb24oJHNjb3BlLCAkcm9vdFNjb3BlLCBzb2NrZXRTZXJ2aWNlLCBldmVudFNlcnZpY2UsIGRpc3BsYXlTZXJ2aWNlKXtcclxuICAgICAgICAkc2NvcGUuUENTaG93ID0gZGlzcGxheVNlcnZpY2UuZ2V0UENTaG93O1xyXG4gICAgICAgICRzY29wZS5zaG93U2V0dGluZ3MgPSBkaXNwbGF5U2VydmljZS5nZXRTZXR0aW5nU2hvdztcclxuICAgICAgICAkc2NvcGUubGlmZT0zO1xyXG4gICAgICAgICRzY29wZS5nZXROdW1iZXIgPSBmdW5jdGlvbihudW0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBBcnJheShudW0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgJHNjb3BlLmNvbG9yPVwiYmx1ZVwiO1xyXG4gICAgICAgICRzY29wZS5zdGFydEdhbWUgPSBmYWxzZTtcclxuICAgICAgICAkc2NvcGUuU2V0dGluZ3MgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICB2YXIgYnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnYnRuU2V0dGluZ3MnKVswXS5jaGlsZHJlblswXTtcclxuICAgICAgICAgICAgaWYoYnRuLmNsYXNzTGlzdC5jb250YWlucygncm90YXRlJyk9PXRydWUpe1xyXG4gICAgICAgICAgICAgICAgZGlzcGxheVNlcnZpY2Uuc2V0U2V0dGluZ1Nob3coZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgYnRuLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAncm90YXRlQW50aScpO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIGRpc3BsYXlTZXJ2aWNlLnNldFNldHRpbmdTaG93KHRydWUpO1xyXG4gICAgICAgICAgICAgICAgYnRuLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAncm90YXRlJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfTtcclxuICAgICAgICAkc2NvcGUuc2hvb3QgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBzb2NrZXRTZXJ2aWNlLmVtaXQoXCJwbGF5ZXJTaG90XCIsIG51bGwpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBzZW5kRGV2aWNlT3JpZW50YXRpb24gPSBmdW5jdGlvbihldmVudERhdGEpe1xyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAvL2RhdGEuZ2FtbWEgPSBldmVudERhdGEuZ2FtbWE7XHJcbiAgICAgICAgICAgIGRhdGEuYmV0YSA9IGV2ZW50RGF0YS5iZXRhO1xyXG4gICAgICAgICAgICAvL2RhdGEuYWxwaGEgPSBldmVudERhdGEuYWxwaGE7XHJcbiAgICAgICAgICAgIHNvY2tldFNlcnZpY2UuZW1pdChcImRldmljZU9yaWVudGF0aW9uXCIsIGRhdGEpXHJcbiAgICAgICAgfTtcclxuICAgICAgICBldmVudFNlcnZpY2Uuc3Vic2NyaWJlTWUoKTtcclxuICAgICAgICAkcm9vdFNjb3BlLiRvbignYXBwLmRldmljZW9yaWVudGF0aW9uRXZlbnQnLCBmdW5jdGlvbihhLCBiKSB7XHJcbiAgICAgICAgICAgIHNlbmREZXZpY2VPcmllbnRhdGlvbihiKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmxlYXZlUm9vbSA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHNvY2tldFNlcnZpY2UuZW1pdChcImdzbURpc2Nvbm5lY3RcIiwgbnVsbCk7XHJcbiAgICAgICAgICAgIGRpc3BsYXlTZXJ2aWNlLnNldExDU2hvdyh0cnVlKTtcclxuICAgICAgICAgICAgZGlzcGxheVNlcnZpY2Uuc2V0UENTaG93KGZhbHNlKTtcclxuICAgICAgICAgICAgZGlzcGxheVNlcnZpY2Uuc2V0U2V0dGluZ1Nob3coZmFsc2UpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHNvY2tldFNlcnZpY2Uub24oXCJtZXNzYWdlXCIsIGZ1bmN0aW9uKG1lc3NhZ2Upe1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhtZXNzYWdlKTtcclxuICAgICAgICAgICAgaWYobWVzc2FnZSA9PSBcImNvbm5lY3Rpb25Fc3RhYmxpc2hlZFwiKXtcclxuICAgICAgICAgICAgICAgICRzY29wZS50ZXh0ID0gXCJXYWl0aW5nIG9uIG90aGVyIHBsYXllcnNcIjtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zdGFydEdhbWUgPSBmYWxzZTtcclxuICAgICAgICAgICAgfWVsc2UgaWYobWVzc2FnZSA9PSBcInN0YXJ0R2FtZVwiKXtcclxuICAgICAgICAgICAgICAgICRzY29wZS5zdGFydEdhbWUgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHNvY2tldFNlcnZpY2Uub24oXCJsaWZlXCIsZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgICAgJHNjb3BlLmxpZmUgPSBkYXRhO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5jb250cm9sbGVyKFwicGxheUNvbnRyb2xsZXJcIiwgW1wiJHNjb3BlXCIsIFwiJHJvb3RTY29wZVwiLCBcInNvY2tldFNlcnZpY2VcIiwgXCJldmVudFNlcnZpY2VcIiwgXCJkaXNwbGF5U2VydmljZVwiLCBwbGF5Q29udHJvbGxlcl0pXHJcbn0pKCk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkganVzdGlqbmRlcG92ZXIgb24gMTYvMTIvMTUuXHJcbiAqL1xyXG5cclxuXHJcbihmdW5jdGlvbigpe1xyXG4gICAgdmFyIGRpc3BsYXlTZXJ2aWNlID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAvL0xvZ2luIENvbnRyb2xsZXJcclxuICAgICAgICB2YXIgTENTaG93ID0gdHJ1ZTtcclxuICAgICAgICAvL1BsYXkgY29udHJvbGxlclxyXG4gICAgICAgIHZhciBQQ1Nob3cgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgdmFyIFNldHRpbmdTaG93ID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHJldHVybntcclxuICAgICAgICAgICAgZ2V0TENTaG93OiBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIExDU2hvdztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2V0TENTaG93OiBmdW5jdGlvbih2YWx1ZSl7XHJcbiAgICAgICAgICAgICAgICBMQ1Nob3cgPSB2YWx1ZTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZ2V0UENTaG93OiBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBDU2hvdztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2V0UENTaG93OiBmdW5jdGlvbih2YWx1ZSl7XHJcbiAgICAgICAgICAgICAgICBQQ1Nob3cgPSB2YWx1ZTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZ2V0U2V0dGluZ1Nob3c6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gU2V0dGluZ1Nob3c7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNldFNldHRpbmdTaG93OiBmdW5jdGlvbih2YWx1ZSl7XHJcbiAgICAgICAgICAgICAgICBTZXR0aW5nU2hvdyA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmZhY3RvcnkoJ2Rpc3BsYXlTZXJ2aWNlJywgW2Rpc3BsYXlTZXJ2aWNlXSk7XHJcbn0pKCk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgTWljaGllbCBvbiAxNi8xMi8yMDE1LlxyXG4gKi9cclxuKGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgZXZlbnRTZXJ2aWNlID0gZnVuY3Rpb24oJHJvb3RTY29wZSwkd2luZG93KXtcclxuICAgICAgICBmdW5jdGlvbiBzdWJzRnVuYygpIHtcclxuICAgICAgICAgICAgJHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdkZXZpY2VvcmllbnRhdGlvbicsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnYXBwLmRldmljZW9yaWVudGF0aW9uRXZlbnQnLCBlKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIFwic3Vic2NyaWJlTWVcIjogc3Vic0Z1bmNcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgYW5ndWxhci5tb2R1bGUoXCJhcHBcIikuZmFjdG9yeShcImV2ZW50U2VydmljZVwiLCBbXCIkcm9vdFNjb3BlXCIsXCIkd2luZG93XCIsIGV2ZW50U2VydmljZV0pO1xyXG59KSgpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGp1c3Rpam5kZXBvdmVyIG9uIDA5LzEyLzE1LlxyXG4gKi9cclxuXHJcbihmdW5jdGlvbigpe1xyXG5cclxuICAgIHZhciBzb2NrZXRTZXJ2aWNlID0gZnVuY3Rpb24oJHJvb3RTY29wZSl7XHJcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XHJcbiAgICAgICAgLy9wcml2YXRlXHJcbiAgICAgICAgdmFyIHNvY2tldCA9IGlvLmNvbm5lY3Qod2luZG93LmxvY2F0aW9uLmhvc3QpO1xyXG4gICAgICAgIC8vZnVuY3Rpb25zXHJcbiAgICAgICAgdmFyIG9uID0gZnVuY3Rpb24gKGV2ZW50TmFtZSwgY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgc29ja2V0Lm9uKGV2ZW50TmFtZSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkoc29ja2V0LCBhcmdzKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZW1pdCA9IGZ1bmN0aW9uIChldmVudE5hbWUsIGRhdGEsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIHNvY2tldC5lbWl0KGV2ZW50TmFtZSwgZGF0YSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KHNvY2tldCwgYXJncyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy9wdWJsaWNcclxuICAgICAgICByZXR1cm57XHJcbiAgICAgICAgICAgIG9uOiBvbixcclxuICAgICAgICAgICAgZW1pdDogZW1pdCxcclxuICAgICAgICAgICAgc29ja2V0OiBzb2NrZXRcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmZhY3RvcnkoXCJzb2NrZXRTZXJ2aWNlXCIsIFtcIiRyb290U2NvcGVcIiwgc29ja2V0U2VydmljZV0pO1xyXG5cclxufSkoKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
