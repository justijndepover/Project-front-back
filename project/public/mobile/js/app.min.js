!function(){angular.module("app",[])}(),function(){var t=function(t,e,n){t.LCShow=n.getLCShow,e.on("startGame",function(t){console.log("start game")}),e.on("roomDisconnect",function(t){}),t.joinRoom=function(t,n){var o={};o.username=t,o.room=n.toUpperCase(),e.emit("gsmConnect",o)},e.on("message",function(e){switch(e){case"connectionEstablished":n.setPCShow(!0),n.setLCShow(!1);break;case"connectionRefused":t.text="Something went wrong";break;case"usernameExist":t.text="Username already exist";break;case"roomFull":t.text="Room is already full."}})};angular.module("app").controller("loginController",["$scope","socketService","displayService",t])}(),function(){"use strict";var t=function(t,e,n,o,a){t.PCShow=a.getPCShow,t.showSettings=a.getSettingShow,t.startGame=!1,t.Settings=function(){var t=document.getElementsByClassName("btnSettings")[0].children[0];"rotate"==t.className.animVal?(a.setSettingShow(!1),t.setAttribute("class","rotateAnti")):(a.setSettingShow(!0),t.setAttribute("class","rotate"))},t.shoot=function(){n.emit("playerShot",null)};var i=function(t){var e={};e.beta=t.beta,n.emit("deviceOrientation",e)};o.subscribeMe(),e.$on("app.deviceorientationEvent",function(t,e){i(e)}),t.leaveRoom=function(){n.emit("gsmDisconnect",null),a.setLCShow(!0),a.setPCShow(!1)},n.on("message",function(e){console.log(e),"connectionEstablished"==e?(t.text="Waiting on other players",t.startGame=!1):"startGame"==e&&(t.startGame=!0)})};angular.module("app").controller("playController",["$scope","$rootScope","socketService","eventService","displayService",t])}(),function(){var t=function(){var t=!0,e=!1,n=!1;return{getLCShow:function(){return t},setLCShow:function(e){t=e},getPCShow:function(){return e},setPCShow:function(t){e=t},getSettingShow:function(){return n},setSettingShow:function(t){n=t}}};angular.module("app").factory("displayService",[t])}(),function(){var t=function(t,e){function n(){e.addEventListener("deviceorientation",function(e){t.$broadcast("app.deviceorientationEvent",e)})}return{subscribeMe:n}};angular.module("app").factory("eventService",["$rootScope","$window",t])}(),function(){var t=function(t){"use strict";var e=io.connect(window.location.host),n=function(n,o){e.on(n,function(){var n=arguments;t.$apply(function(){o.apply(e,n)})})},o=function(n,o,a){e.emit(n,o,function(){var n=arguments;t.$apply(function(){a&&a.apply(e,n)})})};return{on:n,emit:o,socket:e}};angular.module("app").factory("socketService",["$rootScope",t])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNvbnRyb2xsZXIvbG9naW5Db250cm9sbGVyLmpzIiwiY29udHJvbGxlci9wbGF5Q29udHJvbGxlci5qcyIsInNlcnZpY2VzL2Rpc3BsYXlTZXJ2aWNlLmpzIiwic2VydmljZXMvZXZlbnRTZXJ2aWNlLmpzIiwic2VydmljZXMvc29ja2V0U2VydmljZS5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwibG9naW5Db250cm9sbGVyIiwiJHNjb3BlIiwic29ja2V0U2VydmljZSIsImRpc3BsYXlTZXJ2aWNlIiwiTENTaG93IiwiZ2V0TENTaG93Iiwib24iLCJkYXRhIiwiY29uc29sZSIsImxvZyIsImpvaW5Sb29tIiwidXNlcm5hbWUiLCJyb29tIiwidG9VcHBlckNhc2UiLCJlbWl0IiwibWVzc2FnZSIsInNldFBDU2hvdyIsInNldExDU2hvdyIsInRleHQiLCJjb250cm9sbGVyIiwicGxheUNvbnRyb2xsZXIiLCIkcm9vdFNjb3BlIiwiZXZlbnRTZXJ2aWNlIiwiUENTaG93IiwiZ2V0UENTaG93Iiwic2hvd1NldHRpbmdzIiwiZ2V0U2V0dGluZ1Nob3ciLCJzdGFydEdhbWUiLCJTZXR0aW5ncyIsImJ0biIsImRvY3VtZW50IiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImNoaWxkcmVuIiwiY2xhc3NOYW1lIiwiYW5pbVZhbCIsInNldFNldHRpbmdTaG93Iiwic2V0QXR0cmlidXRlIiwic2hvb3QiLCJzZW5kRGV2aWNlT3JpZW50YXRpb24iLCJldmVudERhdGEiLCJiZXRhIiwic3Vic2NyaWJlTWUiLCIkb24iLCJhIiwiYiIsImxlYXZlUm9vbSIsIlNldHRpbmdTaG93IiwidmFsdWUiLCJmYWN0b3J5IiwiJHdpbmRvdyIsInN1YnNGdW5jIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCIkYnJvYWRjYXN0Iiwic29ja2V0IiwiaW8iLCJjb25uZWN0Iiwid2luZG93IiwibG9jYXRpb24iLCJob3N0IiwiZXZlbnROYW1lIiwiY2FsbGJh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QUVBLElBQUFpQyxHQUFBQyxHQUFBQyxRQUFBQyxPQUFBQyxTQUFBQyxNQUVBckQsRUFBQSxTQUFBc0QsRUFBQUMsR0FDQVAsRUFBQWhELEdBQUFzRCxFQUFBLFdBQ0EsR0FBQUUsR0FBQUMsU0FDQTFDLEdBQUEyQyxPQUFBLFdBQ0FILEVBQUFJLE1BQUFYLEVBQUFRLFFBS0FoRCxFQUFBLFNBQUE4QyxFQUFBckQsRUFBQXNELEdBQ0FQLEVBQUF4QyxLQUFBOEMsRUFBQXJELEVBQUEsV0FDQSxHQUFBdUQsR0FBQUMsU0FDQTFDLEdBQUEyQyxPQUFBLFdBQ0FILEdBQ0FBLEVBQUFJLE1BQUFYLEVBQUFRLE9BT0EsUUFDQXhELEdBQUFBLEVBQ0FRLEtBQUFBLEVBQ0F3QyxPQUFBQSxHQUlBeEQsU0FBQUMsT0FBQSxPQUFBaUQsUUFBQSxpQkFBQSxhQUFBOUMiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ3JlYXRlZCBieSBNaWNoaWVsIG9uIDI1LzExLzIwMTUuXG4gKi9cbihmdW5jdGlvbigpe1xuXG4gICAgdmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIsW10pO1xufSkoKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkganVzdGlqbmRlcG92ZXIgb24gMTYvMTIvMTUuXG4gKi9cblxuXG4oZnVuY3Rpb24oKXtcblxuICAgIHZhciBsb2dpbkNvbnRyb2xsZXIgPSBmdW5jdGlvbigkc2NvcGUsIHNvY2tldFNlcnZpY2UsIGRpc3BsYXlTZXJ2aWNlKXtcbiAgICAgICAgJHNjb3BlLkxDU2hvdyA9IGRpc3BsYXlTZXJ2aWNlLmdldExDU2hvdztcbiAgICAgICAgLy9mdW5jdGlvbnNcbiAgICAgICAgc29ja2V0U2VydmljZS5vbihcInN0YXJ0R2FtZVwiLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJzdGFydCBnYW1lXCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgc29ja2V0U2VydmljZS5vbihcInJvb21EaXNjb25uZWN0XCIsIGZ1bmN0aW9uIChkYXRhKSB7XG5cbiAgICAgICAgfSk7XG5cbiAgICAgICAgJHNjb3BlLmpvaW5Sb29tID0gZnVuY3Rpb24odXNlcm5hbWUsIHJvb20pe1xuICAgICAgICAgICAgdmFyIGRhdGEgPSB7fTtcbiAgICAgICAgICAgIGRhdGEudXNlcm5hbWUgPSB1c2VybmFtZTtcbiAgICAgICAgICAgIGRhdGEucm9vbSA9IHJvb20udG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgIHNvY2tldFNlcnZpY2UuZW1pdChcImdzbUNvbm5lY3RcIiwgZGF0YSk7XG5cbiAgICAgICAgfTtcblxuICAgICAgICBzb2NrZXRTZXJ2aWNlLm9uKFwibWVzc2FnZVwiLCBmdW5jdGlvbihtZXNzYWdlKXtcbiAgICAgICAgICAgIHN3aXRjaChtZXNzYWdlKXtcbiAgICAgICAgICAgICAgICBjYXNlIFwiY29ubmVjdGlvbkVzdGFibGlzaGVkXCI6XG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlTZXJ2aWNlLnNldFBDU2hvdyh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheVNlcnZpY2Uuc2V0TENTaG93KGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcImNvbm5lY3Rpb25SZWZ1c2VkXCI6XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS50ZXh0ID0gXCJTb21ldGhpbmcgd2VudCB3cm9uZ1wiO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwidXNlcm5hbWVFeGlzdFwiOlxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudGV4dCA9IFwiVXNlcm5hbWUgYWxyZWFkeSBleGlzdFwiO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwicm9vbUZ1bGxcIiA6XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS50ZXh0ID0gXCJSb29tIGlzIGFscmVhZHkgZnVsbC5cIjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdCA6XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJhcHBcIikuY29udHJvbGxlcihcImxvZ2luQ29udHJvbGxlclwiLCBbXCIkc2NvcGVcIiwgXCJzb2NrZXRTZXJ2aWNlXCIsIFwiZGlzcGxheVNlcnZpY2VcIiwgbG9naW5Db250cm9sbGVyXSk7XG59KSgpOyIsIi8qKlxuICogQ3JlYXRlZCBieSBqdXN0aWpuZGVwb3ZlciBvbiAxNi8xMi8xNS5cbiAqL1xuXG5cbihmdW5jdGlvbigpe1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIHZhciBwbGF5Q29udHJvbGxlciA9IGZ1bmN0aW9uKCRzY29wZSwgJHJvb3RTY29wZSwgc29ja2V0U2VydmljZSwgZXZlbnRTZXJ2aWNlLCBkaXNwbGF5U2VydmljZSl7XG4gICAgICAgICRzY29wZS5QQ1Nob3cgPSBkaXNwbGF5U2VydmljZS5nZXRQQ1Nob3c7XG4gICAgICAgICRzY29wZS5zaG93U2V0dGluZ3MgPSBkaXNwbGF5U2VydmljZS5nZXRTZXR0aW5nU2hvdztcbiAgICAgICAgJHNjb3BlLnN0YXJ0R2FtZSA9IGZhbHNlO1xuICAgICAgICAkc2NvcGUuU2V0dGluZ3MgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgdmFyIGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2J0blNldHRpbmdzJylbMF0uY2hpbGRyZW5bMF07XG4gICAgICAgICAgICBpZihidG4uY2xhc3NOYW1lLmFuaW1WYWwgPT0gXCJyb3RhdGVcIil7XG4gICAgICAgICAgICAgICAgZGlzcGxheVNlcnZpY2Uuc2V0U2V0dGluZ1Nob3coZmFsc2UpO1xuICAgICAgICAgICAgICAgIGJ0bi5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3JvdGF0ZUFudGknKTtcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIGRpc3BsYXlTZXJ2aWNlLnNldFNldHRpbmdTaG93KHRydWUpO1xuICAgICAgICAgICAgICAgIGJ0bi5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3JvdGF0ZScpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH07XG4gICAgICAgICRzY29wZS5zaG9vdCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBzb2NrZXRTZXJ2aWNlLmVtaXQoXCJwbGF5ZXJTaG90XCIsIG51bGwpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBzZW5kRGV2aWNlT3JpZW50YXRpb24gPSBmdW5jdGlvbihldmVudERhdGEpe1xuICAgICAgICAgICAgdmFyIGRhdGEgPSB7fTtcbiAgICAgICAgICAgIC8vZGF0YS5nYW1tYSA9IGV2ZW50RGF0YS5nYW1tYTtcbiAgICAgICAgICAgIGRhdGEuYmV0YSA9IGV2ZW50RGF0YS5iZXRhO1xuICAgICAgICAgICAgLy9kYXRhLmFscGhhID0gZXZlbnREYXRhLmFscGhhO1xuICAgICAgICAgICAgc29ja2V0U2VydmljZS5lbWl0KFwiZGV2aWNlT3JpZW50YXRpb25cIiwgZGF0YSlcbiAgICAgICAgfTtcbiAgICAgICAgZXZlbnRTZXJ2aWNlLnN1YnNjcmliZU1lKCk7XG4gICAgICAgICRyb290U2NvcGUuJG9uKCdhcHAuZGV2aWNlb3JpZW50YXRpb25FdmVudCcsIGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgICAgICAgIHNlbmREZXZpY2VPcmllbnRhdGlvbihiKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJHNjb3BlLmxlYXZlUm9vbSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBzb2NrZXRTZXJ2aWNlLmVtaXQoXCJnc21EaXNjb25uZWN0XCIsIG51bGwpO1xuICAgICAgICAgICAgZGlzcGxheVNlcnZpY2Uuc2V0TENTaG93KHRydWUpO1xuICAgICAgICAgICAgZGlzcGxheVNlcnZpY2Uuc2V0UENTaG93KGZhbHNlKTtcbiAgICAgICAgfTtcblxuICAgICAgICBzb2NrZXRTZXJ2aWNlLm9uKFwibWVzc2FnZVwiLCBmdW5jdGlvbihtZXNzYWdlKXtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UpO1xuICAgICAgICAgICAgaWYobWVzc2FnZSA9PSBcImNvbm5lY3Rpb25Fc3RhYmxpc2hlZFwiKXtcbiAgICAgICAgICAgICAgICAkc2NvcGUudGV4dCA9IFwiV2FpdGluZyBvbiBvdGhlciBwbGF5ZXJzXCI7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnN0YXJ0R2FtZSA9IGZhbHNlO1xuICAgICAgICAgICAgfWVsc2UgaWYobWVzc2FnZSA9PSBcInN0YXJ0R2FtZVwiKXtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc3RhcnRHYW1lID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmNvbnRyb2xsZXIoXCJwbGF5Q29udHJvbGxlclwiLCBbXCIkc2NvcGVcIiwgXCIkcm9vdFNjb3BlXCIsIFwic29ja2V0U2VydmljZVwiLCBcImV2ZW50U2VydmljZVwiLCBcImRpc3BsYXlTZXJ2aWNlXCIsIHBsYXlDb250cm9sbGVyXSlcbn0pKCk7IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGp1c3Rpam5kZXBvdmVyIG9uIDE2LzEyLzE1LlxuICovXG5cblxuKGZ1bmN0aW9uKCl7XG4gICAgdmFyIGRpc3BsYXlTZXJ2aWNlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgLy9Mb2dpbiBDb250cm9sbGVyXG4gICAgICAgIHZhciBMQ1Nob3cgPSB0cnVlO1xuICAgICAgICAvL1BsYXkgY29udHJvbGxlclxuICAgICAgICB2YXIgUENTaG93ID0gZmFsc2U7XG5cbiAgICAgICAgdmFyIFNldHRpbmdTaG93ID0gZmFsc2U7XG5cbiAgICAgICAgcmV0dXJue1xuICAgICAgICAgICAgZ2V0TENTaG93OiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIHJldHVybiBMQ1Nob3c7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0TENTaG93OiBmdW5jdGlvbih2YWx1ZSl7XG4gICAgICAgICAgICAgICAgTENTaG93ID0gdmFsdWU7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0UENTaG93OiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIHJldHVybiBQQ1Nob3c7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0UENTaG93OiBmdW5jdGlvbih2YWx1ZSl7XG4gICAgICAgICAgICAgICAgUENTaG93ID0gdmFsdWU7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0U2V0dGluZ1Nob3c6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFNldHRpbmdTaG93O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldFNldHRpbmdTaG93OiBmdW5jdGlvbih2YWx1ZSl7XG4gICAgICAgICAgICAgICAgU2V0dGluZ1Nob3cgPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgfTtcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5mYWN0b3J5KCdkaXNwbGF5U2VydmljZScsIFtkaXNwbGF5U2VydmljZV0pO1xufSkoKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgTWljaGllbCBvbiAxNi8xMi8yMDE1LlxuICovXG4oZnVuY3Rpb24oKXtcbiAgICB2YXIgZXZlbnRTZXJ2aWNlID0gZnVuY3Rpb24oJHJvb3RTY29wZSwkd2luZG93KXtcbiAgICAgICAgZnVuY3Rpb24gc3Vic0Z1bmMoKSB7XG4gICAgICAgICAgICAkd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2RldmljZW9yaWVudGF0aW9uJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnYXBwLmRldmljZW9yaWVudGF0aW9uRXZlbnQnLCBlKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgXCJzdWJzY3JpYmVNZVwiOiBzdWJzRnVuY1xuICAgICAgICB9XG4gICAgfTtcbiAgICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5mYWN0b3J5KFwiZXZlbnRTZXJ2aWNlXCIsIFtcIiRyb290U2NvcGVcIixcIiR3aW5kb3dcIiwgZXZlbnRTZXJ2aWNlXSk7XG59KSgpOyIsIi8qKlxuICogQ3JlYXRlZCBieSBqdXN0aWpuZGVwb3ZlciBvbiAwOS8xMi8xNS5cbiAqL1xuXG4oZnVuY3Rpb24oKXtcblxuICAgIHZhciBzb2NrZXRTZXJ2aWNlID0gZnVuY3Rpb24oJHJvb3RTY29wZSl7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICAvL3ByaXZhdGVcbiAgICAgICAgdmFyIHNvY2tldCA9IGlvLmNvbm5lY3Qod2luZG93LmxvY2F0aW9uLmhvc3QpO1xuICAgICAgICAvL2Z1bmN0aW9uc1xuICAgICAgICB2YXIgb24gPSBmdW5jdGlvbiAoZXZlbnROYW1lLCBjYWxsYmFjaykge1xuICAgICAgICAgICAgc29ja2V0Lm9uKGV2ZW50TmFtZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkoc29ja2V0LCBhcmdzKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBlbWl0ID0gZnVuY3Rpb24gKGV2ZW50TmFtZSwgZGF0YSwgY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHNvY2tldC5lbWl0KGV2ZW50TmFtZSwgZGF0YSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5hcHBseShzb2NrZXQsIGFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vcHVibGljXG4gICAgICAgIHJldHVybntcbiAgICAgICAgICAgIG9uOiBvbixcbiAgICAgICAgICAgIGVtaXQ6IGVtaXQsXG4gICAgICAgICAgICBzb2NrZXQ6IHNvY2tldFxuICAgICAgICB9XG4gICAgfTtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmZhY3RvcnkoXCJzb2NrZXRTZXJ2aWNlXCIsIFtcIiRyb290U2NvcGVcIiwgc29ja2V0U2VydmljZV0pO1xuXG59KSgpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
