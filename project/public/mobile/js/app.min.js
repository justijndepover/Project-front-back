!function(){angular.module("app",[])}(),function(){var t=function(t,e,n){t.LCShow=n.getLCShow,e.on("startGame",function(t){console.log("start game")}),e.on("roomDisconnect",function(t){n.setPCShow(!1),n.setLCShow(!0)}),t.joinRoom=function(t,n){var o={};o.username=t,o.room=n.toUpperCase(),e.emit("gsmConnect",o)},e.on("message",function(e){switch(e){case"connectionEstablished":n.setPCShow(!0),n.setLCShow(!1);break;case"connectionRefused":t.text="Something went wrong";break;case"usernameExist":t.text="Username already exist";break;case"roomFull":t.text="Room is already full."}})};angular.module("app").controller("loginController",["$scope","socketService","displayService",t])}(),function(){"use strict";var t=function(t,e,n,o,i){t.PCShow=i.getPCShow,t.showSettings=i.getSettingShow,t.startGame=!1,t.Settings=function(){var t=document.getElementsByClassName("btnSettings")[0].children[0];1==t.classList.contains("rotate")?(i.setSettingShow(!1),t.setAttribute("class","rotateAnti")):(i.setSettingShow(!0),t.setAttribute("class","rotate"))},t.shoot=function(){n.emit("playerShot",null)};var a=function(t){var e={};e.beta=t.beta,n.emit("deviceOrientation",e)};o.subscribeMe(),e.$on("app.deviceorientationEvent",function(t,e){a(e)}),t.leaveRoom=function(){n.emit("gsmDisconnect",null),i.setLCShow(!0),i.setPCShow(!1),i.setSettingShow(!1)},n.on("message",function(e){console.log(e),"connectionEstablished"==e?(t.text="Waiting on other players",t.startGame=!1):"startGame"==e&&(t.startGame=!0)})};angular.module("app").controller("playController",["$scope","$rootScope","socketService","eventService","displayService",t])}(),function(){var t=function(){var t=!0,e=!1,n=!1;return{getLCShow:function(){return t},setLCShow:function(e){t=e},getPCShow:function(){return e},setPCShow:function(t){e=t},getSettingShow:function(){return n},setSettingShow:function(t){n=t}}};angular.module("app").factory("displayService",[t])}(),function(){var t=function(t,e){function n(){e.addEventListener("deviceorientation",function(e){t.$broadcast("app.deviceorientationEvent",e)})}return{subscribeMe:n}};angular.module("app").factory("eventService",["$rootScope","$window",t])}(),function(){var t=function(t){"use strict";var e=io.connect(window.location.host),n=function(n,o){e.on(n,function(){var n=arguments;t.$apply(function(){o.apply(e,n)})})},o=function(n,o,i){e.emit(n,o,function(){var n=arguments;t.$apply(function(){i&&i.apply(e,n)})})};return{on:n,emit:o,socket:e}};angular.module("app").factory("socketService",["$rootScope",t])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNvbnRyb2xsZXIvbG9naW5Db250cm9sbGVyLmpzIiwiY29udHJvbGxlci9wbGF5Q29udHJvbGxlci5qcyIsInNlcnZpY2VzL2Rpc3BsYXlTZXJ2aWNlLmpzIiwic2VydmljZXMvZXZlbnRTZXJ2aWNlLmpzIiwic2VydmljZXMvc29ja2V0U2VydmljZS5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwibG9naW5Db250cm9sbGVyIiwiJHNjb3BlIiwic29ja2V0U2VydmljZSIsImRpc3BsYXlTZXJ2aWNlIiwiTENTaG93IiwiZ2V0TENTaG93Iiwib24iLCJkYXRhIiwiY29uc29sZSIsImxvZyIsInNldFBDU2hvdyIsInNldExDU2hvdyIsImpvaW5Sb29tIiwidXNlcm5hbWUiLCJyb29tIiwidG9VcHBlckNhc2UiLCJlbWl0IiwibWVzc2FnZSIsInRleHQiLCJjb250cm9sbGVyIiwicGxheUNvbnRyb2xsZXIiLCIkcm9vdFNjb3BlIiwiZXZlbnRTZXJ2aWNlIiwiUENTaG93IiwiZ2V0UENTaG93Iiwic2hvd1NldHRpbmdzIiwiZ2V0U2V0dGluZ1Nob3ciLCJzdGFydEdhbWUiLCJTZXR0aW5ncyIsImJ0biIsImRvY3VtZW50IiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImNoaWxkcmVuIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJzZXRTZXR0aW5nU2hvdyIsInNldEF0dHJpYnV0ZSIsInNob290Iiwic2VuZERldmljZU9yaWVudGF0aW9uIiwiZXZlbnREYXRhIiwiYmV0YSIsInN1YnNjcmliZU1lIiwiJG9uIiwiYSIsImIiLCJsZWF2ZVJvb20iLCJTZXR0aW5nU2hvdyIsInZhbHVlIiwiZmFjdG9yeSIsIiR3aW5kb3ciLCJzdWJzRnVuYyIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiJGJyb2FkY2FzdCIsInNvY2tldCIsImlvIiwiY29ubmVjdCIsIndpbmRvdyIsImxvY2F0aW9uIiwiaG9zdCIsImV2ZW50TmFtZSIsImNhbGxi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aUQsUUFBQSxnQkFBQSxhQUFBLFVBQUExQixPQ1hBLFdBRUEsR0FBQXBCLEdBQUEsU0FBQW1CLEdBQ0EsWUFFQSxJQUFBaUMsR0FBQUMsR0FBQUMsUUFBQUMsT0FBQUMsU0FBQUMsTUFFQXJELEVBQUEsU0FBQXNELEVBQUFDLEdBQ0FQLEVBQUFoRCxHQUFBc0QsRUFBQSxXQUNBLEdBQUFFLEdBQUFDLFNBQ0ExQyxHQUFBMkMsT0FBQSxXQUNBSCxFQUFBSSxNQUFBWCxFQUFBUSxRQUtBOUMsRUFBQSxTQUFBNEMsRUFBQXJELEVBQUFzRCxHQUNBUCxFQUFBdEMsS0FBQTRDLEVBQUFyRCxFQUFBLFdBQ0EsR0FBQXVELEdBQUFDLFNBQ0ExQyxHQUFBMkMsT0FBQSxXQUNBSCxHQUNBQSxFQUFBSSxNQUFBWCxFQUFBUSxPQU9BLFFBQ0F4RCxHQUFBQSxFQUNBVSxLQUFBQSxFQUNBc0MsT0FBQUEsR0FJQXhELFNBQUFDLE9BQUEsT0FBQWlELFFBQUEsaUJBQUEsYUFBQTlDIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENyZWF0ZWQgYnkgTWljaGllbCBvbiAyNS8xMS8yMDE1LlxuICovXG4oZnVuY3Rpb24oKXtcblxuICAgIHZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZShcImFwcFwiLFtdKTtcbn0pKCk7IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGp1c3Rpam5kZXBvdmVyIG9uIDE2LzEyLzE1LlxuICovXG5cblxuKGZ1bmN0aW9uKCl7XG5cbiAgICB2YXIgbG9naW5Db250cm9sbGVyID0gZnVuY3Rpb24oJHNjb3BlLCBzb2NrZXRTZXJ2aWNlLCBkaXNwbGF5U2VydmljZSl7XG4gICAgICAgICRzY29wZS5MQ1Nob3cgPSBkaXNwbGF5U2VydmljZS5nZXRMQ1Nob3c7XG4gICAgICAgIC8vZnVuY3Rpb25zXG4gICAgICAgIHNvY2tldFNlcnZpY2Uub24oXCJzdGFydEdhbWVcIiwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwic3RhcnQgZ2FtZVwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHNvY2tldFNlcnZpY2Uub24oXCJyb29tRGlzY29ubmVjdFwiLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgZGlzcGxheVNlcnZpY2Uuc2V0UENTaG93KGZhbHNlKTtcbiAgICAgICAgICAgIGRpc3BsYXlTZXJ2aWNlLnNldExDU2hvdyh0cnVlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJHNjb3BlLmpvaW5Sb29tID0gZnVuY3Rpb24odXNlcm5hbWUsIHJvb20pe1xuICAgICAgICAgICAgdmFyIGRhdGEgPSB7fTtcbiAgICAgICAgICAgIGRhdGEudXNlcm5hbWUgPSB1c2VybmFtZTtcbiAgICAgICAgICAgIGRhdGEucm9vbSA9IHJvb20udG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgIHNvY2tldFNlcnZpY2UuZW1pdChcImdzbUNvbm5lY3RcIiwgZGF0YSk7XG5cbiAgICAgICAgfTtcblxuICAgICAgICBzb2NrZXRTZXJ2aWNlLm9uKFwibWVzc2FnZVwiLCBmdW5jdGlvbihtZXNzYWdlKXtcbiAgICAgICAgICAgIHN3aXRjaChtZXNzYWdlKXtcbiAgICAgICAgICAgICAgICBjYXNlIFwiY29ubmVjdGlvbkVzdGFibGlzaGVkXCI6XG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlTZXJ2aWNlLnNldFBDU2hvdyh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheVNlcnZpY2Uuc2V0TENTaG93KGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcImNvbm5lY3Rpb25SZWZ1c2VkXCI6XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS50ZXh0ID0gXCJTb21ldGhpbmcgd2VudCB3cm9uZ1wiO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwidXNlcm5hbWVFeGlzdFwiOlxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudGV4dCA9IFwiVXNlcm5hbWUgYWxyZWFkeSBleGlzdFwiO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwicm9vbUZ1bGxcIiA6XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS50ZXh0ID0gXCJSb29tIGlzIGFscmVhZHkgZnVsbC5cIjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdCA6XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJhcHBcIikuY29udHJvbGxlcihcImxvZ2luQ29udHJvbGxlclwiLCBbXCIkc2NvcGVcIiwgXCJzb2NrZXRTZXJ2aWNlXCIsIFwiZGlzcGxheVNlcnZpY2VcIiwgbG9naW5Db250cm9sbGVyXSk7XG59KSgpOyIsIi8qKlxuICogQ3JlYXRlZCBieSBqdXN0aWpuZGVwb3ZlciBvbiAxNi8xMi8xNS5cbiAqL1xuXG5cbihmdW5jdGlvbigpe1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIHZhciBwbGF5Q29udHJvbGxlciA9IGZ1bmN0aW9uKCRzY29wZSwgJHJvb3RTY29wZSwgc29ja2V0U2VydmljZSwgZXZlbnRTZXJ2aWNlLCBkaXNwbGF5U2VydmljZSl7XG4gICAgICAgICRzY29wZS5QQ1Nob3cgPSBkaXNwbGF5U2VydmljZS5nZXRQQ1Nob3c7XG4gICAgICAgICRzY29wZS5zaG93U2V0dGluZ3MgPSBkaXNwbGF5U2VydmljZS5nZXRTZXR0aW5nU2hvdztcbiAgICAgICAgJHNjb3BlLnN0YXJ0R2FtZSA9IGZhbHNlO1xuICAgICAgICAkc2NvcGUuU2V0dGluZ3MgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgdmFyIGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2J0blNldHRpbmdzJylbMF0uY2hpbGRyZW5bMF07XG4gICAgICAgICAgICBpZihidG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdyb3RhdGUnKT09dHJ1ZSl7XG4gICAgICAgICAgICAgICAgZGlzcGxheVNlcnZpY2Uuc2V0U2V0dGluZ1Nob3coZmFsc2UpO1xuICAgICAgICAgICAgICAgIGJ0bi5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3JvdGF0ZUFudGknKTtcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIGRpc3BsYXlTZXJ2aWNlLnNldFNldHRpbmdTaG93KHRydWUpO1xuICAgICAgICAgICAgICAgIGJ0bi5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3JvdGF0ZScpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH07XG4gICAgICAgICRzY29wZS5zaG9vdCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBzb2NrZXRTZXJ2aWNlLmVtaXQoXCJwbGF5ZXJTaG90XCIsIG51bGwpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBzZW5kRGV2aWNlT3JpZW50YXRpb24gPSBmdW5jdGlvbihldmVudERhdGEpe1xuICAgICAgICAgICAgdmFyIGRhdGEgPSB7fTtcbiAgICAgICAgICAgIC8vZGF0YS5nYW1tYSA9IGV2ZW50RGF0YS5nYW1tYTtcbiAgICAgICAgICAgIGRhdGEuYmV0YSA9IGV2ZW50RGF0YS5iZXRhO1xuICAgICAgICAgICAgLy9kYXRhLmFscGhhID0gZXZlbnREYXRhLmFscGhhO1xuICAgICAgICAgICAgc29ja2V0U2VydmljZS5lbWl0KFwiZGV2aWNlT3JpZW50YXRpb25cIiwgZGF0YSlcbiAgICAgICAgfTtcbiAgICAgICAgZXZlbnRTZXJ2aWNlLnN1YnNjcmliZU1lKCk7XG4gICAgICAgICRyb290U2NvcGUuJG9uKCdhcHAuZGV2aWNlb3JpZW50YXRpb25FdmVudCcsIGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgICAgICAgIHNlbmREZXZpY2VPcmllbnRhdGlvbihiKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJHNjb3BlLmxlYXZlUm9vbSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBzb2NrZXRTZXJ2aWNlLmVtaXQoXCJnc21EaXNjb25uZWN0XCIsIG51bGwpO1xuICAgICAgICAgICAgZGlzcGxheVNlcnZpY2Uuc2V0TENTaG93KHRydWUpO1xuICAgICAgICAgICAgZGlzcGxheVNlcnZpY2Uuc2V0UENTaG93KGZhbHNlKTtcbiAgICAgICAgICAgIGRpc3BsYXlTZXJ2aWNlLnNldFNldHRpbmdTaG93KGZhbHNlKTtcbiAgICAgICAgfTtcblxuICAgICAgICBzb2NrZXRTZXJ2aWNlLm9uKFwibWVzc2FnZVwiLCBmdW5jdGlvbihtZXNzYWdlKXtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UpO1xuICAgICAgICAgICAgaWYobWVzc2FnZSA9PSBcImNvbm5lY3Rpb25Fc3RhYmxpc2hlZFwiKXtcbiAgICAgICAgICAgICAgICAkc2NvcGUudGV4dCA9IFwiV2FpdGluZyBvbiBvdGhlciBwbGF5ZXJzXCI7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnN0YXJ0R2FtZSA9IGZhbHNlO1xuICAgICAgICAgICAgfWVsc2UgaWYobWVzc2FnZSA9PSBcInN0YXJ0R2FtZVwiKXtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc3RhcnRHYW1lID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmNvbnRyb2xsZXIoXCJwbGF5Q29udHJvbGxlclwiLCBbXCIkc2NvcGVcIiwgXCIkcm9vdFNjb3BlXCIsIFwic29ja2V0U2VydmljZVwiLCBcImV2ZW50U2VydmljZVwiLCBcImRpc3BsYXlTZXJ2aWNlXCIsIHBsYXlDb250cm9sbGVyXSlcbn0pKCk7IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGp1c3Rpam5kZXBvdmVyIG9uIDE2LzEyLzE1LlxuICovXG5cblxuKGZ1bmN0aW9uKCl7XG4gICAgdmFyIGRpc3BsYXlTZXJ2aWNlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgLy9Mb2dpbiBDb250cm9sbGVyXG4gICAgICAgIHZhciBMQ1Nob3cgPSB0cnVlO1xuICAgICAgICAvL1BsYXkgY29udHJvbGxlclxuICAgICAgICB2YXIgUENTaG93ID0gZmFsc2U7XG5cbiAgICAgICAgdmFyIFNldHRpbmdTaG93ID0gZmFsc2U7XG5cbiAgICAgICAgcmV0dXJue1xuICAgICAgICAgICAgZ2V0TENTaG93OiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIHJldHVybiBMQ1Nob3c7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0TENTaG93OiBmdW5jdGlvbih2YWx1ZSl7XG4gICAgICAgICAgICAgICAgTENTaG93ID0gdmFsdWU7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0UENTaG93OiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIHJldHVybiBQQ1Nob3c7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0UENTaG93OiBmdW5jdGlvbih2YWx1ZSl7XG4gICAgICAgICAgICAgICAgUENTaG93ID0gdmFsdWU7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0U2V0dGluZ1Nob3c6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFNldHRpbmdTaG93O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldFNldHRpbmdTaG93OiBmdW5jdGlvbih2YWx1ZSl7XG4gICAgICAgICAgICAgICAgU2V0dGluZ1Nob3cgPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgfTtcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5mYWN0b3J5KCdkaXNwbGF5U2VydmljZScsIFtkaXNwbGF5U2VydmljZV0pO1xufSkoKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgTWljaGllbCBvbiAxNi8xMi8yMDE1LlxuICovXG4oZnVuY3Rpb24oKXtcbiAgICB2YXIgZXZlbnRTZXJ2aWNlID0gZnVuY3Rpb24oJHJvb3RTY29wZSwkd2luZG93KXtcbiAgICAgICAgZnVuY3Rpb24gc3Vic0Z1bmMoKSB7XG4gICAgICAgICAgICAkd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2RldmljZW9yaWVudGF0aW9uJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnYXBwLmRldmljZW9yaWVudGF0aW9uRXZlbnQnLCBlKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgXCJzdWJzY3JpYmVNZVwiOiBzdWJzRnVuY1xuICAgICAgICB9XG4gICAgfTtcbiAgICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5mYWN0b3J5KFwiZXZlbnRTZXJ2aWNlXCIsIFtcIiRyb290U2NvcGVcIixcIiR3aW5kb3dcIiwgZXZlbnRTZXJ2aWNlXSk7XG59KSgpOyIsIi8qKlxuICogQ3JlYXRlZCBieSBqdXN0aWpuZGVwb3ZlciBvbiAwOS8xMi8xNS5cbiAqL1xuXG4oZnVuY3Rpb24oKXtcblxuICAgIHZhciBzb2NrZXRTZXJ2aWNlID0gZnVuY3Rpb24oJHJvb3RTY29wZSl7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICAvL3ByaXZhdGVcbiAgICAgICAgdmFyIHNvY2tldCA9IGlvLmNvbm5lY3Qod2luZG93LmxvY2F0aW9uLmhvc3QpO1xuICAgICAgICAvL2Z1bmN0aW9uc1xuICAgICAgICB2YXIgb24gPSBmdW5jdGlvbiAoZXZlbnROYW1lLCBjYWxsYmFjaykge1xuICAgICAgICAgICAgc29ja2V0Lm9uKGV2ZW50TmFtZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkoc29ja2V0LCBhcmdzKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBlbWl0ID0gZnVuY3Rpb24gKGV2ZW50TmFtZSwgZGF0YSwgY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHNvY2tldC5lbWl0KGV2ZW50TmFtZSwgZGF0YSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5hcHBseShzb2NrZXQsIGFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vcHVibGljXG4gICAgICAgIHJldHVybntcbiAgICAgICAgICAgIG9uOiBvbixcbiAgICAgICAgICAgIGVtaXQ6IGVtaXQsXG4gICAgICAgICAgICBzb2NrZXQ6IHNvY2tldFxuICAgICAgICB9XG4gICAgfTtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmZhY3RvcnkoXCJzb2NrZXRTZXJ2aWNlXCIsIFtcIiRyb290U2NvcGVcIiwgc29ja2V0U2VydmljZV0pO1xuXG59KSgpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
