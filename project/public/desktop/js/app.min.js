!function(){angular.module("app",[])}(),function(){var t=function(t,e,a,i){t.LCShow=a.getLCShow;var o=function(){e.emit("pcconnect",null)};t.room="",e.on("requestRoom",function(e){t.room=e}),e.on("deviceOrientation",function(t){var e=(t.username,{});e.gamma=t.gamma,e.beta=t.beta,e.alpha=t.alpha}),t.usernames={},t.checkUserCount=!1,e.on("updateusers",function(e){i.setPlayers(e),t.usernames=e,t.checkUserCount=Object.keys(t.usernames).length<0}),t.startGame=function(){e.emit("startGame",null),a.setLCShow(!1),a.setPCShow(!0)},function(){o()}()};angular.module("app").controller("loginController",["$scope","socketService","displayService","playerService",t])}(),function(){"use strict";var t=function(t,e,a,i,o,r){function n(){var t=Math.floor(100*Math.random());for(var e in w)if(Math.abs(w[e].x-t)<10)return n();return t}function s(){var t=Math.floor(100*Math.random());for(var e in w)if(Math.abs(w[e].y-t)<10)return s();return t}function h(t,e){return e.username==t.userName}function d(){f.clearRect(0,0,u.width,u.height);var t=u.width/100;if(0!=y.length){var e=u.width/100,a=e*y[0].image.height/y[0].image.width;for(var i in y){var o=y[i];o.width=e,o.height=a,0==o.explodeStage?(f.save(),f.translate(o.x*t,o.y*t),f.rotate(o.rotation/180*Math.PI),f.drawImage(o.image,-e/2,-a/2,e,a),f.restore(),y[i].x=Math.cos((o.rotation-90)/180*Math.PI)+o.x,y[i].y=Math.sin((o.rotation-90)/180*Math.PI)+o.y):o.explodeStage<4&&(console.log(o.explosionImage),f.save(),f.translate(o.x*t,o.y*t),f.drawImage(o.explosionImage,-e,-e,2*e,2*e),f.restore())}}if(0!=w.length){var r=u.width/20,n=r*w[0].image.height/w[0].image.width;for(var s in w){var h=w[s];h.width=r,h.height=n,f.save(),f.translate(h.x*t,h.y*t),f.rotate(h.rotation/180*Math.PI),f.drawImage(h.image,-r/2,-n/2,r,n),h.damage>0&&f.drawImage(h.damageImage,-r/2,-n/2,r,n),f.restore(),h.damage<4&&(w[s].x=Math.cos((h.rotation-90)/180*Math.PI)/10*h.speed+h.x,w[s].y=Math.sin((h.rotation-90)/180*Math.PI)/10*h.speed+h.y)}}if(v.length>0)for(var d in v){var m=v[d];if(m.width=u.width/700*m.image.width,m.height=m.width*m.image.height/m.image.width,f.save(),f.translate(m.x*t,m.y*t),f.rotate(m.rotation/180*Math.PI),f.drawImage(m.image,-m.width/2,-m.height/2,m.width,m.height),f.restore(),m.x<-5||m.x>105||m.y<-5||m.y>105){var c=Math.random();.25>c?(v[d].x=-4,v[d].y=Math.floor(100*Math.random()),v[d].rotation=Math.floor(180*Math.random())):.5>c?(v[d].x=Math.floor(100*Math.random()),v[d].y=-4,v[d].rotation=Math.floor(180*Math.random())+90):.75>c?(v[d].x=104,v[d].y=Math.floor(100*Math.random()),v[d].rotation=Math.floor(180*Math.random())+180):(v[d].x=Math.floor(100*Math.random()),v[d].y=104,v[d].rotation=Math.floor(180*Math.random())+270),v[d].setImage(Math.ceil(18*Math.random()))}else v[d].x=Math.cos((m.rotation-90)/180*Math.PI)/30+m.x,v[d].y=Math.sin((m.rotation-90)/180*Math.PI)/30+m.y}l(),g()}function l(){for(var t in y)y[t].x<0||y[t].x>u.width||y[t].y<0||y[t].y>u.height?y.splice(t,1):y[t].explodeStage>0&&(y[t].explodeStage<4?y[t].explode():y.splice(t,1))}function g(){var t=[];for(var e in w){w[e].damage<4&&t.push(w[e]);for(var a in y)if(0==y[a].explodeStage&&y[a].player!=w[e].userName){var o=Math.sqrt(2)/2*(y[a].height/2-y[a].width/2),r=(360-y[a].rotation)/180*Math.PI,n=y[a].x*u.width/100-o*Math.sin(r),s=y[a].y*u.width/100-o*Math.cos(r),h=w[e].x*u.width/100,d=w[e].y*u.width/100,l=Math.sqrt((n-h)*(n-h)+(s-d)*(s-d));if(l<y[a].width/2+w[e].width/2){var g=new Audio("../../assets/Bonus/sfx_lose.ogg");g.play(),w[e].increaseDamage();var c={};c.username=w[e].userName,c.life=3-w[e].damage,i.emit("playerLife",c),y[a].explode()}}for(var p in v){var f=v[p].x*u.width/100,x=v[p].y*u.width/100,h=w[e].x*u.width/100,d=w[e].y*u.width/100,l=Math.sqrt((f-h)*(f-h)+(x-d)*(x-d));if(l<v[p].width/2+w[e].width/2){var g=new Audio("../../assets/Bonus/sfx_lose.ogg");g.play(),w[e].dead();var c={};c.username=w[e].userName,c.life=3-w[e].damage,i.emit("playerLife",c)}}for(var p in w)if(p!=e){var M=w[p].x*u.width/100,S=w[p].y*u.width/100,h=w[e].x*u.width/100,d=w[e].y*u.width/100,l=Math.sqrt((M-h)*(M-h)+(S-d)*(S-d));if(l<w[p].width/2+w[e].width/2){var g=new Audio("../../assets/Bonus/sfx_lose.ogg");g.play(),w[e].dead(),w[p].dead();var c={};c.username=w[e].userName,c.life=3-w[e].damage,i.emit("playerLife",c),c.username=w[p].userName,c.life=3-w[p].damage,i.emit("playerLife",c)}}if(w[e].x*u.width/100<w[e].height/2||w[e].x*u.width/100>u.width-w[e].height/2||w[e].y*u.width/100<w[e].height/2||w[e].y*u.width/100>u.width-w[e].height/2){var g=new Audio("../../assets/Bonus/sfx_lose.ogg");g.play(),w[e].dead();var c={};c.username=w[e].userName,c.life=3-w[e].damage,i.emit("playerLife",c)}}for(var p in v)for(var a in y)if(0==y[a].explodeStage&&y[a].player!=v[p].userName){var o=Math.sqrt(2)/2*(y[a].height/2-y[a].width/2),r=(360-y[a].rotation)/180*Math.PI,n=y[a].x*u.width/100-o*Math.sin(r),s=y[a].y*u.width/100-o*Math.cos(r),f=v[p].x*u.width/100,x=v[p].y*u.width/100,l=Math.sqrt((n-f)*(n-f)+(s-x)*(s-x));if(l<y[a].width/2+v[p].width/2){var g=new Audio("../../assets/Bonus/sfx_lose.ogg");g.play();var c={};c.username=v[p].userName,c.life=3-v[p].damage,i.emit("playerLife",c),y[a].explode()}}1==t.length&&m(t)}function m(a){angular.isDefined(p)&&(e.cancel(p),p=void 0),t.endGame=!0,t.endGameText=a[0].userName+" is the winner!",i.emit("endGame",a[0].userName)}var c=[{x:10,y:10,rotation:135},{x:90,y:10,rotation:225},{x:90,y:90,rotation:315},{x:10,y:90,rotation:45}];t.PCShow=o.getPCShow,t.endGame=!1;var p,u=document.getElementById("game"),f=u.getContext("2d"),w=new Array,y=new Array,v=new Array;new Array;i.on("initGame",function(){var t=r.getPlayers(),a=0;for(var i in t){var o=t[i];w.push(new Spaceship(o.username,c[a].x,c[a].y,o.color,c[a].rotation)),a++}for(var h=0;15>h;h++)v.push(new Asteroid(n(),s(),Math.floor(361*Math.random()),Math.ceil(18*Math.random())));p=e(d,10)}),i.on("userleft",function(t){var e=null;for(var a in w)1==h(w[a],t)&&(e=a);w.splice(e,1)}),i.on("updateGameData",function(t){var e=null;for(var a in w)1==h(w[a],t)&&(e=a);null!=e&&w[e].rotateSpaceshipRelative(t.orientation)}),i.on("playerShot",function(e){if(0==t.endGame){var a=null;for(var i in w)1==h(w[i],e)&&(a=i);if(null!=a){var o=w[a],r=(360-(o.rotation+180))/180*Math.PI,n=o.x+u.width/400*Math.sin(r),s=o.y+u.width/400*Math.cos(r);y.push(new Bullet(n,s,o.rotation,o.color,o.userName));var d="../../assets/Bonus/sfx_laser2.ogg";a%2==0&&(d="../../assets/Bonus/sfx_laser1.ogg");var l=new Audio(d);l.play()}}}),t.restartGame=function(){t.endGame=!1;var a=0;for(var o in w)w[o].reset(c[a].x,c[a].y,c[a].rotation),a++;v=[];for(var r=0;15>r;r++)v.push(new Asteroid(n(),s(),Math.floor(361*Math.random()),Math.ceil(18*Math.random())));y=[],f.clearRect(0,0,u.width,u.height),i.emit("restartGame",null),p=e(d,10)}};angular.module("app").controller("playController",["$scope","$interval","$window","socketService","displayService","playerService",t])}(),function(){var t=function(t){function e(e,a,i){t.innerWidth<t.innerHeight?e.width=t.innerWidth-20:e.width=t.innerHeight-20,angular.element(t).bind("resize",function(){t.innerWidth<t.innerHeight?e.width=t.innerWidth-20:e.width=t.innerHeight-20,e.$digest()})}return{restrict:"E",link:e,replace:!0,template:'<canvas id="game" class="playArea" width="{{width}}" height="{{width}}" />'}};angular.module("app").directive("canvasDirective",["$window",t])}();var Asteroid=function(t,e,a,i){this.x=t,this.y=e,this.width=0,this.height=0,this.rotation=a,this.stage=i,this.image=new Image,this.image.src="../assets/PNG/Meteors/meteor_"+i+".png"};Asteroid.prototype.setImage=function(t){this.stage=t,this.image.src="../assets/PNG/Meteors/meteor_"+t+".png"};var Bullet=function(t,e,a,i,o){this.x=t,this.y=e,this.rotation=a,this.image=new Image,this.color=i,this.width=0,this.height=0,this.player=o,this.explosionImage=new Image,this.explodeStage=0,"orange"==this.color&&(this.color="red"),this.image.src="../assets/PNG/Lasers/laser"+this.color.charAt(0).toUpperCase()+this.color.slice(1)+"01.png"};Bullet.prototype.explode=function(){if(this.explodeStage<4){this.explodeStage++;var t;t=this.explodeStage<3?1:2,this.explosionImage.src="../assets/PNG/Lasers/laser"+this.color.charAt(0).toUpperCase()+this.color.slice(1)+"Explode"+t+".png"}else this.explosionImage.src=""};var Spaceship=function(t,e,a,i,o){this.userName=t,this.x=e,this.y=a,this.speed=1,this.color=i,this.rotation=o,this.image=new Image,this.damage=0,this.width=0,this.height=0,this.damageImage=new Image,this.image.src="../assets/PNG/playerShip1_"+this.color+".png"};Spaceship.prototype.reset=function(t,e,a){this.speed=1,this.damage=0,this.damageImage=new Image,this.image.src="../assets/PNG/playerShip1_"+this.color+".png",this.x=t,this.y=e,this.rotation=a},Spaceship.prototype.moveSpaceship=function(t,e){this.x=t,this.y=e},Spaceship.prototype.moveSpaceshipRelative=function(t,e){this.x=this.x+t,this.y=this.y+e},Spaceship.prototype.rotateSpaceship=function(t){this.rotation=t},Spaceship.prototype.rotateSpaceshipRelative=function(t){t>80?t=80:-80>t&&(t=-80),this.rotation=this.rotation+t/5,this.rotation<-360&&(this.rotation=this.rotation+720),this.rotation>360&&(this.rotation=this.rotation-720)},Spaceship.prototype.increaseDamage=function(){this.damage<4&&(this.damage+=1),this.damage<=3&&this.damage>0?this.damageImage.src="../assets/PNG/Damage/playerShip1_damage"+this.damage+".png":4==this.damage&&(this.damageImage.src="../assets/PNG/Damage/explode.gif")},Spaceship.prototype.dead=function(){this.damage=4,this.damageImage.src="../assets/PNG/Damage/explode.gif"},Spaceship.prototype.decreaseDamage=function(){this.damage>0&&(this.damage-=1),this.damage<=3&&this.damage>0&&(this.damageImage.src="../assets/PNG/Damage/playerShip1_damage"+this.damage+".png")},function(){var t=function(){var t=!0,e=!1;return{getLCShow:function(){return t},setLCShow:function(e){t=e},getPCShow:function(){return e},setPCShow:function(t){e=t}}};angular.module("app").factory("displayService",[t])}(),function(){var t=function(){var t=[];return{getPlayers:function(){return t},setPlayers:function(e){t=e}}};angular.module("app").factory("playerService",[t])}(),function(){var t=function(t){"use strict";var e=io.connect(window.location.host),a=function(a,i){e.on(a,function(){var a=arguments;t.$apply(function(){i.apply(e,a)})})},i=function(a,i,o){e.emit(a,i,function(){var a=arguments;t.$apply(function(){o&&o.apply(e,a)})})};return{on:a,emit:i,socket:e}};angular.module("app").factory("socketService",["$rootScope",t])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNvbnRyb2xsZXIvbG9naW5Db250cm9sbGVyLmpzIiwiY29udHJvbGxlci9wbGF5Q29udHJvbGxlci5qcyIsImRpcmVjdGl2ZXMvY2FudmFzRGlyZWN0aXZlLmpzIiwibW9kZWxzL0FzdGVyaW9kLmpzIiwibW9kZWxzL0J1bGxldC5qcyIsIm1vZGVscy9TcGFjZXNoaXAuanMiLCJzZXJ2aWNlcy9kaXNwbGF5U2VydmljZS5qcyIsInNlcnZpY2VzL3BsYXllclNlcnZpY2UuanMiLCJzZXJ2aWNlcy9zb2NrZXRTZXJ2aWNlLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJsb2dpbkNvbnRyb2xsZXIiLCIkc2NvcGUiLCJzb2NrZXRTZXJ2aWNlIiwiZGlzcGxheVNlcnZpY2UiLCJwbGF5ZXJTZXJ2aWNlIiwiTENTaG93IiwiZ2V0TENTaG93IiwibWFrZVJvb20iLCJlbWl0Iiwicm9vbSIsIm9uIiwiZGF0YSIsImRldmljZU9yaWVudGF0aW9uIiwidXNlcm5hbWUiLCJnYW1tYSIsImJldGEiLCJhbHBoYSIsInVzZXJuYW1lcyIsImNoZWNrVXNlckNvdW50Iiwic2V0UGxheWVycyIsIk9iamVjdCIsImtleXMiLCJsZW5ndGgiLCJzdGFydEdhbWUiLCJzZXRMQ1Nob3ciLCJzZXRQQ1Nob3ciLCJjb250cm9sbGVyIiwicGxheUNvbnRyb2xsZXIiLCIkaW50ZXJ2YWwiLCIkd2luZG93IiwiY3JlYXRlQ29vcmRpbmF0ZVgiLCJ4IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwicCIsIkFsbFBsYXllcnMiLCJhYnMiLCJjcmVhdGVDb29yZGluYXRlWSIsInkiLCJmaWx0ZXJQbGF5ZXJzIiwib2JqIiwidXNlck5hbWUiLCJkcmF3IiwiY3R4IiwiY2xlYXJSZWN0IiwiY2FudiIsIndpZHRoIiwiaGVpZ2h0IiwicmF0aW8iLCJBbGxCdWxsZXRzIiwiQnVsbGV0V2lkdGgiLCJCdWxsZXRIZWlnaHQiLCJpbWFnZSIsImJ1bGxldCIsImIiLCJleHBsb2RlU3RhZ2UiLCJzYXZlIiwidHJhbnNsYXRlIiwicm90YXRlIiwicm90YXRpb24iLCJQSSIsImRyYXdJbWFnZSIsInJlc3RvcmUiLCJjb3MiLCJzaW4iLCJjb25zb2xlIiwibG9nIiwiZXhwbG9zaW9uSW1hZ2UiLCJTcGFjZXNoaXBXaWR0aCIsIlNwYWNlc2hpcEhlaWdodCIsInBsYXllciIsImRhbWFnZSIsImRhbWFnZUltYWdlIiwic3BlZWQiLCJBbGxBc3Rlcm9pZHMiLCJBc3Rlcm9pZCIsImEiLCJrZXV6ZSIsInNldEltYWdlIiwiY2VpbCIsImNoZWNrQnVsbGV0cyIsImNvbGxpc2lvbkRldGVjdGlvbiIsInNwbGljZSIsImV4cGxvZGUiLCJsaXZpbmdQbGF5ZXJzIiwicHVzaCIsInJhZGl1cyIsInNxcnQiLCJhbmdsZSIsImJ1bGxldEhlYWRYIiwiYnVsbGV0SGVhZFkiLCJzcGFjZVNoaXBYIiwic3BhY2VTaGlwWSIsImRpc3RhbmNlIiwiZGFtYWdlc291bmQiLCJBdWRpbyIsInBsYXkiLCJpbmNyZWFzZURhbWFnZSIsImxpZmUiLCJhc3Rlcm9pZFgiLCJhc3Rlcm9pZFkiLCJkZWFkIiwic3BhY2VTaGlwMVgiLCJzcGFjZVNoaXAxWSIsImVuZEdhbWUiLCJpc0RlZmluZWQiLCJjeWNsZSIsImNhbmNlbCIsInVuZGVmaW5lZCIsImVuZEdhbWVUZXh0IiwiZGVmYXVsdFZhcnMiLCJQQ1Nob3ciLCJnZXRQQ1Nob3ciLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiZ2V0Q29udGV4dCIsIkFycmF5IiwiQnVmZmVyUGxheWVyIiwiZ2V0UGxheWVycyIsInRlbGxlciIsIlNwYWNlc2hpcCIsImNvbG9yIiwiaSIsInJvdGF0ZVNwYWNlc2hpcFJlbGF0aXZlIiwib3JpZW50YXRpb24iLCJ0ZW1wIiwiQnVsbGV0IiwiYXVkaW9VcmwiLCJzaG90IiwicmVzdGFydEdhbWUiLCJyZXNldCIsImNhbnZhc0RpcmVjdGl2ZSIsImxpbmsiLCJzY29wZSIsImVsZW1lbnQiLCJhdHRycyIsImlubmVyV2lkdGgiLCJpbm5lckhlaWdodCIsImJpbmQiLCIkZGlnZXN0IiwicmVzdHJpY3QiLCJyZXBsYWNlIiwidGVtcGxhdGUiLCJkaXJlY3RpdmUiLCJzdGFnZSIsInRoaXMiLCJJbWFnZSIsInNyYyIsInByb3RvdHlwZSIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwic2xpY2UiLCJudW1iZXIiLCJtb3ZlU3BhY2VzaGlwIiwibW92ZVNwYWNlc2hpcFJlbGF0aXZlIiwicm90YXRlU3BhY2VzaGlwIiwiZGVncmVlIiwiZGVjcmVhc2VEYW1hZ2UiLCJ2YWx1ZSIsImZhY3RvcnkiLCJwbGF5ZXJzIiwicGxheWVyc0FycmF5IiwiJHJvb3RTY29wZSIsInNvY2tldCIsImlvIiwiY29ubmVjdCIsIndpbmRvdyIsImxvY2F0aW9uIiwiaG9zdCIsImV2ZW50TmFtZSIsImNhbGxiYWNrIiwiYXJncyIsImFyZ3VtZW50cyIsIiRhcHBseSIsImFwcGx5Il0sIm1hcHBpbmdzIjoiQ0FHQSxXQUVBQSxRQUFBQyxPQUFBLGFDREEsV0FDQSxHQUFBQyxHQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBRUFILEVBQUFJLE9BQUFGLEVBQUFHLFNBR0EsSUFBQUMsR0FBQSxXQUNBTCxFQUFBTSxLQUFBLFlBQUEsTUFFQVAsR0FBQVEsS0FBQSxHQUNBUCxFQUFBUSxHQUFBLGNBQUEsU0FBQUMsR0FDQVYsRUFBQVEsS0FBQUUsSUFFQVQsRUFBQVEsR0FBQSxvQkFBQSxTQUFBQyxHQUNBLEdBQ0FDLElBREFELEVBQUFFLFlBRUFELEdBQUFFLE1BQUFILEVBQUFHLE1BQ0FGLEVBQUFHLEtBQUFKLEVBQUFJLEtBQ0FILEVBQUFJLE1BQUFMLEVBQUFLLFFBRUFmLEVBQUFnQixhQUNBaEIsRUFBQWlCLGdCQUFBLEVBQ0FoQixFQUFBUSxHQUFBLGNBQUEsU0FBQUMsR0FDQVAsRUFBQWUsV0FBQVIsR0FDQVYsRUFBQWdCLFVBQUFOLEVBQ0FWLEVBQUFpQixlQUFBRSxPQUFBQyxLQUFBcEIsRUFBQWdCLFdBQUFLLE9BQUEsSUFHQXJCLEVBQUFzQixV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bnRlbnQiOlsiLyoqXG4gKiBDcmVhdGVkIGJ5IE1pY2hpZWwgb24gMjUvMTEvMjAxNS5cbiAqL1xuKGZ1bmN0aW9uKCl7XG5cbiAgICB2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoXCJhcHBcIixbXSk7XG59KSgpOyIsIi8qKlxuICogQ3JlYXRlZCBieSBNaWNoaWVsIG9uIDExLzEyLzIwMTUuXG4gKi9cblxuKGZ1bmN0aW9uKCl7XG4gICAgdmFyIGxvZ2luQ29udHJvbGxlciA9IGZ1bmN0aW9uKCRzY29wZSwgc29ja2V0U2VydmljZSwgZGlzcGxheVNlcnZpY2UsIHBsYXllclNlcnZpY2Upe1xuXG4gICAgICAgICRzY29wZS5MQ1Nob3cgPSBkaXNwbGF5U2VydmljZS5nZXRMQ1Nob3c7XG5cbiAgICAgICAgLy9mdW5jdGlvbnNcbiAgICAgICAgdmFyIG1ha2VSb29tID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHNvY2tldFNlcnZpY2UuZW1pdChcInBjY29ubmVjdFwiLCBudWxsKTtcbiAgICAgICAgfTtcbiAgICAgICAgJHNjb3BlLnJvb20gPSBcIlwiO1xuICAgICAgICBzb2NrZXRTZXJ2aWNlLm9uKCdyZXF1ZXN0Um9vbScsZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICAkc2NvcGUucm9vbSA9IGRhdGE7XG4gICAgICAgIH0pO1xuICAgICAgICBzb2NrZXRTZXJ2aWNlLm9uKCdkZXZpY2VPcmllbnRhdGlvbicsIGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgdmFyIHVzZXJuYW1lID0gZGF0YS51c2VybmFtZTtcbiAgICAgICAgICAgIHZhciBkZXZpY2VPcmllbnRhdGlvbiA9IHt9O1xuICAgICAgICAgICAgZGV2aWNlT3JpZW50YXRpb24uZ2FtbWEgPSBkYXRhLmdhbW1hO1xuICAgICAgICAgICAgZGV2aWNlT3JpZW50YXRpb24uYmV0YSA9IGRhdGEuYmV0YTtcbiAgICAgICAgICAgIGRldmljZU9yaWVudGF0aW9uLmFscGhhID0gZGF0YS5hbHBoYTtcbiAgICAgICAgfSk7XG4gICAgICAgICRzY29wZS51c2VybmFtZXMgPSB7fTtcbiAgICAgICAgJHNjb3BlLmNoZWNrVXNlckNvdW50ID0gZmFsc2U7XG4gICAgICAgIHNvY2tldFNlcnZpY2Uub24oJ3VwZGF0ZXVzZXJzJywgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHBsYXllclNlcnZpY2Uuc2V0UGxheWVycyhkYXRhKTtcbiAgICAgICAgICAgICRzY29wZS51c2VybmFtZXMgPSBkYXRhO1xuICAgICAgICAgICAgJHNjb3BlLmNoZWNrVXNlckNvdW50ID0gT2JqZWN0LmtleXMoJHNjb3BlLnVzZXJuYW1lcykubGVuZ3RoIDwgMDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJHNjb3BlLnN0YXJ0R2FtZT0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc29ja2V0U2VydmljZS5lbWl0KFwic3RhcnRHYW1lXCIsIG51bGwpO1xuICAgICAgICAgICAgZGlzcGxheVNlcnZpY2Uuc2V0TENTaG93KGZhbHNlKTtcbiAgICAgICAgICAgIGRpc3BsYXlTZXJ2aWNlLnNldFBDU2hvdyh0cnVlKTtcbiAgICAgICAgfTtcblxuXG4gICAgICAgIChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIG1ha2VSb29tKCk7XG4gICAgICAgIH0pKCk7XG5cbiAgICB9O1xuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJhcHBcIikuY29udHJvbGxlcihcImxvZ2luQ29udHJvbGxlclwiLCBbXCIkc2NvcGVcIiwgXCJzb2NrZXRTZXJ2aWNlXCIgLCBcImRpc3BsYXlTZXJ2aWNlXCIsIFwicGxheWVyU2VydmljZVwiLCBsb2dpbkNvbnRyb2xsZXJdKTtcbn0pKCk7IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IE1pY2hpZWwgb24gMTYvMTIvMjAxNS5cbiAqL1xuXG4oZnVuY3Rpb24oKXtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICB2YXIgcGxheUNvbnRyb2xsZXIgPSBmdW5jdGlvbigkc2NvcGUsICRpbnRlcnZhbCwgJHdpbmRvdywgc29ja2V0U2VydmljZSwgZGlzcGxheVNlcnZpY2UsIHBsYXllclNlcnZpY2Upe1xuICAgICAgICB2YXIgZGVmYXVsdFZhcnMgPSBbe3g6MTAsIHk6MTAscm90YXRpb246MTM1fSx7eDo5MCwgeToxMCxyb3RhdGlvbjoyMjV9LHt4OjkwLCB5OjkwLHJvdGF0aW9uOjMxNX0se3g6MTAsIHk6OTAscm90YXRpb246NDV9XTtcbiAgICAgICAgJHNjb3BlLlBDU2hvdyA9IGRpc3BsYXlTZXJ2aWNlLmdldFBDU2hvdztcbiAgICAgICAgJHNjb3BlLmVuZEdhbWUgPSBmYWxzZTtcbiAgICAgICAgdmFyIGNhbnYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2FtZScpO1xuICAgICAgICB2YXIgY3R4ID0gY2Fudi5nZXRDb250ZXh0KCcyZCcpO1xuXG4gICAgICAgIHZhciBBbGxQbGF5ZXJzID0gbmV3IEFycmF5KCk7XG4gICAgICAgIHZhciBBbGxCdWxsZXRzID0gbmV3IEFycmF5KCk7XG4gICAgICAgIHZhciBBbGxBc3Rlcm9pZHMgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgdmFyIEFsbFBvd2VyVXBzID0gbmV3IEFycmF5KCk7XG5cbiAgICAgICAgdmFyIGN5Y2xlO1xuXG4gICAgICAgIHNvY2tldFNlcnZpY2Uub24oXCJpbml0R2FtZVwiLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgdmFyIEJ1ZmZlclBsYXllciA9IHBsYXllclNlcnZpY2UuZ2V0UGxheWVycygpO1xuICAgICAgICAgICAgdmFyIHRlbGxlcj0gMDtcbiAgICAgICAgICAgIGZvcih2YXIgcGxheWVyIGluIEJ1ZmZlclBsYXllcil7XG4gICAgICAgICAgICAgICAgdmFyIHAgPSBCdWZmZXJQbGF5ZXJbcGxheWVyXTtcbiAgICAgICAgICAgICAgICBBbGxQbGF5ZXJzLnB1c2gobmV3IFNwYWNlc2hpcChwLnVzZXJuYW1lLCBkZWZhdWx0VmFyc1t0ZWxsZXJdLngsIGRlZmF1bHRWYXJzW3RlbGxlcl0ueSwgcC5jb2xvciwgZGVmYXVsdFZhcnNbdGVsbGVyXS5yb3RhdGlvbikpO1xuICAgICAgICAgICAgICAgIHRlbGxlcisrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpPDE1OyBpKyspe1xuICAgICAgICAgICAgICAgIEFsbEFzdGVyb2lkcy5wdXNoKG5ldyBBc3Rlcm9pZChjcmVhdGVDb29yZGluYXRlWCgpLCBjcmVhdGVDb29yZGluYXRlWSgpLCBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMzYxKSwgTWF0aC5jZWlsKE1hdGgucmFuZG9tKCkqMTgpKSk7XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgY3ljbGUgPSAkaW50ZXJ2YWwoZHJhdywgMTApO1xuICAgICAgICB9KTtcblxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVDb29yZGluYXRlWCgpe1xuICAgICAgICAgICAgdmFyIHggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMTAwKTtcbiAgICAgICAgICAgIGZvcih2YXIgcCBpbiBBbGxQbGF5ZXJzKXtcbiAgICAgICAgICAgICAgICBpZihNYXRoLmFicyhBbGxQbGF5ZXJzW3BdLnggLSB4KSA8IDEwKXtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUNvb3JkaW5hdGVYKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHg7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVDb29yZGluYXRlWSgpe1xuICAgICAgICAgICAgdmFyIHkgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMTAwKTtcbiAgICAgICAgICAgIGZvcih2YXIgcCBpbiBBbGxQbGF5ZXJzKXtcbiAgICAgICAgICAgICAgICBpZihNYXRoLmFicyhBbGxQbGF5ZXJzW3BdLnkgLSB5KSA8IDEwKXtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUNvb3JkaW5hdGVZKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHk7XG4gICAgICAgIH1cblxuICAgICAgICBzb2NrZXRTZXJ2aWNlLm9uKFwidXNlcmxlZnRcIiwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBwID0gbnVsbDtcbiAgICAgICAgICAgIGZvcih2YXIgaSBpbiBBbGxQbGF5ZXJzKXtcbiAgICAgICAgICAgICAgICBpZihmaWx0ZXJQbGF5ZXJzKEFsbFBsYXllcnNbaV0sZGF0YSkgPT0gdHJ1ZSl7XG4gICAgICAgICAgICAgICAgICAgIHAgPSBpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIEFsbFBsYXllcnMuc3BsaWNlKHAsMSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHNvY2tldFNlcnZpY2Uub24oXCJ1cGRhdGVHYW1lRGF0YVwiLCBmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgIHZhciBwID0gbnVsbDtcbiAgICAgICAgICAgIGZvcih2YXIgaSBpbiBBbGxQbGF5ZXJzKXtcbiAgICAgICAgICAgICAgICBpZihmaWx0ZXJQbGF5ZXJzKEFsbFBsYXllcnNbaV0sZGF0YSkgPT0gdHJ1ZSl7XG4gICAgICAgICAgICAgICAgICAgIHAgPSBpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKHAgIT0gbnVsbCl7XG4gICAgICAgICAgICAgICAgQWxsUGxheWVyc1twXS5yb3RhdGVTcGFjZXNoaXBSZWxhdGl2ZShkYXRhLm9yaWVudGF0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgc29ja2V0U2VydmljZS5vbihcInBsYXllclNob3RcIiwgZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICBpZigkc2NvcGUuZW5kR2FtZT09ZmFsc2UpIHtcbiAgICAgICAgICAgICAgICB2YXIgcCA9IG51bGw7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBBbGxQbGF5ZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWx0ZXJQbGF5ZXJzKEFsbFBsYXllcnNbaV0sIGRhdGEpID09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHAgPSBpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBBbGxQbGF5ZXJzW3BdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYW5nbGUgPSAoMzYwIC0gKHRlbXAucm90YXRpb24gKyAxODApKSAvIDE4MCAqIE1hdGguUEk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB4ID0gdGVtcC54ICsgKGNhbnYud2lkdGggLyA0MDAgKiBNYXRoLnNpbihhbmdsZSkpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgeSA9IHRlbXAueSArIChjYW52LndpZHRoIC8gNDAwICogTWF0aC5jb3MoYW5nbGUpKTtcbiAgICAgICAgICAgICAgICAgICAgQWxsQnVsbGV0cy5wdXNoKG5ldyBCdWxsZXQoeCwgeSwgdGVtcC5yb3RhdGlvbiwgdGVtcC5jb2xvciwgdGVtcC51c2VyTmFtZSkpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYXVkaW9VcmwgPSAnLi4vLi4vYXNzZXRzL0JvbnVzL3NmeF9sYXNlcjIub2dnJztcbiAgICAgICAgICAgICAgICAgICAgaWYgKHAgJSAyID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1ZGlvVXJsID0gJy4uLy4uL2Fzc2V0cy9Cb251cy9zZnhfbGFzZXIxLm9nZyc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIHNob3QgPSBuZXcgQXVkaW8oYXVkaW9VcmwpO1xuICAgICAgICAgICAgICAgICAgICBzaG90LnBsYXkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGZ1bmN0aW9uIGZpbHRlclBsYXllcnMob2JqLGRhdGEpe1xuICAgICAgICAgICAgcmV0dXJuIGRhdGEudXNlcm5hbWUgPT0gb2JqLnVzZXJOYW1lO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZHJhdygpe1xuICAgICAgICAgICAgLyppZihBbGxQbGF5ZXJzLmxlbmd0aD4wKXtcbiAgICAgICAgICAgICAgICBBbGxQbGF5ZXJzWzBdLnNwZWVkID0gMDtcbiAgICAgICAgICAgICAgICBBbGxQbGF5ZXJzWzFdLnNwZWVkID0gMDtcbiAgICAgICAgICAgIH0qL1xuICAgICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLDAsY2Fudi53aWR0aCwgY2Fudi5oZWlnaHQpO1xuICAgICAgICAgICAgdmFyIHJhdGlvID0gY2Fudi53aWR0aC8xMDA7XG5cbiAgICAgICAgICAgIGlmKEFsbEJ1bGxldHMubGVuZ3RoICE9IDApe1xuICAgICAgICAgICAgICAgIHZhciBCdWxsZXRXaWR0aCA9IGNhbnYud2lkdGgvMTAwO1xuICAgICAgICAgICAgICAgIHZhciBCdWxsZXRIZWlnaHQgPSBCdWxsZXRXaWR0aCAqIEFsbEJ1bGxldHNbMF0uaW1hZ2UuaGVpZ2h0L0FsbEJ1bGxldHNbMF0uaW1hZ2Uud2lkdGg7XG5cbiAgICAgICAgICAgICAgICBmb3IodmFyIGJ1bGxldCBpbiBBbGxCdWxsZXRzKXtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGIgPSBBbGxCdWxsZXRzW2J1bGxldF07XG4gICAgICAgICAgICAgICAgICAgIGIud2lkdGggPSBCdWxsZXRXaWR0aDtcbiAgICAgICAgICAgICAgICAgICAgYi5oZWlnaHQgPSBCdWxsZXRIZWlnaHQ7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoYi5leHBsb2RlU3RhZ2UgPT0gMCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL0RyYXcgYnVsbGV0XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguc2F2ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZShiLngqcmF0aW8sIGIueSpyYXRpbyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHgucm90YXRlKGIucm90YXRpb24vMTgwKk1hdGguUEkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShiLmltYWdlLCAtQnVsbGV0V2lkdGgvMiwgLUJ1bGxldEhlaWdodC8yLCBCdWxsZXRXaWR0aCwgQnVsbGV0SGVpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIEFsbEJ1bGxldHNbYnVsbGV0XS54ID0gTWF0aC5jb3MoKGIucm90YXRpb24gLSA5MCkvMTgwKk1hdGguUEkpICsgYi54O1xuICAgICAgICAgICAgICAgICAgICAgICAgQWxsQnVsbGV0c1tidWxsZXRdLnkgPSBNYXRoLnNpbigoYi5yb3RhdGlvbiAtIDkwKS8xODAqTWF0aC5QSSkrIGIueTtcbiAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYoYi5leHBsb2RlU3RhZ2UgPCA0KXtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vRHJhdyBleHBsb3Npb25cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGIuZXhwbG9zaW9uSW1hZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnNhdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC50cmFuc2xhdGUoYi54KnJhdGlvLCBiLnkqcmF0aW8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShiLmV4cGxvc2lvbkltYWdlLCAtQnVsbGV0V2lkdGgsIC1CdWxsZXRXaWR0aCwgQnVsbGV0V2lkdGgqMiwgQnVsbGV0V2lkdGgqMik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHgucmVzdG9yZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZihBbGxQbGF5ZXJzLmxlbmd0aCAhPSAwKXtcbiAgICAgICAgICAgICAgICB2YXIgU3BhY2VzaGlwV2lkdGggPSBjYW52LndpZHRoLzIwO1xuICAgICAgICAgICAgICAgIHZhciBTcGFjZXNoaXBIZWlnaHQgPSBTcGFjZXNoaXBXaWR0aCAqIEFsbFBsYXllcnNbMF0uaW1hZ2UuaGVpZ2h0LyBBbGxQbGF5ZXJzWzBdLmltYWdlLndpZHRoO1xuXG4gICAgICAgICAgICAgICAgZm9yKHZhciBwbGF5ZXIgaW4gQWxsUGxheWVycyl7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwID0gQWxsUGxheWVyc1twbGF5ZXJdO1xuICAgICAgICAgICAgICAgICAgICBwLndpZHRoID0gU3BhY2VzaGlwV2lkdGg7XG4gICAgICAgICAgICAgICAgICAgIHAuaGVpZ2h0ID0gU3BhY2VzaGlwSGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICBjdHguc2F2ZSgpO1xuICAgICAgICAgICAgICAgICAgICBjdHgudHJhbnNsYXRlKHAueCpyYXRpbywgcC55KnJhdGlvKTtcbiAgICAgICAgICAgICAgICAgICAgY3R4LnJvdGF0ZShwLnJvdGF0aW9uLzE4MCpNYXRoLlBJKTtcbiAgICAgICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShwLmltYWdlLCAtU3BhY2VzaGlwV2lkdGgvMiwgLVNwYWNlc2hpcEhlaWdodC8yLCBTcGFjZXNoaXBXaWR0aCwgU3BhY2VzaGlwSGVpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgaWYocC5kYW1hZ2UgPiAwKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UocC5kYW1hZ2VJbWFnZSwgLVNwYWNlc2hpcFdpZHRoLzIsIC1TcGFjZXNoaXBIZWlnaHQvMiwgU3BhY2VzaGlwV2lkdGgsIFNwYWNlc2hpcEhlaWdodCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYocC5kYW1hZ2U8NCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBBbGxQbGF5ZXJzW3BsYXllcl0ueCA9IE1hdGguY29zKChwLnJvdGF0aW9uIC0gOTApLzE4MCpNYXRoLlBJKS8xMCogcC5zcGVlZCArIHAueDtcbiAgICAgICAgICAgICAgICAgICAgICAgIEFsbFBsYXllcnNbcGxheWVyXS55ID0gTWF0aC5zaW4oKHAucm90YXRpb24gLSA5MCkvMTgwKk1hdGguUEkpLzEwKiBwLnNwZWVkICsgcC55O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZihBbGxBc3Rlcm9pZHMubGVuZ3RoPjApe1xuICAgICAgICAgICAgICAgIGZvcih2YXIgQXN0ZXJvaWQgaW4gQWxsQXN0ZXJvaWRzKXtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBBbGxBc3Rlcm9pZHNbQXN0ZXJvaWRdO1xuICAgICAgICAgICAgICAgICAgICBhLndpZHRoID0gY2Fudi53aWR0aC83MDAqIGEuaW1hZ2Uud2lkdGg7XG4gICAgICAgICAgICAgICAgICAgIGEuaGVpZ2h0ID0gYS53aWR0aCogYS5pbWFnZS5oZWlnaHQvIGEuaW1hZ2Uud2lkdGg7XG4gICAgICAgICAgICAgICAgICAgIGN0eC5zYXZlKCk7XG4gICAgICAgICAgICAgICAgICAgIGN0eC50cmFuc2xhdGUoYS54KnJhdGlvLCBhLnkqcmF0aW8pO1xuICAgICAgICAgICAgICAgICAgICBjdHgucm90YXRlKGEucm90YXRpb24vMTgwKk1hdGguUEkpO1xuICAgICAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKGEuaW1hZ2UsIC1hLndpZHRoLzIsIC1hLmhlaWdodC8yLCBhLndpZHRoLCBhLmhlaWdodCk7XG4gICAgICAgICAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmKGEueCA8IC01IHx8IGEueCA+IDEwNSB8fCBhLnkgPCAtNSB8fCBhLnkgPiAxMDUpe1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9uaWV1d2UgYXN0ZXJvaWQgdGVrZW5lblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtldXplID0gTWF0aC5yYW5kb20oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGtldXplIDwgMC4yNSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9saW5rc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFsbEFzdGVyb2lkc1tBc3Rlcm9pZF0ueCA9IC00O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFsbEFzdGVyb2lkc1tBc3Rlcm9pZF0ueSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoxMDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFsbEFzdGVyb2lkc1tBc3Rlcm9pZF0ucm90YXRpb24gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMTgwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKGtldXplIDwgMC41KXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2JvdmVuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQWxsQXN0ZXJvaWRzW0FzdGVyb2lkXS54ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjEwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQWxsQXN0ZXJvaWRzW0FzdGVyb2lkXS55ID0gLTQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQWxsQXN0ZXJvaWRzW0FzdGVyb2lkXS5yb3RhdGlvbiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoxODApICsgOTA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZihrZXV6ZSA8IDAuNzUpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vcmVjaHRzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQWxsQXN0ZXJvaWRzW0FzdGVyb2lkXS54ID0gMTA0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFsbEFzdGVyb2lkc1tBc3Rlcm9pZF0ueSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoxMDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFsbEFzdGVyb2lkc1tBc3Rlcm9pZF0ucm90YXRpb24gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMTgwKSArIDE4MDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vb25kZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbGxBc3Rlcm9pZHNbQXN0ZXJvaWRdLnggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMTAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbGxBc3Rlcm9pZHNbQXN0ZXJvaWRdLnkgPSAxMDQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQWxsQXN0ZXJvaWRzW0FzdGVyb2lkXS5yb3RhdGlvbiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoxODApICsgMjcwO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgQWxsQXN0ZXJvaWRzW0FzdGVyb2lkXS5zZXRJbWFnZShNYXRoLmNlaWwoTWF0aC5yYW5kb20oKSoxOCkpO1xuXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgQWxsQXN0ZXJvaWRzW0FzdGVyb2lkXS54ID0gTWF0aC5jb3MoKGEucm90YXRpb24gLSA5MCkvMTgwKk1hdGguUEkpLzMwICsgYS54O1xuICAgICAgICAgICAgICAgICAgICAgICAgQWxsQXN0ZXJvaWRzW0FzdGVyb2lkXS55ID0gTWF0aC5zaW4oKGEucm90YXRpb24gLSA5MCkvMTgwKk1hdGguUEkpLzMwICsgYS55O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjaGVja0J1bGxldHMoKTtcblxuICAgICAgICAgICAgY29sbGlzaW9uRGV0ZWN0aW9uKCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBjaGVja0J1bGxldHMoKXtcbiAgICAgICAgICAgIGZvcih2YXIgYiBpbiBBbGxCdWxsZXRzKXtcbiAgICAgICAgICAgICAgICBpZihBbGxCdWxsZXRzW2JdLnggPCAwIHx8IEFsbEJ1bGxldHNbYl0ueCA+IGNhbnYud2lkdGggfHwgQWxsQnVsbGV0c1tiXS55IDwgMCB8fCBBbGxCdWxsZXRzW2JdLnkgPiBjYW52LmhlaWdodCl7XG4gICAgICAgICAgICAgICAgICAgIEFsbEJ1bGxldHMuc3BsaWNlKGIsIDEpO1xuICAgICAgICAgICAgICAgIH1lbHNlIGlmKEFsbEJ1bGxldHNbYl0uZXhwbG9kZVN0YWdlID4wKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChBbGxCdWxsZXRzW2JdLmV4cGxvZGVTdGFnZSA8IDQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEFsbEJ1bGxldHNbYl0uZXhwbG9kZSgpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgQWxsQnVsbGV0cy5zcGxpY2UoYiwgMSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBjb2xsaXNpb25EZXRlY3Rpb24oKXtcbiAgICAgICAgICAgIC8vUGxheWVyIC0gQnVsbGV0XG4gICAgICAgICAgICB2YXIgbGl2aW5nUGxheWVycz1bXTtcbiAgICAgICAgICAgIGZvcih2YXIgcCBpbiBBbGxQbGF5ZXJzKXtcbiAgICAgICAgICAgICAgICBpZihBbGxQbGF5ZXJzW3BdLmRhbWFnZTw0KXtcbiAgICAgICAgICAgICAgICAgICAgbGl2aW5nUGxheWVycy5wdXNoKEFsbFBsYXllcnNbcF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IodmFyIGIgaW4gQWxsQnVsbGV0cyl7XG4gICAgICAgICAgICAgICAgICAgIGlmKEFsbEJ1bGxldHNbYl0uZXhwbG9kZVN0YWdlID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBbGxCdWxsZXRzW2JdLnBsYXllciAhPSBBbGxQbGF5ZXJzW3BdLnVzZXJOYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJhZGl1cyA9IE1hdGguc3FydCgyKSAvIDIgKiAoQWxsQnVsbGV0c1tiXS5oZWlnaHQgLyAyIC0gQWxsQnVsbGV0c1tiXS53aWR0aCAvIDIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbmdsZSA9ICgzNjAgLSAoQWxsQnVsbGV0c1tiXS5yb3RhdGlvbikpIC8gMTgwICogTWF0aC5QSTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYnVsbGV0SGVhZFggPSAoQWxsQnVsbGV0c1tiXS54ICogY2Fudi53aWR0aCAvIDEwMCAtIChyYWRpdXMgKiBNYXRoLnNpbihhbmdsZSkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYnVsbGV0SGVhZFkgPSAoQWxsQnVsbGV0c1tiXS55ICogY2Fudi53aWR0aCAvIDEwMCAtIChyYWRpdXMgKiBNYXRoLmNvcyhhbmdsZSkpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcGFjZVNoaXBYID0gQWxsUGxheWVyc1twXS54ICogY2Fudi53aWR0aCAvIDEwMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3BhY2VTaGlwWSA9IEFsbFBsYXllcnNbcF0ueSAqIGNhbnYud2lkdGggLyAxMDA7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGlzdGFuY2UgPSBNYXRoLnNxcnQoKGJ1bGxldEhlYWRYIC0gc3BhY2VTaGlwWCkgKiAoYnVsbGV0SGVhZFggLSBzcGFjZVNoaXBYKSArIChidWxsZXRIZWFkWSAtIHNwYWNlU2hpcFkpICogKGJ1bGxldEhlYWRZIC0gc3BhY2VTaGlwWSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkaXN0YW5jZSA8IChBbGxCdWxsZXRzW2JdLndpZHRoIC8gMiArIEFsbFBsYXllcnNbcF0ud2lkdGggLyAyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGFtYWdlc291bmQgPSBuZXcgQXVkaW8oJy4uLy4uL2Fzc2V0cy9Cb251cy9zZnhfbG9zZS5vZ2cnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGFtYWdlc291bmQucGxheSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbGxQbGF5ZXJzW3BdLmluY3JlYXNlRGFtYWdlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEudXNlcm5hbWUgPSBBbGxQbGF5ZXJzW3BdLnVzZXJOYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmxpZmUgPSAzLUFsbFBsYXllcnNbcF0uZGFtYWdlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb2NrZXRTZXJ2aWNlLmVtaXQoXCJwbGF5ZXJMaWZlXCIsZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFsbEJ1bGxldHNbYl0uZXhwbG9kZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvL1BsYXllciAtIEFzdGVyb2lkXG4gICAgICAgICAgICAgICAgZm9yKHZhciBhIGluIEFsbEFzdGVyb2lkcyl7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhc3Rlcm9pZFggPSBBbGxBc3Rlcm9pZHNbYV0ueCAqIGNhbnYud2lkdGggLyAxMDA7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhc3Rlcm9pZFkgPSBBbGxBc3Rlcm9pZHNbYV0ueSAqIGNhbnYud2lkdGggLyAxMDA7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHNwYWNlU2hpcFggPSBBbGxQbGF5ZXJzW3BdLnggKiBjYW52LndpZHRoIC8gMTAwO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3BhY2VTaGlwWSA9IEFsbFBsYXllcnNbcF0ueSAqIGNhbnYud2lkdGggLyAxMDA7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGRpc3RhbmNlID0gTWF0aC5zcXJ0KChhc3Rlcm9pZFggLSBzcGFjZVNoaXBYKSAqIChhc3Rlcm9pZFggLSBzcGFjZVNoaXBYKSArIChhc3Rlcm9pZFkgLSBzcGFjZVNoaXBZKSAqIChhc3Rlcm9pZFkgLSBzcGFjZVNoaXBZKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkaXN0YW5jZSA8IChBbGxBc3Rlcm9pZHNbYV0ud2lkdGggLyAyICsgQWxsUGxheWVyc1twXS53aWR0aCAvIDIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGFtYWdlc291bmQgPSBuZXcgQXVkaW8oJy4uLy4uL2Fzc2V0cy9Cb251cy9zZnhfbG9zZS5vZ2cnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhbWFnZXNvdW5kLnBsYXkoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIEFsbFBsYXllcnNbcF0uZGVhZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEudXNlcm5hbWUgPSBBbGxQbGF5ZXJzW3BdLnVzZXJOYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5saWZlID0gMy1BbGxQbGF5ZXJzW3BdLmRhbWFnZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvY2tldFNlcnZpY2UuZW1pdChcInBsYXllckxpZmVcIixkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vUGxheWVyIC0gUGxheWVyXG5cbiAgICAgICAgICAgICAgICBmb3IodmFyIGEgaW4gQWxsUGxheWVycyl7XG4gICAgICAgICAgICAgICAgICAgIGlmKGEhPXApe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNwYWNlU2hpcDFYID0gQWxsUGxheWVyc1thXS54ICogY2Fudi53aWR0aCAvIDEwMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcGFjZVNoaXAxWSA9IEFsbFBsYXllcnNbYV0ueSAqIGNhbnYud2lkdGggLyAxMDA7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcGFjZVNoaXBYID0gQWxsUGxheWVyc1twXS54ICogY2Fudi53aWR0aCAvIDEwMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcGFjZVNoaXBZID0gQWxsUGxheWVyc1twXS55ICogY2Fudi53aWR0aCAvIDEwMDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRpc3RhbmNlID0gTWF0aC5zcXJ0KChzcGFjZVNoaXAxWCAtIHNwYWNlU2hpcFgpICogKHNwYWNlU2hpcDFYIC0gc3BhY2VTaGlwWCkgKyAoc3BhY2VTaGlwMVkgLSBzcGFjZVNoaXBZKSAqIChzcGFjZVNoaXAxWSAtIHNwYWNlU2hpcFkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkaXN0YW5jZSA8IChBbGxQbGF5ZXJzW2FdLndpZHRoIC8gMiArIEFsbFBsYXllcnNbcF0ud2lkdGggLyAyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYW1hZ2Vzb3VuZCA9IG5ldyBBdWRpbygnLi4vLi4vYXNzZXRzL0JvbnVzL3NmeF9sb3NlLm9nZycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhbWFnZXNvdW5kLnBsYXkoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbGxQbGF5ZXJzW3BdLmRlYWQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbGxQbGF5ZXJzW2FdLmRlYWQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEudXNlcm5hbWUgPSBBbGxQbGF5ZXJzW3BdLnVzZXJOYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEubGlmZSA9IDMtQWxsUGxheWVyc1twXS5kYW1hZ2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc29ja2V0U2VydmljZS5lbWl0KFwicGxheWVyTGlmZVwiLGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEudXNlcm5hbWUgPSBBbGxQbGF5ZXJzW2FdLnVzZXJOYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEubGlmZSA9IDMtQWxsUGxheWVyc1thXS5kYW1hZ2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc29ja2V0U2VydmljZS5lbWl0KFwicGxheWVyTGlmZVwiLGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy9QbGF5ZXIgLSBXYWxsXG4gICAgICAgICAgICAgICAgaWYoQWxsUGxheWVyc1twXS54KmNhbnYud2lkdGgvMTAwIDwgQWxsUGxheWVyc1twXS5oZWlnaHQvMiB8fCBBbGxQbGF5ZXJzW3BdLngqY2Fudi53aWR0aC8xMDAgPiBjYW52LndpZHRoLShBbGxQbGF5ZXJzW3BdLmhlaWdodC8yKXx8XG4gICAgICAgICAgICAgICAgICAgIEFsbFBsYXllcnNbcF0ueSpjYW52LndpZHRoLzEwMCA8IEFsbFBsYXllcnNbcF0uaGVpZ2h0LzIgfHwgQWxsUGxheWVyc1twXS55KmNhbnYud2lkdGgvMTAwID4gY2Fudi53aWR0aC0oQWxsUGxheWVyc1twXS5oZWlnaHQvMikpe1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGFtYWdlc291bmQgPSBuZXcgQXVkaW8oJy4uLy4uL2Fzc2V0cy9Cb251cy9zZnhfbG9zZS5vZ2cnKTtcbiAgICAgICAgICAgICAgICAgICAgZGFtYWdlc291bmQucGxheSgpO1xuICAgICAgICAgICAgICAgICAgICBBbGxQbGF5ZXJzW3BdLmRlYWQoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgZGF0YS51c2VybmFtZSA9IEFsbFBsYXllcnNbcF0udXNlck5hbWU7XG4gICAgICAgICAgICAgICAgICAgIGRhdGEubGlmZSA9IDMtQWxsUGxheWVyc1twXS5kYW1hZ2U7XG4gICAgICAgICAgICAgICAgICAgIHNvY2tldFNlcnZpY2UuZW1pdChcInBsYXllckxpZmVcIixkYXRhKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9CdWxsZXQgLSBBc3Rlcm9pZFxuICAgICAgICAgICAgZm9yKHZhciBhIGluIEFsbEFzdGVyb2lkcykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGIgaW4gQWxsQnVsbGV0cykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoQWxsQnVsbGV0c1tiXS5leHBsb2RlU3RhZ2UgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFsbEJ1bGxldHNbYl0ucGxheWVyICE9IEFsbEFzdGVyb2lkc1thXS51c2VyTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByYWRpdXMgPSBNYXRoLnNxcnQoMikgLyAyICogKEFsbEJ1bGxldHNbYl0uaGVpZ2h0IC8gMiAtIEFsbEJ1bGxldHNbYl0ud2lkdGggLyAyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYW5nbGUgPSAoMzYwIC0gKEFsbEJ1bGxldHNbYl0ucm90YXRpb24pKSAvIDE4MCAqIE1hdGguUEk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJ1bGxldEhlYWRYID0gKEFsbEJ1bGxldHNbYl0ueCAqIGNhbnYud2lkdGggLyAxMDAgLSAocmFkaXVzICogTWF0aC5zaW4oYW5nbGUpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJ1bGxldEhlYWRZID0gKEFsbEJ1bGxldHNbYl0ueSAqIGNhbnYud2lkdGggLyAxMDAgLSAocmFkaXVzICogTWF0aC5jb3MoYW5nbGUpKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXN0ZXJvaWRYID0gQWxsQXN0ZXJvaWRzW2FdLnggKiBjYW52LndpZHRoIC8gMTAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhc3Rlcm9pZFkgPSBBbGxBc3Rlcm9pZHNbYV0ueSAqIGNhbnYud2lkdGggLyAxMDA7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGlzdGFuY2UgPSBNYXRoLnNxcnQoKGJ1bGxldEhlYWRYIC0gYXN0ZXJvaWRYKSAqIChidWxsZXRIZWFkWCAtIGFzdGVyb2lkWCkgKyAoYnVsbGV0SGVhZFkgLSBhc3Rlcm9pZFkpICogKGJ1bGxldEhlYWRZIC0gYXN0ZXJvaWRZKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRpc3RhbmNlIDwgKEFsbEJ1bGxldHNbYl0ud2lkdGggLyAyICsgQWxsQXN0ZXJvaWRzW2FdLndpZHRoIC8gMikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhbWFnZXNvdW5kID0gbmV3IEF1ZGlvKCcuLi8uLi9hc3NldHMvQm9udXMvc2Z4X2xvc2Uub2dnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhbWFnZXNvdW5kLnBsYXkoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS51c2VybmFtZSA9IEFsbEFzdGVyb2lkc1thXS51c2VyTmFtZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5saWZlID0gMyAtIEFsbEFzdGVyb2lkc1thXS5kYW1hZ2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvY2tldFNlcnZpY2UuZW1pdChcInBsYXllckxpZmVcIiwgZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFsbEJ1bGxldHNbYl0uZXhwbG9kZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9cblxuICAgICAgICAgICAgaWYobGl2aW5nUGxheWVycy5sZW5ndGg9PTEpe1xuICAgICAgICAgICAgICAgIGVuZEdhbWUobGl2aW5nUGxheWVycyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBlbmRHYW1lKGxpdmluZ1BsYXllcnMpe1xuICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKGN5Y2xlKSkge1xuICAgICAgICAgICAgICAgICRpbnRlcnZhbC5jYW5jZWwoY3ljbGUpO1xuICAgICAgICAgICAgICAgIGN5Y2xlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJHNjb3BlLmVuZEdhbWU9dHJ1ZTtcbiAgICAgICAgICAgICRzY29wZS5lbmRHYW1lVGV4dD0gbGl2aW5nUGxheWVyc1swXS51c2VyTmFtZSArIFwiIGlzIHRoZSB3aW5uZXIhXCI7XG4gICAgICAgICAgICBzb2NrZXRTZXJ2aWNlLmVtaXQoXCJlbmRHYW1lXCIsIGxpdmluZ1BsYXllcnNbMF0udXNlck5hbWUpO1xuICAgICAgICB9XG4gICAgICAgICRzY29wZS5yZXN0YXJ0R2FtZSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAkc2NvcGUuZW5kR2FtZT1mYWxzZTtcbiAgICAgICAgICAgIHZhciB0ZWxsZXI9MDtcbiAgICAgICAgICAgIGZvcih2YXIgcCBpbiBBbGxQbGF5ZXJzKXtcbiAgICAgICAgICAgICAgICBBbGxQbGF5ZXJzW3BdLnJlc2V0KGRlZmF1bHRWYXJzW3RlbGxlcl0ueCxkZWZhdWx0VmFyc1t0ZWxsZXJdLnksZGVmYXVsdFZhcnNbdGVsbGVyXS5yb3RhdGlvbik7XG4gICAgICAgICAgICAgICAgdGVsbGVyKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBBbGxBc3Rlcm9pZHM9W107XG4gICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpPDE1OyBpKyspe1xuICAgICAgICAgICAgICAgIEFsbEFzdGVyb2lkcy5wdXNoKG5ldyBBc3Rlcm9pZChjcmVhdGVDb29yZGluYXRlWCgpLCBjcmVhdGVDb29yZGluYXRlWSgpLCBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMzYxKSwgTWF0aC5jZWlsKE1hdGgucmFuZG9tKCkqMTgpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBBbGxCdWxsZXRzID0gW107XG4gICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsMCxjYW52LndpZHRoLCBjYW52LmhlaWdodCk7XG4gICAgICAgICAgICBzb2NrZXRTZXJ2aWNlLmVtaXQoXCJyZXN0YXJ0R2FtZVwiLG51bGwpO1xuICAgICAgICAgICAgY3ljbGUgPSAkaW50ZXJ2YWwoZHJhdywgMTApO1xuICAgICAgICB9O1xuICAgIH07XG5cbiAgICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5jb250cm9sbGVyKFwicGxheUNvbnRyb2xsZXJcIiwgW1wiJHNjb3BlXCIsIFwiJGludGVydmFsXCIsIFwiJHdpbmRvd1wiLCBcInNvY2tldFNlcnZpY2VcIiwgXCJkaXNwbGF5U2VydmljZVwiLCBcInBsYXllclNlcnZpY2VcIiwgcGxheUNvbnRyb2xsZXJdKVxufSkoKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkganVzdGlqbmRlcG92ZXIgb24gMTYvMTIvMTUuXG4gKi9cbihmdW5jdGlvbigpe1xuICAgIHZhciBjYW52YXNEaXJlY3RpdmUgPSBmdW5jdGlvbigkd2luZG93KXtcbiAgICAgICAgcmV0dXJue1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgIGxpbms6bGluayxcbiAgICAgICAgICAgIHJlcGxhY2U6dHJ1ZSxcbiAgICAgICAgICAgIHRlbXBsYXRlOic8Y2FudmFzIGlkPVwiZ2FtZVwiIGNsYXNzPVwicGxheUFyZWFcIiB3aWR0aD1cInt7d2lkdGh9fVwiIGhlaWdodD1cInt7d2lkdGh9fVwiIC8+J1xuICAgICAgICB9O1xuXG4gICAgICAgIGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHJzKXtcbiAgICAgICAgICAgIGlmKCR3aW5kb3cuaW5uZXJXaWR0aCA8ICR3aW5kb3cuaW5uZXJIZWlnaHQpe1xuICAgICAgICAgICAgICAgIHNjb3BlLndpZHRoID0gJHdpbmRvdy5pbm5lcldpZHRoIC0gMjA7XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICBzY29wZS53aWR0aCA9ICR3aW5kb3cuaW5uZXJIZWlnaHQgLSAyMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCR3aW5kb3cpLmJpbmQoJ3Jlc2l6ZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgaWYoJHdpbmRvdy5pbm5lcldpZHRoIDwgJHdpbmRvdy5pbm5lckhlaWdodCl7XG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLndpZHRoID0gJHdpbmRvdy5pbm5lcldpZHRoIC0gMjA7XG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLndpZHRoID0gJHdpbmRvdy5pbm5lckhlaWdodCAtIDIwO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHNjb3BlLiRkaWdlc3QoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5kaXJlY3RpdmUoXCJjYW52YXNEaXJlY3RpdmVcIiwgW1wiJHdpbmRvd1wiLCBjYW52YXNEaXJlY3RpdmVdKTtcbn0pKCk7IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGp1c3Rpam5kZXBvdmVyIG9uIDA5LzEyLzE1LlxuICovXG5cblxudmFyIEFzdGVyb2lkID0gZnVuY3Rpb24oeCwgeSwgcm90YXRpb24sIHN0YWdlKXtcbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG4gICAgdGhpcy53aWR0aCA9IDA7XG4gICAgdGhpcy5oZWlnaHQgPSAwO1xuICAgIHRoaXMucm90YXRpb24gPSByb3RhdGlvbjtcbiAgICB0aGlzLnN0YWdlID0gc3RhZ2U7XG4gICAgdGhpcy5pbWFnZSA9IG5ldyBJbWFnZSgpO1xuICAgIHRoaXMuaW1hZ2Uuc3JjID0gKFwiLi4vYXNzZXRzL1BORy9NZXRlb3JzL21ldGVvcl9cIiArIHN0YWdlICsgXCIucG5nXCIpO1xufTtcblxuQXN0ZXJvaWQucHJvdG90eXBlLnNldEltYWdlID0gZnVuY3Rpb24oc3RhZ2Upe1xuICAgIHRoaXMuc3RhZ2UgPSBzdGFnZTtcbiAgICB0aGlzLmltYWdlLnNyYyA9IChcIi4uL2Fzc2V0cy9QTkcvTWV0ZW9ycy9tZXRlb3JfXCIgKyBzdGFnZSArIFwiLnBuZ1wiKTtcbn07IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGp1c3Rpam5kZXBvdmVyIG9uIDIyLzEyLzE1LlxuICovXG5cbnZhciBCdWxsZXQgPSBmdW5jdGlvbih4LCB5LHJvdGF0aW9uLCBjb2xvciwgcGxheWVyKXtcbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG4gICAgdGhpcy5yb3RhdGlvbiA9IHJvdGF0aW9uO1xuICAgIHRoaXMuaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcbiAgICB0aGlzLmNvbG9yID0gY29sb3I7XG4gICAgdGhpcy53aWR0aCA9IDA7XG4gICAgdGhpcy5oZWlnaHQgPSAwO1xuICAgIHRoaXMucGxheWVyID0gcGxheWVyO1xuICAgIHRoaXMuZXhwbG9zaW9uSW1hZ2UgPSBuZXcgSW1hZ2UoKTtcbiAgICB0aGlzLmV4cGxvZGVTdGFnZSA9IDA7XG4gICAgaWYodGhpcy5jb2xvciA9PSBcIm9yYW5nZVwiKXtcbiAgICAgICAgdGhpcy5jb2xvciA9ICdyZWQnO1xuICAgIH1cbiAgICB0aGlzLmltYWdlLnNyYyA9ICcuLi9hc3NldHMvUE5HL0xhc2Vycy9sYXNlcicrIHRoaXMuY29sb3IuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB0aGlzLmNvbG9yLnNsaWNlKDEpICsnMDEucG5nJ1xufTtcblxuQnVsbGV0LnByb3RvdHlwZS5leHBsb2RlID0gZnVuY3Rpb24oKXtcbiAgICBpZih0aGlzLmV4cGxvZGVTdGFnZSA8IDQpe1xuICAgICAgICB0aGlzLmV4cGxvZGVTdGFnZSsrO1xuICAgICAgICB2YXIgbnVtYmVyO1xuICAgICAgICBpZih0aGlzLmV4cGxvZGVTdGFnZSA8IDMpe1xuICAgICAgICAgICBudW1iZXIgPSAxXG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgbnVtYmVyID0gMlxuICAgICAgICB9XG4gICAgICAgIHRoaXMuZXhwbG9zaW9uSW1hZ2Uuc3JjID0gJy4uL2Fzc2V0cy9QTkcvTGFzZXJzL2xhc2VyJyArIHRoaXMuY29sb3IuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB0aGlzLmNvbG9yLnNsaWNlKDEpICsgJ0V4cGxvZGUnKyBudW1iZXIgKycucG5nJztcbiAgICB9ZWxzZXtcbiAgICAgICAgdGhpcy5leHBsb3Npb25JbWFnZS5zcmMgPSAnJztcbiAgICB9XG59O1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGp1c3Rpam5kZXBvdmVyIG9uIDA5LzEyLzE1LlxuICovXG5cbnZhciBTcGFjZXNoaXAgPSBmdW5jdGlvbih1c2VyTmFtZSwgeCwgeSwgY29sb3IsIHJvdGF0aW9uKXtcbiAgICB0aGlzLnVzZXJOYW1lID0gdXNlck5hbWU7XG4gICAgdGhpcy54ID0geDtcbiAgICB0aGlzLnkgPSB5O1xuICAgIHRoaXMuc3BlZWQgPSAxO1xuICAgIHRoaXMuY29sb3IgPSBjb2xvcjtcbiAgICB0aGlzLnJvdGF0aW9uID0gcm90YXRpb247XG4gICAgdGhpcy5pbWFnZSA9IG5ldyBJbWFnZSgpO1xuICAgIHRoaXMuZGFtYWdlID0gMDtcbiAgICB0aGlzLndpZHRoID0gMDtcbiAgICB0aGlzLmhlaWdodCA9IDA7XG4gICAgdGhpcy5kYW1hZ2VJbWFnZSA9IG5ldyBJbWFnZSgpO1xuICAgIHRoaXMuaW1hZ2Uuc3JjID0gJy4uL2Fzc2V0cy9QTkcvcGxheWVyU2hpcDFfJysgdGhpcy5jb2xvciArJy5wbmcnXG59O1xuXG5TcGFjZXNoaXAucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKHgsIHksIHJvdGF0aW9uKSB7XG4gICAgdGhpcy5zcGVlZCA9IDE7XG4gICAgdGhpcy5kYW1hZ2UgPSAwO1xuICAgIHRoaXMuZGFtYWdlSW1hZ2UgPSBuZXcgSW1hZ2UoKTtcbiAgICB0aGlzLmltYWdlLnNyYyA9ICcuLi9hc3NldHMvUE5HL3BsYXllclNoaXAxXycrIHRoaXMuY29sb3IgKycucG5nJ1xuICAgIHRoaXMueCA9IHg7XG4gICAgdGhpcy55ID0geTtcbiAgICB0aGlzLnJvdGF0aW9uID0gcm90YXRpb247XG59O1xuXG5TcGFjZXNoaXAucHJvdG90eXBlLm1vdmVTcGFjZXNoaXAgPSBmdW5jdGlvbih4LCB5KXtcbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG59O1xuXG5TcGFjZXNoaXAucHJvdG90eXBlLm1vdmVTcGFjZXNoaXBSZWxhdGl2ZSA9IGZ1bmN0aW9uKHgsIHkpe1xuICAgIHRoaXMueCA9IHRoaXMueCt4O1xuICAgIHRoaXMueSA9IHRoaXMueSt5O1xufTtcblxuU3BhY2VzaGlwLnByb3RvdHlwZS5yb3RhdGVTcGFjZXNoaXAgPSBmdW5jdGlvbihkZWdyZWUpe1xuICAgIHRoaXMucm90YXRpb24gPSBkZWdyZWU7XG59O1xuXG5TcGFjZXNoaXAucHJvdG90eXBlLnJvdGF0ZVNwYWNlc2hpcFJlbGF0aXZlID0gZnVuY3Rpb24oZGVncmVlKXtcbiAgICBpZihkZWdyZWU+ODApe1xuICAgICAgICBkZWdyZWU9ODA7XG4gICAgfWVsc2UgaWYgKGRlZ3JlZTwtODApe1xuICAgICAgICBkZWdyZWUgPSAtODA7XG4gICAgfVxuICAgIHRoaXMucm90YXRpb24gPSB0aGlzLnJvdGF0aW9uICsgZGVncmVlLzU7XG4gICAgaWYodGhpcy5yb3RhdGlvbiA8IC0zNjApe1xuICAgICAgICB0aGlzLnJvdGF0aW9uID0gdGhpcy5yb3RhdGlvbiArIDcyMDtcbiAgICB9XG4gICAgaWYodGhpcy5yb3RhdGlvbiA+IDM2MCl7XG4gICAgICAgIHRoaXMucm90YXRpb24gPSB0aGlzLnJvdGF0aW9uIC0gNzIwO1xuICAgIH1cbn07XG5cblNwYWNlc2hpcC5wcm90b3R5cGUuaW5jcmVhc2VEYW1hZ2UgPSBmdW5jdGlvbigpe1xuICAgIGlmKHRoaXMuZGFtYWdlIDwgNCl7XG4gICAgICAgIHRoaXMuZGFtYWdlICs9IDE7XG4gICAgfVxuXG4gICAgaWYodGhpcy5kYW1hZ2UgPD0gMyAmJiB0aGlzLmRhbWFnZSA+IDApe1xuICAgICAgICB0aGlzLmRhbWFnZUltYWdlLnNyYyA9ICcuLi9hc3NldHMvUE5HL0RhbWFnZS9wbGF5ZXJTaGlwMV9kYW1hZ2UnKyB0aGlzLmRhbWFnZSArICcucG5nJztcbiAgICB9ZWxzZSBpZih0aGlzLmRhbWFnZT09NCl7XG4gICAgICAgIHRoaXMuZGFtYWdlSW1hZ2Uuc3JjID0gJy4uL2Fzc2V0cy9QTkcvRGFtYWdlL2V4cGxvZGUuZ2lmJztcbiAgICB9XG59O1xuXG5TcGFjZXNoaXAucHJvdG90eXBlLmRlYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5kYW1hZ2UgPSA0O1xuICAgIHRoaXMuZGFtYWdlSW1hZ2Uuc3JjID0gJy4uL2Fzc2V0cy9QTkcvRGFtYWdlL2V4cGxvZGUuZ2lmJztcbn07XG5cblNwYWNlc2hpcC5wcm90b3R5cGUuZGVjcmVhc2VEYW1hZ2UgPSBmdW5jdGlvbigpe1xuICAgIGlmKHRoaXMuZGFtYWdlID4gMCl7XG4gICAgICAgIHRoaXMuZGFtYWdlIC09IDE7XG4gICAgfVxuXG4gICAgaWYodGhpcy5kYW1hZ2UgPD0gMyAmJiB0aGlzLmRhbWFnZSA+IDApe1xuICAgICAgICB0aGlzLmRhbWFnZUltYWdlLnNyYyA9ICcuLi9hc3NldHMvUE5HL0RhbWFnZS9wbGF5ZXJTaGlwMV9kYW1hZ2UnKyB0aGlzLmRhbWFnZSArICcucG5nJztcbiAgICB9XG59O1xuXG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgTWljaGllbCBvbiAxNi8xMi8yMDE1LlxuICovXG4vKipcbiAqIENyZWF0ZWQgYnkganVzdGlqbmRlcG92ZXIgb24gMTYvMTIvMTUuXG4gKi9cblxuXG4oZnVuY3Rpb24oKXtcbiAgICB2YXIgZGlzcGxheVNlcnZpY2UgPSBmdW5jdGlvbigpe1xuICAgICAgICAvL0xvZ2luIENvbnRyb2xsZXJcbiAgICAgICAgdmFyIExDU2hvdyA9IHRydWU7XG4gICAgICAgIC8vUGxheSBjb250cm9sbGVyXG4gICAgICAgIHZhciBQQ1Nob3cgPSBmYWxzZTtcblxuICAgICAgICByZXR1cm57XG4gICAgICAgICAgICBnZXRMQ1Nob3c6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIExDU2hvdztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXRMQ1Nob3c6IGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAgICAgICAgICAgICBMQ1Nob3cgPSB2YWx1ZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXRQQ1Nob3c6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFBDU2hvdztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXRQQ1Nob3c6IGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAgICAgICAgICAgICBQQ1Nob3cgPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuZmFjdG9yeSgnZGlzcGxheVNlcnZpY2UnLCBbZGlzcGxheVNlcnZpY2VdKTtcbn0pKCk7IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGp1c3Rpam5kZXBvdmVyIG9uIDE3LzEyLzE1LlxuICovXG5cbihmdW5jdGlvbigpe1xuICAgIHZhciBwbGF5ZXJTZXJ2aWNlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgLy9Mb2dpbiBDb250cm9sbGVyXG4gICAgICAgIHZhciBwbGF5ZXJzID0gW107XG5cbiAgICAgICAgcmV0dXJue1xuICAgICAgICAgICAgZ2V0UGxheWVyczogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGxheWVycztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXRQbGF5ZXJzOiBmdW5jdGlvbihwbGF5ZXJzQXJyYXkpe1xuICAgICAgICAgICAgICAgIHBsYXllcnMgPSBwbGF5ZXJzQXJyYXk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmZhY3RvcnkoJ3BsYXllclNlcnZpY2UnLCBbcGxheWVyU2VydmljZV0pO1xufSkoKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkganVzdGlqbmRlcG92ZXIgb24gMDkvMTIvMTUuXG4gKi9cblxuKGZ1bmN0aW9uKCl7XG5cbiAgICB2YXIgc29ja2V0U2VydmljZSA9IGZ1bmN0aW9uKCRyb290U2NvcGUpe1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgLy9wcml2YXRlXG4gICAgICAgIHZhciBzb2NrZXQgPSBpby5jb25uZWN0KHdpbmRvdy5sb2NhdGlvbi5ob3N0KTtcbiAgICAgICAgLy9mdW5jdGlvbnNcbiAgICAgICAgdmFyIG9uID0gZnVuY3Rpb24gKGV2ZW50TmFtZSwgY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHNvY2tldC5vbihldmVudE5hbWUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KHNvY2tldCwgYXJncyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgZW1pdCA9IGZ1bmN0aW9uIChldmVudE5hbWUsIGRhdGEsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICBzb2NrZXQuZW1pdChldmVudE5hbWUsIGRhdGEsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkoc29ja2V0LCBhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfTtcblxuICAgICAgICAvL3B1YmxpY1xuICAgICAgICByZXR1cm57XG4gICAgICAgICAgICBvbjogb24sXG4gICAgICAgICAgICBlbWl0OiBlbWl0LFxuICAgICAgICAgICAgc29ja2V0OiBzb2NrZXRcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5mYWN0b3J5KFwic29ja2V0U2VydmljZVwiLCBbXCIkcm9vdFNjb3BlXCIsIHNvY2tldFNlcnZpY2VdKTtcblxufSkoKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
