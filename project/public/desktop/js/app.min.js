!function(){angular.module("app",[])}(),function(){var t=function(t,e,a,i){t.LCShow=a.getLCShow;var o=function(){e.emit("pcconnect",null)};t.room="",e.on("requestRoom",function(e){t.room=e}),e.on("deviceOrientation",function(t){var e=(t.username,{});e.gamma=t.gamma,e.beta=t.beta,e.alpha=t.alpha}),t.usernames={},t.checkUserCount=!1,e.on("updateusers",function(e){i.setPlayers(e),t.usernames=e,t.checkUserCount=Object.keys(t.usernames).length<0}),t.startGame=function(){e.emit("startGame",null),a.setLCShow(!1),a.setPCShow(!0)},function(){o()}()};angular.module("app").controller("loginController",["$scope","socketService","displayService","playerService",t])}(),function(){"use strict";var t=function(t,e,a,i,o,r){function n(t,e){return e.username==t.userName}function s(){p.clearRect(0,0,c.width,c.height);var t=c.width/100;if(0!=f.length){var e=c.width/100,a=e*f[0].image.height/f[0].image.width;for(var i in f){var o=f[i];o.width=e,o.height=a,0==o.explodeStage?(p.save(),p.translate(o.x*t,o.y*t),p.rotate(o.rotation/180*Math.PI),p.drawImage(o.image,-e/2,-a/2,e,a),p.restore(),f[i].x=Math.cos((o.rotation-90)/180*Math.PI)+o.x,f[i].y=Math.sin((o.rotation-90)/180*Math.PI)+o.y):o.explodeStage<4&&(console.log(o.explosionImage),p.save(),p.translate(o.x*t,o.y*t),p.drawImage(o.explosionImage,-e,-e,2*e,2*e),p.restore())}}if(0!=u.length){var r=c.width/20,n=r*u[0].image.height/u[0].image.width;for(var s in u){var l=u[s];l.width=r,l.height=n,p.save(),p.translate(l.x*t,l.y*t),p.rotate(l.rotation/180*Math.PI),p.drawImage(l.image,-r/2,-n/2,r,n),l.damage>0&&p.drawImage(l.damageImage,-r/2,-n/2,r,n),p.restore(),l.damage<4&&(u[s].x=Math.cos((l.rotation-90)/180*Math.PI)/10*l.speed+l.x,u[s].y=Math.sin((l.rotation-90)/180*Math.PI)/10*l.speed+l.y)}}if(w.length>0)for(var g in w){var m=w[g];if(m.width=c.width/700*m.image.width,m.height=m.width*m.image.height/m.image.width,p.save(),p.translate(m.x*t,m.y*t),p.rotate(m.rotation/180*Math.PI),p.drawImage(m.image,-m.width/2,-m.height/2,m.width,m.height),p.restore(),m.x<-5||m.x>105||m.y<-5||m.y>105){var y=Math.random();.25>y?(w[g].x=-4,w[g].y=Math.floor(100*Math.random()),w[g].rotation=Math.floor(180*Math.random())):.5>y?(w[g].x=Math.floor(100*Math.random()),w[g].y=-4,w[g].rotation=Math.floor(180*Math.random())+90):.75>y?(w[g].x=104,w[g].y=Math.floor(100*Math.random()),w[g].rotation=Math.floor(180*Math.random())+180):(w[g].x=Math.floor(100*Math.random()),w[g].y=104,w[g].rotation=Math.floor(180*Math.random())+270),w[g].setImage(Math.ceil(18*Math.random()))}else w[g].x=Math.cos((m.rotation-90)/180*Math.PI)/30+m.x,w[g].y=Math.sin((m.rotation-90)/180*Math.PI)/30+m.y}h(),d()}function h(){for(var t in f)f[t].x<0||f[t].x>c.width||f[t].y<0||f[t].y>c.height?f.splice(t,1):f[t].explodeStage>0&&(f[t].explodeStage<4?f[t].explode():f.splice(t,1))}function d(){var t=[];for(var e in u){u[e].damage<4&&t.push(u[e]);for(var a in f)if(0==f[a].explodeStage&&f[a].player!=u[e].userName){var o=Math.sqrt(2)/2*(f[a].height/2-f[a].width/2),r=(360-f[a].rotation)/180*Math.PI,n=f[a].x*c.width/100-o*Math.sin(r),s=f[a].y*c.width/100-o*Math.cos(r),h=u[e].x*c.width/100,d=u[e].y*c.width/100,g=Math.sqrt((n-h)*(n-h)+(s-d)*(s-d));if(g<f[a].width/2+u[e].width/2){var m=new Audio("../../assets/Bonus/sfx_lose.ogg");m.play(),u[e].increaseDamage();var p={};p.username=u[e].userName,p.life=3-u[e].damage,i.emit("playerLife",p),f[a].explode()}}for(var y in w){var v=w[y].x*c.width/100,x=w[y].y*c.width/100,h=u[e].x*c.width/100,d=u[e].y*c.width/100,g=Math.sqrt((v-h)*(v-h)+(x-d)*(x-d));if(g<w[y].width/2+u[e].width/2){var m=new Audio("../../assets/Bonus/sfx_lose.ogg");m.play(),u[e].dead();var p={};p.username=u[e].userName,p.life=3-u[e].damage,i.emit("playerLife",p)}}for(var y in u)if(y!=e){var M=u[y].x*c.width/100,S=u[y].y*c.width/100,h=u[e].x*c.width/100,d=u[e].y*c.width/100,g=Math.sqrt((M-h)*(M-h)+(S-d)*(S-d));if(g<u[y].width/2+u[e].width/2){var m=new Audio("../../assets/Bonus/sfx_lose.ogg");m.play(),u[e].dead(),u[y].dead();var p={};p.username=u[e].userName,p.life=3-u[e].damage,i.emit("playerLife",p),p.username=u[y].userName,p.life=3-u[y].damage,i.emit("playerLife",p)}}if(u[e].x*c.width/100<u[e].height/2||u[e].x*c.width/100>c.width-u[e].height/2||u[e].y*c.width/100<u[e].height/2||u[e].y*c.width/100>c.width-u[e].height/2){var m=new Audio("../../assets/Bonus/sfx_lose.ogg");m.play(),u[e].dead();var p={};p.username=u[e].userName,p.life=3-u[e].damage,i.emit("playerLife",p)}}for(var y in w)for(var a in f)if(0==f[a].explodeStage&&f[a].player!=w[y].userName){var o=Math.sqrt(2)/2*(f[a].height/2-f[a].width/2),r=(360-f[a].rotation)/180*Math.PI,n=f[a].x*c.width/100-o*Math.sin(r),s=f[a].y*c.width/100-o*Math.cos(r),v=w[y].x*c.width/100,x=w[y].y*c.width/100,g=Math.sqrt((n-v)*(n-v)+(s-x)*(s-x));if(g<f[a].width/2+w[y].width/2){var m=new Audio("../../assets/Bonus/sfx_lose.ogg");m.play();var p={};p.username=w[y].userName,p.life=3-w[y].damage,i.emit("playerLife",p),f[a].explode()}}1==t.length&&l(t)}function l(a){angular.isDefined(m)&&(e.cancel(m),m=void 0),t.endGame=!0,t.endGameText=a[0].userName+" is the winner!",i.emit("endGame",a[0].userName)}var g=[{x:10,y:10,rotation:135},{x:90,y:10,rotation:225},{x:90,y:90,rotation:315},{x:10,y:90,rotation:45}];t.PCShow=o.getPCShow,t.endGame=!1;var m,c=document.getElementById("game"),p=c.getContext("2d"),u=new Array,f=new Array,w=new Array;i.on("initGame",function(){var t=r.getPlayers(),a=0;for(var i in t){var o=t[i];u.push(new Spaceship(o.username,g[a].x,g[a].y,o.color,g[a].rotation)),a++}for(var n=0;15>n;n++)w.push(new Asteroid(Math.floor(100*Math.random()),Math.floor(100*Math.random()),Math.floor(361*Math.random()),Math.ceil(18*Math.random())));m=e(s,10)}),i.on("userleft",function(t){var e=null;for(var a in u)1==n(u[a],t)&&(e=a);u.splice(e,1)}),i.on("updateGameData",function(t){var e=null;for(var a in u)1==n(u[a],t)&&(e=a);null!=e&&u[e].rotateSpaceshipRelative(t.orientation)}),i.on("playerShot",function(e){if(0==t.endGame){var a=null;for(var i in u)1==n(u[i],e)&&(a=i);if(null!=a){var o=u[a],r=(360-(o.rotation+180))/180*Math.PI,s=o.x+c.width/400*Math.sin(r),h=o.y+c.width/400*Math.cos(r);f.push(new Bullet(s,h,o.rotation,o.color,o.userName));var d="../../assets/Bonus/sfx_laser2.ogg";a%2==0&&(d="../../assets/Bonus/sfx_laser1.ogg");var l=new Audio(d);l.play()}}}),t.restartGame=function(){t.endGame=!1;var a=0;for(var o in u)u[o].reset(g[a].x,g[a].y,g[a].rotation),a++;w=[];for(var r=0;15>r;r++)w.push(new Asteroid(Math.floor(100*Math.random()),Math.floor(100*Math.random()),Math.floor(361*Math.random()),Math.ceil(18*Math.random())));p.clearRect(0,0,c.width,c.height),i.emit("restartGame",null),m=e(s,10)}};angular.module("app").controller("playController",["$scope","$interval","$window","socketService","displayService","playerService",t])}(),function(){var t=function(t){function e(e,a,i){t.innerWidth<t.innerHeight?e.width=t.innerWidth-20:e.width=t.innerHeight-20,angular.element(t).bind("resize",function(){t.innerWidth<t.innerHeight?e.width=t.innerWidth-20:e.width=t.innerHeight-20,e.$digest()})}return{restrict:"E",link:e,replace:!0,template:'<canvas id="game" class="playArea" width="{{width}}" height="{{width}}" />'}};angular.module("app").directive("canvasDirective",["$window",t])}();var Asteroid=function(t,e,a,i){this.x=t,this.y=e,this.width=0,this.height=0,this.rotation=a,this.stage=i,this.image=new Image,this.image.src="../assets/PNG/Meteors/meteor_"+i+".png"};Asteroid.prototype.setImage=function(t){this.stage=t,this.image.src="../assets/PNG/Meteors/meteor_"+t+".png"};var Bullet=function(t,e,a,i,o){this.x=t,this.y=e,this.rotation=a,this.image=new Image,this.color=i,this.width=0,this.height=0,this.player=o,this.explosionImage=new Image,this.explodeStage=0,"orange"==this.color&&(this.color="red"),this.image.src="../assets/PNG/Lasers/laser"+this.color.charAt(0).toUpperCase()+this.color.slice(1)+"01.png"};Bullet.prototype.explode=function(){if(this.explodeStage<4){this.explodeStage++;var t;t=this.explodeStage<3?1:2,this.explosionImage.src="../assets/PNG/Lasers/laser"+this.color.charAt(0).toUpperCase()+this.color.slice(1)+"Explode"+t+".png"}else this.explosionImage.src=""};var Spaceship=function(t,e,a,i,o){this.userName=t,this.x=e,this.y=a,this.speed=1,this.color=i,this.rotation=o,this.image=new Image,this.damage=0,this.width=0,this.height=0,this.damageImage=new Image,this.image.src="../assets/PNG/playerShip1_"+this.color+".png"};Spaceship.prototype.reset=function(t,e,a){this.speed=1,this.damage=0,this.damageImage=new Image,this.image.src="../assets/PNG/playerShip1_"+this.color+".png",this.x=t,this.y=e,this.rotation=a},Spaceship.prototype.moveSpaceship=function(t,e){this.x=t,this.y=e},Spaceship.prototype.moveSpaceshipRelative=function(t,e){this.x=this.x+t,this.y=this.y+e},Spaceship.prototype.rotateSpaceship=function(t){this.rotation=t},Spaceship.prototype.rotateSpaceshipRelative=function(t){t>80?t=80:-80>t&&(t=-80),this.rotation=this.rotation+t/5,this.rotation<-360&&(this.rotation=this.rotation+720),this.rotation>360&&(this.rotation=this.rotation-720)},Spaceship.prototype.increaseDamage=function(){this.damage<4&&(this.damage+=1),this.damage<=3&&this.damage>0?this.damageImage.src="../assets/PNG/Damage/playerShip1_damage"+this.damage+".png":4==this.damage&&(this.damageImage.src="../assets/PNG/Damage/explode.gif")},Spaceship.prototype.dead=function(){this.damage=4,this.damageImage.src="../assets/PNG/Damage/explode.gif"},Spaceship.prototype.decreaseDamage=function(){this.damage>0&&(this.damage-=1),this.damage<=3&&this.damage>0&&(this.damageImage.src="../assets/PNG/Damage/playerShip1_damage"+this.damage+".png")},function(){var t=function(){var t=!0,e=!1;return{getLCShow:function(){return t},setLCShow:function(e){t=e},getPCShow:function(){return e},setPCShow:function(t){e=t}}};angular.module("app").factory("displayService",[t])}(),function(){var t=function(){var t=[];return{getPlayers:function(){return t},setPlayers:function(e){t=e}}};angular.module("app").factory("playerService",[t])}(),function(){var t=function(t){"use strict";var e=io.connect(window.location.host),a=function(a,i){e.on(a,function(){var a=arguments;t.$apply(function(){i.apply(e,a)})})},i=function(a,i,o){e.emit(a,i,function(){var a=arguments;t.$apply(function(){o&&o.apply(e,a)})})};return{on:a,emit:i,socket:e}};angular.module("app").factory("socketService",["$rootScope",t])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNvbnRyb2xsZXIvbG9naW5Db250cm9sbGVyLmpzIiwiY29udHJvbGxlci9wbGF5Q29udHJvbGxlci5qcyIsImRpcmVjdGl2ZXMvY2FudmFzRGlyZWN0aXZlLmpzIiwibW9kZWxzL2FzdGVyaW9kLmpzIiwibW9kZWxzL0J1bGxldC5qcyIsIm1vZGVscy9TcGFjZXNoaXAuanMiLCJzZXJ2aWNlcy9kaXNwbGF5U2VydmljZS5qcyIsInNlcnZpY2VzL3BsYXllclNlcnZpY2UuanMiLCJzZXJ2aWNlcy9zb2NrZXRTZXJ2aWNlLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJsb2dpbkNvbnRyb2xsZXIiLCIkc2NvcGUiLCJzb2NrZXRTZXJ2aWNlIiwiZGlzcGxheVNlcnZpY2UiLCJwbGF5ZXJTZXJ2aWNlIiwiTENTaG93IiwiZ2V0TENTaG93IiwibWFrZVJvb20iLCJlbWl0Iiwicm9vbSIsIm9uIiwiZGF0YSIsImRldmljZU9yaWVudGF0aW9uIiwidXNlcm5hbWUiLCJnYW1tYSIsImJldGEiLCJhbHBoYSIsInVzZXJuYW1lcyIsImNoZWNrVXNlckNvdW50Iiwic2V0UGxheWVycyIsIk9iamVjdCIsImtleXMiLCJsZW5ndGgiLCJzdGFydEdhbWUiLCJzZXRMQ1Nob3ciLCJzZXRQQ1Nob3ciLCJjb250cm9sbGVyIiwicGxheUNvbnRyb2xsZXIiLCIkaW50ZXJ2YWwiLCIkd2luZG93IiwiZmlsdGVyUGxheWVycyIsIm9iaiIsInVzZXJOYW1lIiwiZHJhdyIsImN0eCIsImNsZWFyUmVjdCIsImNhbnYiLCJ3aWR0aCIsImhlaWdodCIsInJhdGlvIiwiQWxsQnVsbGV0cyIsIkJ1bGxldFdpZHRoIiwiQnVsbGV0SGVpZ2h0IiwiaW1hZ2UiLCJidWxsZXQiLCJiIiwiZXhwbG9kZVN0YWdlIiwic2F2ZSIsInRyYW5zbGF0ZSIsIngiLCJ5Iiwicm90YXRlIiwicm90YXRpb24iLCJNYXRoIiwiUEkiLCJkcmF3SW1hZ2UiLCJyZXN0b3JlIiwiY29zIiwic2luIiwiY29uc29sZSIsImxvZyIsImV4cGxvc2lvbkltYWdlIiwiQWxsUGxheWVycyIsIlNwYWNlc2hpcFdpZHRoIiwiU3BhY2VzaGlwSGVpZ2h0IiwicGxheWVyIiwicCIsImRhbWFnZSIsImRhbWFnZUltYWdlIiwic3BlZWQiLCJBbGxBc3Rlcm9pZHMiLCJBc3Rlcm9pZCIsImEiLCJrZXV6ZSIsInJhbmRvbSIsImZsb29yIiwic2V0SW1hZ2UiLCJjZWlsIiwiY2hlY2tCdWxsZXRzIiwiY29sbGlzaW9uRGV0ZWN0aW9uIiwic3BsaWNlIiwiZXhwbG9kZSIsImxpdmluZ1BsYXllcnMiLCJwdXNoIiwicmFkaXVzIiwic3FydCIsImFuZ2xlIiwiYnVsbGV0SGVhZFgiLCJidWxsZXRIZWFkWSIsInNwYWNlU2hpcFgiLCJzcGFjZVNoaXBZIiwiZGlzdGFuY2UiLCJkYW1hZ2Vzb3VuZCIsIkF1ZGlvIiwicGxheSIsImluY3JlYXNlRGFtYWdlIiwibGlmZSIsImFzdGVyb2lkWCIsImFzdGVyb2lkWSIsImRlYWQiLCJzcGFjZVNoaXAxWCIsInNwYWNlU2hpcDFZIiwiZW5kR2FtZSIsImlzRGVmaW5lZCIsImN5Y2xlIiwiY2FuY2VsIiwidW5kZWZpbmVkIiwiZW5kR2FtZVRleHQiLCJkZWZhdWx0VmFycyIsIlBDU2hvdyIsImdldFBDU2hvdyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJnZXRDb250ZXh0IiwiQXJyYXkiLCJCdWZmZXJQbGF5ZXIiLCJnZXRQbGF5ZXJzIiwidGVsbGVyIiwiU3BhY2VzaGlwIiwiY29sb3IiLCJpIiwicm90YXRlU3BhY2VzaGlwUmVsYXRpdmUiLCJvcmllbnRhdGlvbiIsInRlbXAiLCJCdWxsZXQiLCJhdWRpb1VybCIsInNob3QiLCJyZXN0YXJ0R2FtZSIsInJlc2V0IiwiY2FudmFzRGlyZWN0aXZlIiwibGluayIsInNjb3BlIiwiZWxlbWVudCIsImF0dHJzIiwiaW5uZXJXaWR0aCIsImlubmVySGVpZ2h0IiwiYmluZCIsIiRkaWdlc3QiLCJyZXN0cmljdCIsInJlcGxhY2UiLCJ0ZW1wbGF0ZSIsImRpcmVjdGl2ZSIsInN0YWdlIiwidGhpcyIsIkltYWdlIiwic3JjIiwicHJvdG90eXBlIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJzbGljZSIsIm51bWJlciIsIm1vdmVTcGFjZXNoaXAiLCJtb3ZlU3BhY2VzaGlwUmVsYXRpdmUiLCJyb3RhdGVTcGFjZXNoaXAiLCJkZWdyZWUiLCJkZWNyZWFzZURhbWFnZSIsInZhbHVlIiwiZmFjdG9yeSIsInBsYXllcnMiLCJwbGF5ZXJzQXJyYXkiLCIkcm9vdFNjb3BlIiwic29ja2V0IiwiaW8iLCJjb25uZWN0Iiwid2luZG93IiwibG9jYXRpb24iLCJob3N0IiwiZXZlbnROYW1lIiwiY2FsbGJhY2siLCJhcmdzIiwiYXJndW1lbnRzIiwiJGFwcGx5IiwiYXBwbHkiXSwibWFwcGluZ3MiOiJDQUdBLFdBRUFBLFFBQUFDLE9BQUEsYUNEQSxXQUNBLEdBQUFDLEdBQUEsU0FBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0FFQUgsRUFBQUksT0FBQUYsRUFBQUcsU0FHQSxJQUFBQyxHQUFBLFdBQ0FMLEVBQUFNLEtBQUEsWUFBQSxNQUVBUCxHQUFBUSxLQUFBLEdBQ0FQLEVBQUFRLEdBQUEsY0FBQSxTQUFBQyxHQUNBVixFQUFBUSxLQUFBRSxJQUVBVCxFQUFBUSxHQUFBLG9CQUFBLFNBQUFDLEdBQ0EsR0FDQUMsSUFEQUQsRUFBQUUsWUFFQUQsR0FBQUUsTUFBQUgsRUFBQUcsTUFDQUYsRUFBQUcsS0FBQUosRUFBQUksS0FDQUgsRUFBQUksTUFBQUwsRUFBQUssUUFFQWYsRUFBQWdCLGFBQ0FoQixFQUFBaUIsZ0JBQUEsRUFDQWhCLEVBQUFRLEdBQUEsY0FBQSxTQUFBQyxHQUNBUCxFQUFBZSxXQUFBUixHQUNBVixFQUFBZ0IsVUFBQU4sRUFDQVYsRUFBQWlCLGVBQUFFLE9BQUFDLEtBQUFwQixFQUFBZ0IsV0FBQUssT0FBQSxJQUdBckIsRUFBQXNCLFVBQUEsV0FDQXJCLEVBQUFNLEtBQUEsWUFBQSxNQUNBTCxFQUFBcUIsV0FBQSxH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QUEsU0FBQW1JLEdBQ0EvQyxFQUFBK0MsSUFLQTlKLFNBQUFDLE9BQUEsT0FBQThKLFFBQUEsa0JBQUExSixPQzNCQSxXQUNBLEdBQUFDLEdBQUEsV0FFQSxHQUFBMEosS0FFQSxRQUNBMUMsV0FBQSxXQUNBLE1BQUEwQyxJQUVBM0ksV0FBQSxTQUFBNEksR0FDQUQsRUFBQUMsSUFLQWpLLFNBQUFDLE9BQUEsT0FBQThKLFFBQUEsaUJBQUF6SixPQ2ZBLFdBRUEsR0FBQUYsR0FBQSxTQUFBOEosR0FDQSxZQUVBLElBQUFDLEdBQUFDLEdBQUFDLFFBQUFDLE9BQUFDLFNBQUFDLE1BRUE1SixFQUFBLFNBQUE2SixFQUFBQyxHQUNBUCxFQUFBdkosR0FBQTZKLEVBQUEsV0FDQSxHQUFBRSxHQUFBQyxTQUNBVixHQUFBVyxPQUFBLFdBQ0FILEVBQUFJLE1BQUFYLEVBQUFRLFFBS0FqSyxFQUFBLFNBQUErSixFQUFBNUosRUFBQTZKLEdBQ0FQLEVBQUF6SixLQUFBK0osRUFBQTVKLEVBQUEsV0FDQSxHQUFBOEosR0FBQUMsU0FDQVYsR0FBQVcsT0FBQSxXQUNBSCxHQUNBQSxFQUFBSSxNQUFBWCxFQUFBUSxPQU9BLFFBQ0EvSixHQUFBQSxFQUNBRixLQUFBQSxFQUNBeUosT0FBQUEsR0FJQW5LLFNBQUFDLE9BQUEsT0FBQThKLFFBQUEsaUJBQUEsYUFBQTNKIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENyZWF0ZWQgYnkgTWljaGllbCBvbiAyNS8xMS8yMDE1LlxuICovXG4oZnVuY3Rpb24oKXtcblxuICAgIHZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZShcImFwcFwiLFtdKTtcbn0pKCk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgTWljaGllbCBvbiAxMS8xMi8yMDE1LlxyXG4gKi9cclxuXHJcbihmdW5jdGlvbigpe1xyXG4gICAgdmFyIGxvZ2luQ29udHJvbGxlciA9IGZ1bmN0aW9uKCRzY29wZSwgc29ja2V0U2VydmljZSwgZGlzcGxheVNlcnZpY2UsIHBsYXllclNlcnZpY2Upe1xyXG5cclxuICAgICAgICAkc2NvcGUuTENTaG93ID0gZGlzcGxheVNlcnZpY2UuZ2V0TENTaG93O1xyXG5cclxuICAgICAgICAvL2Z1bmN0aW9uc1xyXG4gICAgICAgIHZhciBtYWtlUm9vbSA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHNvY2tldFNlcnZpY2UuZW1pdChcInBjY29ubmVjdFwiLCBudWxsKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgICRzY29wZS5yb29tID0gXCJcIjtcclxuICAgICAgICBzb2NrZXRTZXJ2aWNlLm9uKCdyZXF1ZXN0Um9vbScsZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgICAgICRzY29wZS5yb29tID0gZGF0YTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBzb2NrZXRTZXJ2aWNlLm9uKCdkZXZpY2VPcmllbnRhdGlvbicsIGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgICAgICB2YXIgdXNlcm5hbWUgPSBkYXRhLnVzZXJuYW1lO1xyXG4gICAgICAgICAgICB2YXIgZGV2aWNlT3JpZW50YXRpb24gPSB7fTtcclxuICAgICAgICAgICAgZGV2aWNlT3JpZW50YXRpb24uZ2FtbWEgPSBkYXRhLmdhbW1hO1xyXG4gICAgICAgICAgICBkZXZpY2VPcmllbnRhdGlvbi5iZXRhID0gZGF0YS5iZXRhO1xyXG4gICAgICAgICAgICBkZXZpY2VPcmllbnRhdGlvbi5hbHBoYSA9IGRhdGEuYWxwaGE7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJHNjb3BlLnVzZXJuYW1lcyA9IHt9O1xyXG4gICAgICAgICRzY29wZS5jaGVja1VzZXJDb3VudCA9IGZhbHNlO1xyXG4gICAgICAgIHNvY2tldFNlcnZpY2Uub24oJ3VwZGF0ZXVzZXJzJywgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgcGxheWVyU2VydmljZS5zZXRQbGF5ZXJzKGRhdGEpO1xyXG4gICAgICAgICAgICAkc2NvcGUudXNlcm5hbWVzID0gZGF0YTtcclxuICAgICAgICAgICAgJHNjb3BlLmNoZWNrVXNlckNvdW50ID0gT2JqZWN0LmtleXMoJHNjb3BlLnVzZXJuYW1lcykubGVuZ3RoIDwgMDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnN0YXJ0R2FtZT0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBzb2NrZXRTZXJ2aWNlLmVtaXQoXCJzdGFydEdhbWVcIiwgbnVsbCk7XHJcbiAgICAgICAgICAgIGRpc3BsYXlTZXJ2aWNlLnNldExDU2hvdyhmYWxzZSk7XHJcbiAgICAgICAgICAgIGRpc3BsYXlTZXJ2aWNlLnNldFBDU2hvdyh0cnVlKTtcclxuICAgICAgICB9O1xyXG5cclxuXHJcbiAgICAgICAgKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBtYWtlUm9vbSgpO1xyXG4gICAgICAgIH0pKCk7XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5jb250cm9sbGVyKFwibG9naW5Db250cm9sbGVyXCIsIFtcIiRzY29wZVwiLCBcInNvY2tldFNlcnZpY2VcIiAsIFwiZGlzcGxheVNlcnZpY2VcIiwgXCJwbGF5ZXJTZXJ2aWNlXCIsIGxvZ2luQ29udHJvbGxlcl0pO1xyXG59KSgpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IE1pY2hpZWwgb24gMTYvMTIvMjAxNS5cclxuICovXHJcblxyXG4oZnVuY3Rpb24oKXtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG4gICAgdmFyIHBsYXlDb250cm9sbGVyID0gZnVuY3Rpb24oJHNjb3BlLCAkaW50ZXJ2YWwsICR3aW5kb3csIHNvY2tldFNlcnZpY2UsIGRpc3BsYXlTZXJ2aWNlLCBwbGF5ZXJTZXJ2aWNlKXtcclxuICAgICAgICB2YXIgZGVmYXVsdFZhcnMgPSBbe3g6MTAsIHk6MTAscm90YXRpb246MTM1fSx7eDo5MCwgeToxMCxyb3RhdGlvbjoyMjV9LHt4OjkwLCB5OjkwLHJvdGF0aW9uOjMxNX0se3g6MTAsIHk6OTAscm90YXRpb246NDV9XTtcclxuICAgICAgICAkc2NvcGUuUENTaG93ID0gZGlzcGxheVNlcnZpY2UuZ2V0UENTaG93O1xyXG4gICAgICAgICRzY29wZS5lbmRHYW1lID0gZmFsc2U7XHJcbiAgICAgICAgdmFyIGNhbnYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2FtZScpO1xyXG4gICAgICAgIHZhciBjdHggPSBjYW52LmdldENvbnRleHQoJzJkJyk7XHJcblxyXG4gICAgICAgIHZhciBBbGxQbGF5ZXJzID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgdmFyIEFsbEJ1bGxldHMgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICB2YXIgQWxsQXN0ZXJvaWRzID0gbmV3IEFycmF5KCk7XHJcblxyXG4gICAgICAgIHZhciBjeWNsZTtcclxuXHJcbiAgICAgICAgc29ja2V0U2VydmljZS5vbihcImluaXRHYW1lXCIsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHZhciBCdWZmZXJQbGF5ZXIgPSBwbGF5ZXJTZXJ2aWNlLmdldFBsYXllcnMoKTtcclxuICAgICAgICAgICAgdmFyIHRlbGxlcj0gMDtcclxuICAgICAgICAgICAgZm9yKHZhciBwbGF5ZXIgaW4gQnVmZmVyUGxheWVyKXtcclxuICAgICAgICAgICAgICAgIHZhciBwID0gQnVmZmVyUGxheWVyW3BsYXllcl07XHJcbiAgICAgICAgICAgICAgICBBbGxQbGF5ZXJzLnB1c2gobmV3IFNwYWNlc2hpcChwLnVzZXJuYW1lLCBkZWZhdWx0VmFyc1t0ZWxsZXJdLngsIGRlZmF1bHRWYXJzW3RlbGxlcl0ueSwgcC5jb2xvciwgZGVmYXVsdFZhcnNbdGVsbGVyXS5yb3RhdGlvbikpO1xyXG4gICAgICAgICAgICAgICAgdGVsbGVyKys7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGk8MTU7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICBBbGxBc3Rlcm9pZHMucHVzaChuZXcgQXN0ZXJvaWQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjEwMCksIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoxMDApLCBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMzYxKSwgTWF0aC5jZWlsKE1hdGgucmFuZG9tKCkqMTgpKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICBjeWNsZSA9ICRpbnRlcnZhbChkcmF3LCAxMCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHNvY2tldFNlcnZpY2Uub24oXCJ1c2VybGVmdFwiLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICB2YXIgcCA9IG51bGw7XHJcbiAgICAgICAgICAgIGZvcih2YXIgaSBpbiBBbGxQbGF5ZXJzKXtcclxuICAgICAgICAgICAgICAgIGlmKGZpbHRlclBsYXllcnMoQWxsUGxheWVyc1tpXSxkYXRhKSA9PSB0cnVlKXtcclxuICAgICAgICAgICAgICAgICAgICBwID0gaTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBBbGxQbGF5ZXJzLnNwbGljZShwLDEpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBzb2NrZXRTZXJ2aWNlLm9uKFwidXBkYXRlR2FtZURhdGFcIiwgZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgICAgIHZhciBwID0gbnVsbDtcclxuICAgICAgICAgICAgZm9yKHZhciBpIGluIEFsbFBsYXllcnMpe1xyXG4gICAgICAgICAgICAgICAgaWYoZmlsdGVyUGxheWVycyhBbGxQbGF5ZXJzW2ldLGRhdGEpID09IHRydWUpe1xyXG4gICAgICAgICAgICAgICAgICAgIHAgPSBpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKHAgIT0gbnVsbCl7XHJcbiAgICAgICAgICAgICAgICBBbGxQbGF5ZXJzW3BdLnJvdGF0ZVNwYWNlc2hpcFJlbGF0aXZlKGRhdGEub3JpZW50YXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHNvY2tldFNlcnZpY2Uub24oXCJwbGF5ZXJTaG90XCIsIGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgICAgICBpZigkc2NvcGUuZW5kR2FtZT09ZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIHZhciBwID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgaW4gQWxsUGxheWVycykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWx0ZXJQbGF5ZXJzKEFsbFBsYXllcnNbaV0sIGRhdGEpID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcCA9IGk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHAgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gQWxsUGxheWVyc1twXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYW5nbGUgPSAoMzYwIC0gKHRlbXAucm90YXRpb24gKyAxODApKSAvIDE4MCAqIE1hdGguUEk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHggPSB0ZW1wLnggKyAoY2Fudi53aWR0aCAvIDQwMCAqIE1hdGguc2luKGFuZ2xlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHkgPSB0ZW1wLnkgKyAoY2Fudi53aWR0aCAvIDQwMCAqIE1hdGguY29zKGFuZ2xlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgQWxsQnVsbGV0cy5wdXNoKG5ldyBCdWxsZXQoeCwgeSwgdGVtcC5yb3RhdGlvbiwgdGVtcC5jb2xvciwgdGVtcC51c2VyTmFtZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhdWRpb1VybCA9ICcuLi8uLi9hc3NldHMvQm9udXMvc2Z4X2xhc2VyMi5vZ2cnO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwICUgMiA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1ZGlvVXJsID0gJy4uLy4uL2Fzc2V0cy9Cb251cy9zZnhfbGFzZXIxLm9nZyc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzaG90ID0gbmV3IEF1ZGlvKGF1ZGlvVXJsKTtcclxuICAgICAgICAgICAgICAgICAgICBzaG90LnBsYXkoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBmaWx0ZXJQbGF5ZXJzKG9iaixkYXRhKXtcclxuICAgICAgICAgICAgcmV0dXJuIGRhdGEudXNlcm5hbWUgPT0gb2JqLnVzZXJOYW1lO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZHJhdygpe1xyXG4gICAgICAgICAgICAvKmlmKEFsbFBsYXllcnMubGVuZ3RoPjApe1xyXG4gICAgICAgICAgICAgICAgQWxsUGxheWVyc1swXS5zcGVlZCA9IDA7XHJcbiAgICAgICAgICAgICAgICBBbGxQbGF5ZXJzWzFdLnNwZWVkID0gMDtcclxuICAgICAgICAgICAgfSovXHJcbiAgICAgICAgICAgIGN0eC5jbGVhclJlY3QoMCwwLGNhbnYud2lkdGgsIGNhbnYuaGVpZ2h0KTtcclxuICAgICAgICAgICAgdmFyIHJhdGlvID0gY2Fudi53aWR0aC8xMDA7XHJcblxyXG4gICAgICAgICAgICBpZihBbGxCdWxsZXRzLmxlbmd0aCAhPSAwKXtcclxuICAgICAgICAgICAgICAgIHZhciBCdWxsZXRXaWR0aCA9IGNhbnYud2lkdGgvMTAwO1xyXG4gICAgICAgICAgICAgICAgdmFyIEJ1bGxldEhlaWdodCA9IEJ1bGxldFdpZHRoICogQWxsQnVsbGV0c1swXS5pbWFnZS5oZWlnaHQvQWxsQnVsbGV0c1swXS5pbWFnZS53aWR0aDtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IodmFyIGJ1bGxldCBpbiBBbGxCdWxsZXRzKXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IEFsbEJ1bGxldHNbYnVsbGV0XTtcclxuICAgICAgICAgICAgICAgICAgICBiLndpZHRoID0gQnVsbGV0V2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgYi5oZWlnaHQgPSBCdWxsZXRIZWlnaHQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKGIuZXhwbG9kZVN0YWdlID09IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL0RyYXcgYnVsbGV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zYXZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC50cmFuc2xhdGUoYi54KnJhdGlvLCBiLnkqcmF0aW8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdHgucm90YXRlKGIucm90YXRpb24vMTgwKk1hdGguUEkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKGIuaW1hZ2UsIC1CdWxsZXRXaWR0aC8yLCAtQnVsbGV0SGVpZ2h0LzIsIEJ1bGxldFdpZHRoLCBCdWxsZXRIZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdHgucmVzdG9yZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgQWxsQnVsbGV0c1tidWxsZXRdLnggPSBNYXRoLmNvcygoYi5yb3RhdGlvbiAtIDkwKS8xODAqTWF0aC5QSSkgKyBiLng7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEFsbEJ1bGxldHNbYnVsbGV0XS55ID0gTWF0aC5zaW4oKGIucm90YXRpb24gLSA5MCkvMTgwKk1hdGguUEkpKyBiLnk7XHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYoYi5leHBsb2RlU3RhZ2UgPCA0KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9EcmF3IGV4cGxvc2lvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhiLmV4cGxvc2lvbkltYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnNhdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZShiLngqcmF0aW8sIGIueSpyYXRpbyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoYi5leHBsb3Npb25JbWFnZSwgLUJ1bGxldFdpZHRoLCAtQnVsbGV0V2lkdGgsIEJ1bGxldFdpZHRoKjIsIEJ1bGxldFdpZHRoKjIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdHgucmVzdG9yZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYoQWxsUGxheWVycy5sZW5ndGggIT0gMCl7XHJcbiAgICAgICAgICAgICAgICB2YXIgU3BhY2VzaGlwV2lkdGggPSBjYW52LndpZHRoLzIwO1xyXG4gICAgICAgICAgICAgICAgdmFyIFNwYWNlc2hpcEhlaWdodCA9IFNwYWNlc2hpcFdpZHRoICogQWxsUGxheWVyc1swXS5pbWFnZS5oZWlnaHQvIEFsbFBsYXllcnNbMF0uaW1hZ2Uud2lkdGg7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yKHZhciBwbGF5ZXIgaW4gQWxsUGxheWVycyl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHAgPSBBbGxQbGF5ZXJzW3BsYXllcl07XHJcbiAgICAgICAgICAgICAgICAgICAgcC53aWR0aCA9IFNwYWNlc2hpcFdpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgIHAuaGVpZ2h0ID0gU3BhY2VzaGlwSGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgIGN0eC5zYXZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZShwLngqcmF0aW8sIHAueSpyYXRpbyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY3R4LnJvdGF0ZShwLnJvdGF0aW9uLzE4MCpNYXRoLlBJKTtcclxuICAgICAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKHAuaW1hZ2UsIC1TcGFjZXNoaXBXaWR0aC8yLCAtU3BhY2VzaGlwSGVpZ2h0LzIsIFNwYWNlc2hpcFdpZHRoLCBTcGFjZXNoaXBIZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHAuZGFtYWdlID4gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UocC5kYW1hZ2VJbWFnZSwgLVNwYWNlc2hpcFdpZHRoLzIsIC1TcGFjZXNoaXBIZWlnaHQvMiwgU3BhY2VzaGlwV2lkdGgsIFNwYWNlc2hpcEhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocC5kYW1hZ2U8NCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEFsbFBsYXllcnNbcGxheWVyXS54ID0gTWF0aC5jb3MoKHAucm90YXRpb24gLSA5MCkvMTgwKk1hdGguUEkpLzEwKiBwLnNwZWVkICsgcC54O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBBbGxQbGF5ZXJzW3BsYXllcl0ueSA9IE1hdGguc2luKChwLnJvdGF0aW9uIC0gOTApLzE4MCpNYXRoLlBJKS8xMCogcC5zcGVlZCArIHAueTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmKEFsbEFzdGVyb2lkcy5sZW5ndGg+MCl7XHJcbiAgICAgICAgICAgICAgICBmb3IodmFyIEFzdGVyb2lkIGluIEFsbEFzdGVyb2lkcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBBbGxBc3Rlcm9pZHNbQXN0ZXJvaWRdO1xyXG4gICAgICAgICAgICAgICAgICAgIGEud2lkdGggPSBjYW52LndpZHRoLzcwMCogYS5pbWFnZS53aWR0aDtcclxuICAgICAgICAgICAgICAgICAgICBhLmhlaWdodCA9IGEud2lkdGgqIGEuaW1hZ2UuaGVpZ2h0LyBhLmltYWdlLndpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgIGN0eC5zYXZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZShhLngqcmF0aW8sIGEueSpyYXRpbyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY3R4LnJvdGF0ZShhLnJvdGF0aW9uLzE4MCpNYXRoLlBJKTtcclxuICAgICAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKGEuaW1hZ2UsIC1hLndpZHRoLzIsIC1hLmhlaWdodC8yLCBhLndpZHRoLCBhLmhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZihhLnggPCAtNSB8fCBhLnggPiAxMDUgfHwgYS55IDwgLTUgfHwgYS55ID4gMTA1KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9uaWV1d2UgYXN0ZXJvaWQgdGVrZW5lblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIga2V1emUgPSBNYXRoLnJhbmRvbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihrZXV6ZSA8IDAuMjUpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9saW5rc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQWxsQXN0ZXJvaWRzW0FzdGVyb2lkXS54ID0gLTQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbGxBc3Rlcm9pZHNbQXN0ZXJvaWRdLnkgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMTAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFsbEFzdGVyb2lkc1tBc3Rlcm9pZF0ucm90YXRpb24gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMTgwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYoa2V1emUgPCAwLjUpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9ib3ZlblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQWxsQXN0ZXJvaWRzW0FzdGVyb2lkXS54ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjEwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbGxBc3Rlcm9pZHNbQXN0ZXJvaWRdLnkgPSAtNDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFsbEFzdGVyb2lkc1tBc3Rlcm9pZF0ucm90YXRpb24gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMTgwKSArIDkwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZihrZXV6ZSA8IDAuNzUpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9yZWNodHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFsbEFzdGVyb2lkc1tBc3Rlcm9pZF0ueCA9IDEwNDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFsbEFzdGVyb2lkc1tBc3Rlcm9pZF0ueSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoxMDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQWxsQXN0ZXJvaWRzW0FzdGVyb2lkXS5yb3RhdGlvbiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoxODApICsgMTgwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vb25kZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFsbEFzdGVyb2lkc1tBc3Rlcm9pZF0ueCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoxMDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQWxsQXN0ZXJvaWRzW0FzdGVyb2lkXS55ID0gMTA0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQWxsQXN0ZXJvaWRzW0FzdGVyb2lkXS5yb3RhdGlvbiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoxODApICsgMjcwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEFsbEFzdGVyb2lkc1tBc3Rlcm9pZF0uc2V0SW1hZ2UoTWF0aC5jZWlsKE1hdGgucmFuZG9tKCkqMTgpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEFsbEFzdGVyb2lkc1tBc3Rlcm9pZF0ueCA9IE1hdGguY29zKChhLnJvdGF0aW9uIC0gOTApLzE4MCpNYXRoLlBJKS8zMCArIGEueDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQWxsQXN0ZXJvaWRzW0FzdGVyb2lkXS55ID0gTWF0aC5zaW4oKGEucm90YXRpb24gLSA5MCkvMTgwKk1hdGguUEkpLzMwICsgYS55O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY2hlY2tCdWxsZXRzKCk7XHJcblxyXG4gICAgICAgICAgICBjb2xsaXNpb25EZXRlY3Rpb24oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGNoZWNrQnVsbGV0cygpe1xyXG4gICAgICAgICAgICBmb3IodmFyIGIgaW4gQWxsQnVsbGV0cyl7XHJcbiAgICAgICAgICAgICAgICBpZihBbGxCdWxsZXRzW2JdLnggPCAwIHx8IEFsbEJ1bGxldHNbYl0ueCA+IGNhbnYud2lkdGggfHwgQWxsQnVsbGV0c1tiXS55IDwgMCB8fCBBbGxCdWxsZXRzW2JdLnkgPiBjYW52LmhlaWdodCl7XHJcbiAgICAgICAgICAgICAgICAgICAgQWxsQnVsbGV0cy5zcGxpY2UoYiwgMSk7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZSBpZihBbGxCdWxsZXRzW2JdLmV4cGxvZGVTdGFnZSA+MCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChBbGxCdWxsZXRzW2JdLmV4cGxvZGVTdGFnZSA8IDQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQWxsQnVsbGV0c1tiXS5leHBsb2RlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQWxsQnVsbGV0cy5zcGxpY2UoYiwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBjb2xsaXNpb25EZXRlY3Rpb24oKXtcclxuICAgICAgICAgICAgLy9QbGF5ZXIgLSBCdWxsZXRcclxuICAgICAgICAgICAgdmFyIGxpdmluZ1BsYXllcnM9W107XHJcbiAgICAgICAgICAgIGZvcih2YXIgcCBpbiBBbGxQbGF5ZXJzKXtcclxuICAgICAgICAgICAgICAgIGlmKEFsbFBsYXllcnNbcF0uZGFtYWdlPDQpe1xyXG4gICAgICAgICAgICAgICAgICAgIGxpdmluZ1BsYXllcnMucHVzaChBbGxQbGF5ZXJzW3BdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGZvcih2YXIgYiBpbiBBbGxCdWxsZXRzKXtcclxuICAgICAgICAgICAgICAgICAgICBpZihBbGxCdWxsZXRzW2JdLmV4cGxvZGVTdGFnZSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBbGxCdWxsZXRzW2JdLnBsYXllciAhPSBBbGxQbGF5ZXJzW3BdLnVzZXJOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmFkaXVzID0gTWF0aC5zcXJ0KDIpIC8gMiAqIChBbGxCdWxsZXRzW2JdLmhlaWdodCAvIDIgLSBBbGxCdWxsZXRzW2JdLndpZHRoIC8gMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYW5nbGUgPSAoMzYwIC0gKEFsbEJ1bGxldHNbYl0ucm90YXRpb24pKSAvIDE4MCAqIE1hdGguUEk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYnVsbGV0SGVhZFggPSAoQWxsQnVsbGV0c1tiXS54ICogY2Fudi53aWR0aCAvIDEwMCAtIChyYWRpdXMgKiBNYXRoLnNpbihhbmdsZSkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBidWxsZXRIZWFkWSA9IChBbGxCdWxsZXRzW2JdLnkgKiBjYW52LndpZHRoIC8gMTAwIC0gKHJhZGl1cyAqIE1hdGguY29zKGFuZ2xlKSkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcGFjZVNoaXBYID0gQWxsUGxheWVyc1twXS54ICogY2Fudi53aWR0aCAvIDEwMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcGFjZVNoaXBZID0gQWxsUGxheWVyc1twXS55ICogY2Fudi53aWR0aCAvIDEwMDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGlzdGFuY2UgPSBNYXRoLnNxcnQoKGJ1bGxldEhlYWRYIC0gc3BhY2VTaGlwWCkgKiAoYnVsbGV0SGVhZFggLSBzcGFjZVNoaXBYKSArIChidWxsZXRIZWFkWSAtIHNwYWNlU2hpcFkpICogKGJ1bGxldEhlYWRZIC0gc3BhY2VTaGlwWSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRpc3RhbmNlIDwgKEFsbEJ1bGxldHNbYl0ud2lkdGggLyAyICsgQWxsUGxheWVyc1twXS53aWR0aCAvIDIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhbWFnZXNvdW5kID0gbmV3IEF1ZGlvKCcuLi8uLi9hc3NldHMvQm9udXMvc2Z4X2xvc2Uub2dnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGFtYWdlc291bmQucGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFsbFBsYXllcnNbcF0uaW5jcmVhc2VEYW1hZ2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEudXNlcm5hbWUgPSBBbGxQbGF5ZXJzW3BdLnVzZXJOYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEubGlmZSA9IDMtQWxsUGxheWVyc1twXS5kYW1hZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc29ja2V0U2VydmljZS5lbWl0KFwicGxheWVyTGlmZVwiLGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFsbEJ1bGxldHNbYl0uZXhwbG9kZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy9QbGF5ZXIgLSBBc3Rlcm9pZFxyXG4gICAgICAgICAgICAgICAgZm9yKHZhciBhIGluIEFsbEFzdGVyb2lkcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFzdGVyb2lkWCA9IEFsbEFzdGVyb2lkc1thXS54ICogY2Fudi53aWR0aCAvIDEwMDtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYXN0ZXJvaWRZID0gQWxsQXN0ZXJvaWRzW2FdLnkgKiBjYW52LndpZHRoIC8gMTAwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgc3BhY2VTaGlwWCA9IEFsbFBsYXllcnNbcF0ueCAqIGNhbnYud2lkdGggLyAxMDA7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNwYWNlU2hpcFkgPSBBbGxQbGF5ZXJzW3BdLnkgKiBjYW52LndpZHRoIC8gMTAwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgZGlzdGFuY2UgPSBNYXRoLnNxcnQoKGFzdGVyb2lkWCAtIHNwYWNlU2hpcFgpICogKGFzdGVyb2lkWCAtIHNwYWNlU2hpcFgpICsgKGFzdGVyb2lkWSAtIHNwYWNlU2hpcFkpICogKGFzdGVyb2lkWSAtIHNwYWNlU2hpcFkpKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGlzdGFuY2UgPCAoQWxsQXN0ZXJvaWRzW2FdLndpZHRoIC8gMiArIEFsbFBsYXllcnNbcF0ud2lkdGggLyAyKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGFtYWdlc291bmQgPSBuZXcgQXVkaW8oJy4uLy4uL2Fzc2V0cy9Cb251cy9zZnhfbG9zZS5vZ2cnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGFtYWdlc291bmQucGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBBbGxQbGF5ZXJzW3BdLmRlYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS51c2VybmFtZSA9IEFsbFBsYXllcnNbcF0udXNlck5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEubGlmZSA9IDMtQWxsUGxheWVyc1twXS5kYW1hZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvY2tldFNlcnZpY2UuZW1pdChcInBsYXllckxpZmVcIixkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy9QbGF5ZXIgLSBQbGF5ZXJcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IodmFyIGEgaW4gQWxsUGxheWVycyl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoYSE9cCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcGFjZVNoaXAxWCA9IEFsbFBsYXllcnNbYV0ueCAqIGNhbnYud2lkdGggLyAxMDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcGFjZVNoaXAxWSA9IEFsbFBsYXllcnNbYV0ueSAqIGNhbnYud2lkdGggLyAxMDA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3BhY2VTaGlwWCA9IEFsbFBsYXllcnNbcF0ueCAqIGNhbnYud2lkdGggLyAxMDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcGFjZVNoaXBZID0gQWxsUGxheWVyc1twXS55ICogY2Fudi53aWR0aCAvIDEwMDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkaXN0YW5jZSA9IE1hdGguc3FydCgoc3BhY2VTaGlwMVggLSBzcGFjZVNoaXBYKSAqIChzcGFjZVNoaXAxWCAtIHNwYWNlU2hpcFgpICsgKHNwYWNlU2hpcDFZIC0gc3BhY2VTaGlwWSkgKiAoc3BhY2VTaGlwMVkgLSBzcGFjZVNoaXBZKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkaXN0YW5jZSA8IChBbGxQbGF5ZXJzW2FdLndpZHRoIC8gMiArIEFsbFBsYXllcnNbcF0ud2lkdGggLyAyKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhbWFnZXNvdW5kID0gbmV3IEF1ZGlvKCcuLi8uLi9hc3NldHMvQm9udXMvc2Z4X2xvc2Uub2dnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYW1hZ2Vzb3VuZC5wbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbGxQbGF5ZXJzW3BdLmRlYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFsbFBsYXllcnNbYV0uZGVhZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEudXNlcm5hbWUgPSBBbGxQbGF5ZXJzW3BdLnVzZXJOYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5saWZlID0gMy1BbGxQbGF5ZXJzW3BdLmRhbWFnZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvY2tldFNlcnZpY2UuZW1pdChcInBsYXllckxpZmVcIixkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEudXNlcm5hbWUgPSBBbGxQbGF5ZXJzW2FdLnVzZXJOYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5saWZlID0gMy1BbGxQbGF5ZXJzW2FdLmRhbWFnZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvY2tldFNlcnZpY2UuZW1pdChcInBsYXllckxpZmVcIixkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvL1BsYXllciAtIFdhbGxcclxuICAgICAgICAgICAgICAgIGlmKEFsbFBsYXllcnNbcF0ueCpjYW52LndpZHRoLzEwMCA8IEFsbFBsYXllcnNbcF0uaGVpZ2h0LzIgfHwgQWxsUGxheWVyc1twXS54KmNhbnYud2lkdGgvMTAwID4gY2Fudi53aWR0aC0oQWxsUGxheWVyc1twXS5oZWlnaHQvMil8fFxyXG4gICAgICAgICAgICAgICAgICAgIEFsbFBsYXllcnNbcF0ueSpjYW52LndpZHRoLzEwMCA8IEFsbFBsYXllcnNbcF0uaGVpZ2h0LzIgfHwgQWxsUGxheWVyc1twXS55KmNhbnYud2lkdGgvMTAwID4gY2Fudi53aWR0aC0oQWxsUGxheWVyc1twXS5oZWlnaHQvMikpe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkYW1hZ2Vzb3VuZCA9IG5ldyBBdWRpbygnLi4vLi4vYXNzZXRzL0JvbnVzL3NmeF9sb3NlLm9nZycpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhbWFnZXNvdW5kLnBsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICBBbGxQbGF5ZXJzW3BdLmRlYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEudXNlcm5hbWUgPSBBbGxQbGF5ZXJzW3BdLnVzZXJOYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEubGlmZSA9IDMtQWxsUGxheWVyc1twXS5kYW1hZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgc29ja2V0U2VydmljZS5lbWl0KFwicGxheWVyTGlmZVwiLGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy9CdWxsZXQgLSBBc3Rlcm9pZFxyXG4gICAgICAgICAgICBmb3IodmFyIGEgaW4gQWxsQXN0ZXJvaWRzKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBiIGluIEFsbEJ1bGxldHMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoQWxsQnVsbGV0c1tiXS5leHBsb2RlU3RhZ2UgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoQWxsQnVsbGV0c1tiXS5wbGF5ZXIgIT0gQWxsQXN0ZXJvaWRzW2FdLnVzZXJOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmFkaXVzID0gTWF0aC5zcXJ0KDIpIC8gMiAqIChBbGxCdWxsZXRzW2JdLmhlaWdodCAvIDIgLSBBbGxCdWxsZXRzW2JdLndpZHRoIC8gMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYW5nbGUgPSAoMzYwIC0gKEFsbEJ1bGxldHNbYl0ucm90YXRpb24pKSAvIDE4MCAqIE1hdGguUEk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYnVsbGV0SGVhZFggPSAoQWxsQnVsbGV0c1tiXS54ICogY2Fudi53aWR0aCAvIDEwMCAtIChyYWRpdXMgKiBNYXRoLnNpbihhbmdsZSkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBidWxsZXRIZWFkWSA9IChBbGxCdWxsZXRzW2JdLnkgKiBjYW52LndpZHRoIC8gMTAwIC0gKHJhZGl1cyAqIE1hdGguY29zKGFuZ2xlKSkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhc3Rlcm9pZFggPSBBbGxBc3Rlcm9pZHNbYV0ueCAqIGNhbnYud2lkdGggLyAxMDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXN0ZXJvaWRZID0gQWxsQXN0ZXJvaWRzW2FdLnkgKiBjYW52LndpZHRoIC8gMTAwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkaXN0YW5jZSA9IE1hdGguc3FydCgoYnVsbGV0SGVhZFggLSBhc3Rlcm9pZFgpICogKGJ1bGxldEhlYWRYIC0gYXN0ZXJvaWRYKSArIChidWxsZXRIZWFkWSAtIGFzdGVyb2lkWSkgKiAoYnVsbGV0SGVhZFkgLSBhc3Rlcm9pZFkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkaXN0YW5jZSA8IChBbGxCdWxsZXRzW2JdLndpZHRoIC8gMiArIEFsbEFzdGVyb2lkc1thXS53aWR0aCAvIDIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhbWFnZXNvdW5kID0gbmV3IEF1ZGlvKCcuLi8uLi9hc3NldHMvQm9udXMvc2Z4X2xvc2Uub2dnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGFtYWdlc291bmQucGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS51c2VybmFtZSA9IEFsbEFzdGVyb2lkc1thXS51c2VyTmFtZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmxpZmUgPSAzIC0gQWxsQXN0ZXJvaWRzW2FdLmRhbWFnZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb2NrZXRTZXJ2aWNlLmVtaXQoXCJwbGF5ZXJMaWZlXCIsIGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFsbEJ1bGxldHNbYl0uZXhwbG9kZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvL1xyXG5cclxuICAgICAgICAgICAgaWYobGl2aW5nUGxheWVycy5sZW5ndGg9PTEpe1xyXG4gICAgICAgICAgICAgICAgZW5kR2FtZShsaXZpbmdQbGF5ZXJzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZW5kR2FtZShsaXZpbmdQbGF5ZXJzKXtcclxuICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKGN5Y2xlKSkge1xyXG4gICAgICAgICAgICAgICAgJGludGVydmFsLmNhbmNlbChjeWNsZSk7XHJcbiAgICAgICAgICAgICAgICBjeWNsZSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkc2NvcGUuZW5kR2FtZT10cnVlO1xyXG4gICAgICAgICAgICAkc2NvcGUuZW5kR2FtZVRleHQ9IGxpdmluZ1BsYXllcnNbMF0udXNlck5hbWUgKyBcIiBpcyB0aGUgd2lubmVyIVwiO1xyXG4gICAgICAgICAgICBzb2NrZXRTZXJ2aWNlLmVtaXQoXCJlbmRHYW1lXCIsIGxpdmluZ1BsYXllcnNbMF0udXNlck5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkc2NvcGUucmVzdGFydEdhbWUgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAkc2NvcGUuZW5kR2FtZT1mYWxzZTtcclxuICAgICAgICAgICAgdmFyIHRlbGxlcj0wO1xyXG4gICAgICAgICAgICBmb3IodmFyIHAgaW4gQWxsUGxheWVycyl7XHJcbiAgICAgICAgICAgICAgICBBbGxQbGF5ZXJzW3BdLnJlc2V0KGRlZmF1bHRWYXJzW3RlbGxlcl0ueCxkZWZhdWx0VmFyc1t0ZWxsZXJdLnksZGVmYXVsdFZhcnNbdGVsbGVyXS5yb3RhdGlvbik7XHJcbiAgICAgICAgICAgICAgICB0ZWxsZXIrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBBbGxBc3Rlcm9pZHM9W107XHJcbiAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGk8MTU7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICBBbGxBc3Rlcm9pZHMucHVzaChuZXcgQXN0ZXJvaWQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjEwMCksIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoxMDApLCBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMzYxKSwgTWF0aC5jZWlsKE1hdGgucmFuZG9tKCkqMTgpKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLDAsY2Fudi53aWR0aCwgY2Fudi5oZWlnaHQpO1xyXG4gICAgICAgICAgICBzb2NrZXRTZXJ2aWNlLmVtaXQoXCJyZXN0YXJ0R2FtZVwiLG51bGwpO1xyXG4gICAgICAgICAgICBjeWNsZSA9ICRpbnRlcnZhbChkcmF3LCAxMCk7XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoXCJhcHBcIikuY29udHJvbGxlcihcInBsYXlDb250cm9sbGVyXCIsIFtcIiRzY29wZVwiLCBcIiRpbnRlcnZhbFwiLCBcIiR3aW5kb3dcIiwgXCJzb2NrZXRTZXJ2aWNlXCIsIFwiZGlzcGxheVNlcnZpY2VcIiwgXCJwbGF5ZXJTZXJ2aWNlXCIsIHBsYXlDb250cm9sbGVyXSlcclxufSkoKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBqdXN0aWpuZGVwb3ZlciBvbiAxNi8xMi8xNS5cclxuICovXHJcbihmdW5jdGlvbigpe1xyXG4gICAgdmFyIGNhbnZhc0RpcmVjdGl2ZSA9IGZ1bmN0aW9uKCR3aW5kb3cpe1xyXG4gICAgICAgIHJldHVybntcclxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcclxuICAgICAgICAgICAgbGluazpsaW5rLFxyXG4gICAgICAgICAgICByZXBsYWNlOnRydWUsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlOic8Y2FudmFzIGlkPVwiZ2FtZVwiIGNsYXNzPVwicGxheUFyZWFcIiB3aWR0aD1cInt7d2lkdGh9fVwiIGhlaWdodD1cInt7d2lkdGh9fVwiIC8+J1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHJzKXtcclxuICAgICAgICAgICAgaWYoJHdpbmRvdy5pbm5lcldpZHRoIDwgJHdpbmRvdy5pbm5lckhlaWdodCl7XHJcbiAgICAgICAgICAgICAgICBzY29wZS53aWR0aCA9ICR3aW5kb3cuaW5uZXJXaWR0aCAtIDIwO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIHNjb3BlLndpZHRoID0gJHdpbmRvdy5pbm5lckhlaWdodCAtIDIwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJHdpbmRvdykuYmluZCgncmVzaXplJywgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIGlmKCR3aW5kb3cuaW5uZXJXaWR0aCA8ICR3aW5kb3cuaW5uZXJIZWlnaHQpe1xyXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLndpZHRoID0gJHdpbmRvdy5pbm5lcldpZHRoIC0gMjA7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICBzY29wZS53aWR0aCA9ICR3aW5kb3cuaW5uZXJIZWlnaHQgLSAyMDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBzY29wZS4kZGlnZXN0KCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmRpcmVjdGl2ZShcImNhbnZhc0RpcmVjdGl2ZVwiLCBbXCIkd2luZG93XCIsIGNhbnZhc0RpcmVjdGl2ZV0pO1xyXG59KSgpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGp1c3Rpam5kZXBvdmVyIG9uIDA5LzEyLzE1LlxyXG4gKi9cclxuXHJcblxyXG52YXIgQXN0ZXJvaWQgPSBmdW5jdGlvbih4LCB5LCByb3RhdGlvbiwgc3RhZ2Upe1xyXG4gICAgdGhpcy54ID0geDtcclxuICAgIHRoaXMueSA9IHk7XHJcbiAgICB0aGlzLndpZHRoID0gMDtcclxuICAgIHRoaXMuaGVpZ2h0ID0gMDtcclxuICAgIHRoaXMucm90YXRpb24gPSByb3RhdGlvbjtcclxuICAgIHRoaXMuc3RhZ2UgPSBzdGFnZTtcclxuICAgIHRoaXMuaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcclxuICAgIHRoaXMuaW1hZ2Uuc3JjID0gKFwiLi4vYXNzZXRzL1BORy9NZXRlb3JzL21ldGVvcl9cIiArIHN0YWdlICsgXCIucG5nXCIpO1xyXG59O1xyXG5cclxuQXN0ZXJvaWQucHJvdG90eXBlLnNldEltYWdlID0gZnVuY3Rpb24oc3RhZ2Upe1xyXG4gICAgdGhpcy5zdGFnZSA9IHN0YWdlO1xyXG4gICAgdGhpcy5pbWFnZS5zcmMgPSAoXCIuLi9hc3NldHMvUE5HL01ldGVvcnMvbWV0ZW9yX1wiICsgc3RhZ2UgKyBcIi5wbmdcIik7XHJcbn07IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkganVzdGlqbmRlcG92ZXIgb24gMjIvMTIvMTUuXHJcbiAqL1xyXG5cclxudmFyIEJ1bGxldCA9IGZ1bmN0aW9uKHgsIHkscm90YXRpb24sIGNvbG9yLCBwbGF5ZXIpe1xyXG4gICAgdGhpcy54ID0geDtcclxuICAgIHRoaXMueSA9IHk7XHJcbiAgICB0aGlzLnJvdGF0aW9uID0gcm90YXRpb247XHJcbiAgICB0aGlzLmltYWdlID0gbmV3IEltYWdlKCk7XHJcbiAgICB0aGlzLmNvbG9yID0gY29sb3I7XHJcbiAgICB0aGlzLndpZHRoID0gMDtcclxuICAgIHRoaXMuaGVpZ2h0ID0gMDtcclxuICAgIHRoaXMucGxheWVyID0gcGxheWVyO1xyXG4gICAgdGhpcy5leHBsb3Npb25JbWFnZSA9IG5ldyBJbWFnZSgpO1xyXG4gICAgdGhpcy5leHBsb2RlU3RhZ2UgPSAwO1xyXG4gICAgaWYodGhpcy5jb2xvciA9PSBcIm9yYW5nZVwiKXtcclxuICAgICAgICB0aGlzLmNvbG9yID0gJ3JlZCc7XHJcbiAgICB9XHJcbiAgICB0aGlzLmltYWdlLnNyYyA9ICcuLi9hc3NldHMvUE5HL0xhc2Vycy9sYXNlcicrIHRoaXMuY29sb3IuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB0aGlzLmNvbG9yLnNsaWNlKDEpICsnMDEucG5nJ1xyXG59O1xyXG5cclxuQnVsbGV0LnByb3RvdHlwZS5leHBsb2RlID0gZnVuY3Rpb24oKXtcclxuICAgIGlmKHRoaXMuZXhwbG9kZVN0YWdlIDwgNCl7XHJcbiAgICAgICAgdGhpcy5leHBsb2RlU3RhZ2UrKztcclxuICAgICAgICB2YXIgbnVtYmVyO1xyXG4gICAgICAgIGlmKHRoaXMuZXhwbG9kZVN0YWdlIDwgMyl7XHJcbiAgICAgICAgICAgbnVtYmVyID0gMVxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBudW1iZXIgPSAyXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZXhwbG9zaW9uSW1hZ2Uuc3JjID0gJy4uL2Fzc2V0cy9QTkcvTGFzZXJzL2xhc2VyJyArIHRoaXMuY29sb3IuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB0aGlzLmNvbG9yLnNsaWNlKDEpICsgJ0V4cGxvZGUnKyBudW1iZXIgKycucG5nJztcclxuICAgIH1lbHNle1xyXG4gICAgICAgIHRoaXMuZXhwbG9zaW9uSW1hZ2Uuc3JjID0gJyc7XHJcbiAgICB9XHJcbn07XHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGp1c3Rpam5kZXBvdmVyIG9uIDA5LzEyLzE1LlxyXG4gKi9cclxuXHJcbnZhciBTcGFjZXNoaXAgPSBmdW5jdGlvbih1c2VyTmFtZSwgeCwgeSwgY29sb3IsIHJvdGF0aW9uKXtcclxuICAgIHRoaXMudXNlck5hbWUgPSB1c2VyTmFtZTtcclxuICAgIHRoaXMueCA9IHg7XHJcbiAgICB0aGlzLnkgPSB5O1xyXG4gICAgdGhpcy5zcGVlZCA9IDE7XHJcbiAgICB0aGlzLmNvbG9yID0gY29sb3I7XHJcbiAgICB0aGlzLnJvdGF0aW9uID0gcm90YXRpb247XHJcbiAgICB0aGlzLmltYWdlID0gbmV3IEltYWdlKCk7XHJcbiAgICB0aGlzLmRhbWFnZSA9IDA7XHJcbiAgICB0aGlzLndpZHRoID0gMDtcclxuICAgIHRoaXMuaGVpZ2h0ID0gMDtcclxuICAgIHRoaXMuZGFtYWdlSW1hZ2UgPSBuZXcgSW1hZ2UoKTtcclxuICAgIHRoaXMuaW1hZ2Uuc3JjID0gJy4uL2Fzc2V0cy9QTkcvcGxheWVyU2hpcDFfJysgdGhpcy5jb2xvciArJy5wbmcnXHJcbn07XHJcblxyXG5TcGFjZXNoaXAucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKHgsIHksIHJvdGF0aW9uKSB7XHJcbiAgICB0aGlzLnNwZWVkID0gMTtcclxuICAgIHRoaXMuZGFtYWdlID0gMDtcclxuICAgIHRoaXMuZGFtYWdlSW1hZ2UgPSBuZXcgSW1hZ2UoKTtcclxuICAgIHRoaXMuaW1hZ2Uuc3JjID0gJy4uL2Fzc2V0cy9QTkcvcGxheWVyU2hpcDFfJysgdGhpcy5jb2xvciArJy5wbmcnXHJcbiAgICB0aGlzLnggPSB4O1xyXG4gICAgdGhpcy55ID0geTtcclxuICAgIHRoaXMucm90YXRpb24gPSByb3RhdGlvbjtcclxufTtcclxuXHJcblNwYWNlc2hpcC5wcm90b3R5cGUubW92ZVNwYWNlc2hpcCA9IGZ1bmN0aW9uKHgsIHkpe1xyXG4gICAgdGhpcy54ID0geDtcclxuICAgIHRoaXMueSA9IHk7XHJcbn07XHJcblxyXG5TcGFjZXNoaXAucHJvdG90eXBlLm1vdmVTcGFjZXNoaXBSZWxhdGl2ZSA9IGZ1bmN0aW9uKHgsIHkpe1xyXG4gICAgdGhpcy54ID0gdGhpcy54K3g7XHJcbiAgICB0aGlzLnkgPSB0aGlzLnkreTtcclxufTtcclxuXHJcblNwYWNlc2hpcC5wcm90b3R5cGUucm90YXRlU3BhY2VzaGlwID0gZnVuY3Rpb24oZGVncmVlKXtcclxuICAgIHRoaXMucm90YXRpb24gPSBkZWdyZWU7XHJcbn07XHJcblxyXG5TcGFjZXNoaXAucHJvdG90eXBlLnJvdGF0ZVNwYWNlc2hpcFJlbGF0aXZlID0gZnVuY3Rpb24oZGVncmVlKXtcclxuICAgIGlmKGRlZ3JlZT44MCl7XHJcbiAgICAgICAgZGVncmVlPTgwO1xyXG4gICAgfWVsc2UgaWYgKGRlZ3JlZTwtODApe1xyXG4gICAgICAgIGRlZ3JlZSA9IC04MDtcclxuICAgIH1cclxuICAgIHRoaXMucm90YXRpb24gPSB0aGlzLnJvdGF0aW9uICsgZGVncmVlLzU7XHJcbiAgICBpZih0aGlzLnJvdGF0aW9uIDwgLTM2MCl7XHJcbiAgICAgICAgdGhpcy5yb3RhdGlvbiA9IHRoaXMucm90YXRpb24gKyA3MjA7XHJcbiAgICB9XHJcbiAgICBpZih0aGlzLnJvdGF0aW9uID4gMzYwKXtcclxuICAgICAgICB0aGlzLnJvdGF0aW9uID0gdGhpcy5yb3RhdGlvbiAtIDcyMDtcclxuICAgIH1cclxufTtcclxuXHJcblNwYWNlc2hpcC5wcm90b3R5cGUuaW5jcmVhc2VEYW1hZ2UgPSBmdW5jdGlvbigpe1xyXG4gICAgaWYodGhpcy5kYW1hZ2UgPCA0KXtcclxuICAgICAgICB0aGlzLmRhbWFnZSArPSAxO1xyXG4gICAgfVxyXG5cclxuICAgIGlmKHRoaXMuZGFtYWdlIDw9IDMgJiYgdGhpcy5kYW1hZ2UgPiAwKXtcclxuICAgICAgICB0aGlzLmRhbWFnZUltYWdlLnNyYyA9ICcuLi9hc3NldHMvUE5HL0RhbWFnZS9wbGF5ZXJTaGlwMV9kYW1hZ2UnKyB0aGlzLmRhbWFnZSArICcucG5nJztcclxuICAgIH1lbHNlIGlmKHRoaXMuZGFtYWdlPT00KXtcclxuICAgICAgICB0aGlzLmRhbWFnZUltYWdlLnNyYyA9ICcuLi9hc3NldHMvUE5HL0RhbWFnZS9leHBsb2RlLmdpZic7XHJcbiAgICB9XHJcbn07XHJcblxyXG5TcGFjZXNoaXAucHJvdG90eXBlLmRlYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLmRhbWFnZSA9IDQ7XHJcbiAgICB0aGlzLmRhbWFnZUltYWdlLnNyYyA9ICcuLi9hc3NldHMvUE5HL0RhbWFnZS9leHBsb2RlLmdpZic7XHJcbn07XHJcblxyXG5TcGFjZXNoaXAucHJvdG90eXBlLmRlY3JlYXNlRGFtYWdlID0gZnVuY3Rpb24oKXtcclxuICAgIGlmKHRoaXMuZGFtYWdlID4gMCl7XHJcbiAgICAgICAgdGhpcy5kYW1hZ2UgLT0gMTtcclxuICAgIH1cclxuXHJcbiAgICBpZih0aGlzLmRhbWFnZSA8PSAzICYmIHRoaXMuZGFtYWdlID4gMCl7XHJcbiAgICAgICAgdGhpcy5kYW1hZ2VJbWFnZS5zcmMgPSAnLi4vYXNzZXRzL1BORy9EYW1hZ2UvcGxheWVyU2hpcDFfZGFtYWdlJysgdGhpcy5kYW1hZ2UgKyAnLnBuZyc7XHJcbiAgICB9XHJcbn07XHJcblxyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBNaWNoaWVsIG9uIDE2LzEyLzIwMTUuXHJcbiAqL1xyXG4vKipcclxuICogQ3JlYXRlZCBieSBqdXN0aWpuZGVwb3ZlciBvbiAxNi8xMi8xNS5cclxuICovXHJcblxyXG5cclxuKGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgZGlzcGxheVNlcnZpY2UgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgIC8vTG9naW4gQ29udHJvbGxlclxyXG4gICAgICAgIHZhciBMQ1Nob3cgPSB0cnVlO1xyXG4gICAgICAgIC8vUGxheSBjb250cm9sbGVyXHJcbiAgICAgICAgdmFyIFBDU2hvdyA9IGZhbHNlO1xyXG5cclxuICAgICAgICByZXR1cm57XHJcbiAgICAgICAgICAgIGdldExDU2hvdzogZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIHJldHVybiBMQ1Nob3c7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNldExDU2hvdzogZnVuY3Rpb24odmFsdWUpe1xyXG4gICAgICAgICAgICAgICAgTENTaG93ID0gdmFsdWU7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGdldFBDU2hvdzogZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIHJldHVybiBQQ1Nob3c7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNldFBDU2hvdzogZnVuY3Rpb24odmFsdWUpe1xyXG4gICAgICAgICAgICAgICAgUENTaG93ID0gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5mYWN0b3J5KCdkaXNwbGF5U2VydmljZScsIFtkaXNwbGF5U2VydmljZV0pO1xyXG59KSgpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGp1c3Rpam5kZXBvdmVyIG9uIDE3LzEyLzE1LlxyXG4gKi9cclxuXHJcbihmdW5jdGlvbigpe1xyXG4gICAgdmFyIHBsYXllclNlcnZpY2UgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgIC8vTG9naW4gQ29udHJvbGxlclxyXG4gICAgICAgIHZhciBwbGF5ZXJzID0gW107XHJcblxyXG4gICAgICAgIHJldHVybntcclxuICAgICAgICAgICAgZ2V0UGxheWVyczogZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwbGF5ZXJzO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzZXRQbGF5ZXJzOiBmdW5jdGlvbihwbGF5ZXJzQXJyYXkpe1xyXG4gICAgICAgICAgICAgICAgcGxheWVycyA9IHBsYXllcnNBcnJheTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmZhY3RvcnkoJ3BsYXllclNlcnZpY2UnLCBbcGxheWVyU2VydmljZV0pO1xyXG59KSgpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGp1c3Rpam5kZXBvdmVyIG9uIDA5LzEyLzE1LlxyXG4gKi9cclxuXHJcbihmdW5jdGlvbigpe1xyXG5cclxuICAgIHZhciBzb2NrZXRTZXJ2aWNlID0gZnVuY3Rpb24oJHJvb3RTY29wZSl7XHJcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XHJcbiAgICAgICAgLy9wcml2YXRlXHJcbiAgICAgICAgdmFyIHNvY2tldCA9IGlvLmNvbm5lY3Qod2luZG93LmxvY2F0aW9uLmhvc3QpO1xyXG4gICAgICAgIC8vZnVuY3Rpb25zXHJcbiAgICAgICAgdmFyIG9uID0gZnVuY3Rpb24gKGV2ZW50TmFtZSwgY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgc29ja2V0Lm9uKGV2ZW50TmFtZSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkoc29ja2V0LCBhcmdzKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZW1pdCA9IGZ1bmN0aW9uIChldmVudE5hbWUsIGRhdGEsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIHNvY2tldC5lbWl0KGV2ZW50TmFtZSwgZGF0YSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KHNvY2tldCwgYXJncyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy9wdWJsaWNcclxuICAgICAgICByZXR1cm57XHJcbiAgICAgICAgICAgIG9uOiBvbixcclxuICAgICAgICAgICAgZW1pdDogZW1pdCxcclxuICAgICAgICAgICAgc29ja2V0OiBzb2NrZXRcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmZhY3RvcnkoXCJzb2NrZXRTZXJ2aWNlXCIsIFtcIiRyb290U2NvcGVcIiwgc29ja2V0U2VydmljZV0pO1xyXG5cclxufSkoKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
