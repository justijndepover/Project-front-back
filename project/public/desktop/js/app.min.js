!function(){angular.module("app",[])}(),function(){var t=function(t){function e(e,a,i){t.innerWidth<t.innerHeight?e.width=t.innerWidth-20:e.width=t.innerHeight-20,angular.element(t).bind("resize",function(){t.innerWidth<t.innerHeight?e.width=t.innerWidth-20:e.width=t.innerHeight-20,e.$digest()})}return{restrict:"E",link:e,replace:!0,template:'<canvas id="game" class="playArea" width="{{width}}" height="{{width}}" />'}};angular.module("app").directive("canvasDirective",["$window",t])}(),function(){var t=function(t,e,a,i){t.LCShow=a.getLCShow;var o=function(){e.emit("pcconnect",null)};t.room="",e.on("requestRoom",function(e){t.room=e}),e.on("deviceOrientation",function(t){var e=(t.username,{});e.gamma=t.gamma,e.beta=t.beta,e.alpha=t.alpha}),t.usernames={},t.checkUserCount=!1,e.on("updateusers",function(e){i.setPlayers(e),t.usernames=e,t.checkUserCount=Object.keys(t.usernames).length<0}),t.startGame=function(){e.emit("startGame",null),a.setLCShow(!1),a.setPCShow(!0)},function(){o()}()};angular.module("app").controller("loginController",["$scope","socketService","displayService","playerService",t])}(),function(){"use strict";var t=function(t,e,a,i,o,r){function n(t,e){return e.username==t.userName}function s(){u.length>0,p.clearRect(0,0,m.width,m.height);var t=m.width/100;if(0!=f.length){var e=m.width/100,a=e*f[0].image.height/f[0].image.width;for(var i in f){var o=f[i];o.width=e,o.height=a,0==o.explodeStage?(p.save(),p.translate(o.x*t,o.y*t),p.rotate(o.rotation/180*Math.PI),p.drawImage(o.image,-e/2,-a/2,e,a),p.restore(),f[i].x=Math.cos((o.rotation-90)/180*Math.PI)+o.x,f[i].y=Math.sin((o.rotation-90)/180*Math.PI)+o.y):o.explodeStage<4&&(console.log(o.explosionImage),p.save(),p.translate(o.x*t,o.y*t),p.drawImage(o.explosionImage,-e,-e,2*e,2*e),p.restore())}}if(0!=u.length){var r=m.width/20,n=r*u[0].image.height/u[0].image.width;for(var s in u){var d=u[s];d.width=r,d.height=n,p.save(),p.translate(d.x*t,d.y*t),p.rotate(d.rotation/180*Math.PI),p.drawImage(d.image,-r/2,-n/2,r,n),d.damage>0&&p.drawImage(d.damageImage,-r/2,-n/2,r,n),p.restore(),d.damage<4&&(u[s].x=Math.cos((d.rotation-90)/180*Math.PI)/10*d.speed+d.x,u[s].y=Math.sin((d.rotation-90)/180*Math.PI)/10*d.speed+d.y)}}if(w.length>0)for(var g in w){var c=w[g];if(c.width=m.width/700*c.image.width,c.height=c.width*c.image.height/c.image.width,p.save(),p.translate(c.x*t,c.y*t),p.rotate(c.rotation/180*Math.PI),p.drawImage(c.image,-c.width/2,-c.height/2,c.width,c.height),p.restore(),c.x<-5||c.x>105||c.y<-5||c.y>105){var y=Math.random();.25>y?(w[g].x=-4,w[g].y=Math.floor(100*Math.random()),w[g].rotation=Math.floor(180*Math.random()),w[g].setImage(Math.ceil(20*Math.random()))):.5>y?(w[g].x=Math.floor(100*Math.random()),w[g].y=-4,w[g].rotation=Math.floor(180*Math.random())+90,w[g].setImage(Math.ceil(20*Math.random()))):.75>y?(w[g].x=104,w[g].y=Math.floor(100*Math.random()),w[g].rotation=Math.floor(180*Math.random())+180,w[g].setImage(Math.ceil(20*Math.random()))):(w[g].x=Math.floor(100*Math.random()),w[g].y=104,w[g].rotation=Math.floor(180*Math.random())+270,w[g].setImage(Math.ceil(20*Math.random())))}else w[g].x=Math.cos((c.rotation-90)/180*Math.PI)/30+c.x,w[g].y=Math.sin((c.rotation-90)/180*Math.PI)/30+c.y}h(),l()}function h(){for(var t in f)f[t].x<0||f[t].x>m.width||f[t].y<0||f[t].y>m.height?f.splice(t,1):f[t].explodeStage>0&&(f[t].explodeStage<4?f[t].explode():f.splice(t,1))}function l(){var t=[];for(var e in u){u[e].damage<4&&t.push(u[e]);for(var a in f)if(0==f[a].explodeStage&&f[a].player!=u[e].userName){var o=Math.sqrt(2)/2*(f[a].height/2-f[a].width/2),r=(360-f[a].rotation)/180*Math.PI,n=f[a].x*m.width/100-o*Math.sin(r),s=f[a].y*m.width/100-o*Math.cos(r),h=u[e].x*m.width/100,l=u[e].y*m.width/100,g=Math.sqrt((n-h)*(n-h)+(s-l)*(s-l));if(g<f[a].width/2+u[e].width/2){var c=new Audio("../../assets/Bonus/sfx_lose.ogg");c.play(),u[e].increaseDamage();var p={};p.username=u[e].userName,p.life=3-u[e].damage,i.emit("playerLife",p),f[a].explode()}}for(var y in w){var v=w[y].x*m.width/100,x=w[y].y*m.width/100,h=u[e].x*m.width/100,l=u[e].y*m.width/100,g=Math.sqrt((v-h)*(v-h)+(x-l)*(x-l));if(g<w[y].width/2+u[e].width/2){var c=new Audio("../../assets/Bonus/sfx_lose.ogg");c.play(),u[e].dead();var p={};p.username=u[e].userName,p.life=3-u[e].damage,i.emit("playerLife",p)}}}for(var y in w)for(var a in f)if(0==f[a].explodeStage&&f[a].player!=w[y].userName){var o=Math.sqrt(2)/2*(f[a].height/2-f[a].width/2),r=(360-f[a].rotation)/180*Math.PI,n=f[a].x*m.width/100-o*Math.sin(r),s=f[a].y*m.width/100-o*Math.cos(r),v=w[y].x*m.width/100,x=w[y].y*m.width/100,g=Math.sqrt((n-v)*(n-v)+(s-x)*(s-x));if(g<f[a].width/2+w[y].width/2){var c=new Audio("../../assets/Bonus/sfx_lose.ogg");c.play();var p={};p.username=w[y].userName,p.life=3-w[y].damage,i.emit("playerLife",p),f[a].explode()}}1==t.length&&d(t)}function d(a){angular.isDefined(c)&&(e.cancel(c),c=void 0),t.endGame=!0,t.endGameText=a[0].userName+" is the winner!",i.emit("endGame",a[0].userName)}var g=[{x:10,y:10,rotation:135},{x:90,y:10,rotation:225},{x:90,y:90,rotation:315},{x:10,y:90,rotation:45}];t.PCShow=o.getPCShow,t.endGame=!1;var c,m=document.getElementById("game"),p=m.getContext("2d"),u=new Array,f=new Array,w=new Array;i.on("initGame",function(){var t=r.getPlayers(),a=0;for(var i in t){var o=t[i];u.push(new Spaceship(o.username,g[a].x,g[a].y,o.color,g[a].rotation)),a++}for(var n=0;10>n;n++)w.push(new Asteroid(Math.floor(100*Math.random()),Math.floor(100*Math.random()),Math.floor(361*Math.random()),Math.ceil(20*Math.random())));c=e(s,10)}),i.on("userleft",function(t){var e=null;for(var a in u)1==n(u[a],t)&&(e=a);u.splice(e,1)}),i.on("updateGameData",function(t){var e=null;for(var a in u)1==n(u[a],t)&&(e=a);null!=e&&u[e].rotateSpaceshipRelative(t.orientation)}),i.on("playerShot",function(e){if(0==t.endGame){var a=null;for(var i in u)1==n(u[i],e)&&(a=i);if(null!=a){var o=u[a],r=(360-(o.rotation+180))/180*Math.PI,s=o.x+m.width/400*Math.sin(r),h=o.y+m.width/400*Math.cos(r);f.push(new Bullet(s,h,o.rotation,o.color,o.userName));var l="../../assets/Bonus/sfx_laser2.ogg";a%2==0&&(l="../../assets/Bonus/sfx_laser1.ogg");var d=new Audio(l);d.play()}}}),t.restartGame=function(){t.endGame=!1;var a=0;for(var o in u)u[o].reset(g[a].x,g[a].y,g[a].rotation),a++;p.clearRect(0,0,m.width,m.height),i.emit("restartGame",null),c=e(s,10)}};angular.module("app").controller("playController",["$scope","$interval","$window","socketService","displayService","playerService",t])}(),function(){var t=function(){var t=!0,e=!1;return{getLCShow:function(){return t},setLCShow:function(e){t=e},getPCShow:function(){return e},setPCShow:function(t){e=t}}};angular.module("app").factory("displayService",[t])}(),function(){var t=function(){var t=[];return{getPlayers:function(){return t},setPlayers:function(e){t=e}}};angular.module("app").factory("playerService",[t])}();var Asteroid=function(t,e,a,i){this.x=t,this.y=e,this.width=0,this.height=0,this.rotation=a,this.stage=i,this.image=new Image,this.image.src="../assets/PNG/Meteors/meteor_"+i+".png"};Asteroid.prototype.setImage=function(t){this.stage=t,this.image.src="../assets/PNG/Meteors/meteor_"+t+".png"};var Bullet=function(t,e,a,i,o){this.x=t,this.y=e,this.rotation=a,this.image=new Image,this.color=i,this.width=0,this.height=0,this.player=o,this.explosionImage=new Image,this.explodeStage=0,"orange"==this.color&&(this.color="red"),this.image.src="../assets/PNG/Lasers/laser"+this.color.charAt(0).toUpperCase()+this.color.slice(1)+"01.png"};Bullet.prototype.explode=function(){if(this.explodeStage<4){this.explodeStage++;var t;t=this.explodeStage<3?1:2,this.explosionImage.src="../assets/PNG/Lasers/laser"+this.color.charAt(0).toUpperCase()+this.color.slice(1)+"Explode"+t+".png"}else this.explosionImage.src=""};var Spaceship=function(t,e,a,i,o){this.userName=t,this.x=e,this.y=a,this.speed=1,this.color=i,this.rotation=o,this.image=new Image,this.damage=0,this.width=0,this.height=0,this.damageImage=new Image,this.image.src="../assets/PNG/playerShip1_"+this.color+".png"};Spaceship.prototype.reset=function(t,e,a){this.speed=1,this.damage=0,this.damageImage=new Image,this.image.src="../assets/PNG/playerShip1_"+this.color+".png",this.x=t,this.y=e,this.rotation=a},Spaceship.prototype.moveSpaceship=function(t,e){this.x=t,this.y=e},Spaceship.prototype.moveSpaceshipRelative=function(t,e){this.x=this.x+t,this.y=this.y+e},Spaceship.prototype.rotateSpaceship=function(t){this.rotation=t},Spaceship.prototype.rotateSpaceshipRelative=function(t){this.rotation=this.rotation+t/5,this.rotation<-360&&(this.rotation=this.rotation+720),this.rotation>360&&(this.rotation=this.rotation-720)},Spaceship.prototype.increaseDamage=function(){this.damage<4&&(this.damage+=1),this.damage<=3&&this.damage>0?this.damageImage.src="../assets/PNG/Damage/playerShip1_damage"+this.damage+".png":4==this.damage&&(this.damageImage.src="../assets/PNG/Damage/explode.gif")},Spaceship.prototype.dead=function(){this.damage=4,this.damageImage.src="../assets/PNG/Damage/explode.gif"},Spaceship.prototype.decreaseDamage=function(){this.damage>0&&(this.damage-=1),this.damage<=3&&this.damage>0&&(this.damageImage.src="../assets/PNG/Damage/playerShip1_damage"+this.damage+".png")},function(){var t=function(t){"use strict";var e=io.connect(window.location.host),a=function(a,i){e.on(a,function(){var a=arguments;t.$apply(function(){i.apply(e,a)})})},i=function(a,i,o){e.emit(a,i,function(){var a=arguments;t.$apply(function(){o&&o.apply(e,a)})})};return{on:a,emit:i,socket:e}};angular.module("app").factory("socketService",["$rootScope",t])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImRpcmVjdGl2ZXMvY2FudmFzRGlyZWN0aXZlLmpzIiwiY29udHJvbGxlci9sb2dpbkNvbnRyb2xsZXIuanMiLCJjb250cm9sbGVyL3BsYXlDb250cm9sbGVyLmpzIiwic2VydmljZXMvZGlzcGxheVNlcnZpY2UuanMiLCJzZXJ2aWNlcy9wbGF5ZXJTZXJ2aWNlLmpzIiwibW9kZWxzL2FzdGVyaW9kLmpzIiwibW9kZWxzL0J1bGxldC5qcyIsIm1vZGVscy9TcGFjZXNoaXAuanMiLCJzZXJ2aWNlcy9zb2NrZXRTZXJ2aWNlLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJjYW52YXNEaXJlY3RpdmUiLCIkd2luZG93IiwibGluayIsInNjb3BlIiwiZWxlbWVudCIsImF0dHJzIiwiaW5uZXJXaWR0aCIsImlubmVySGVpZ2h0Iiwid2lkdGgiLCJiaW5kIiwiJGRpZ2VzdCIsInJlc3RyaWN0IiwicmVwbGFjZSIsInRlbXBsYXRlIiwiZGlyZWN0aXZlIiwibG9naW5Db250cm9sbGVyIiwiJHNjb3BlIiwic29ja2V0U2VydmljZSIsImRpc3BsYXlTZXJ2aWNlIiwicGxheWVyU2VydmljZSIsIkxDU2hvdyIsImdldExDU2hvdyIsIm1ha2VSb29tIiwiZW1pdCIsInJvb20iLCJvbiIsImRhdGEiLCJkZXZpY2VPcmllbnRhdGlvbiIsInVzZXJuYW1lIiwiZ2FtbWEiLCJiZXRhIiwiYWxwaGEiLCJ1c2VybmFtZXMiLCJjaGVja1VzZXJDb3VudCIsInNldFBsYXllcnMiLCJPYmplY3QiLCJrZXlzIiwibGVuZ3RoIiwic3RhcnRHYW1lIiwic2V0TENTaG93Iiwic2V0UENTaG93IiwiY29udHJvbGxlciIsInBsYXlDb250cm9sbGVyIiwiJGludGVydmFsIiwiZmlsdGVyUGxheWVycyIsIm9iaiIsInVzZXJOYW1lIiwiZHJhdyIsIkFsbFBsYXllcnMiLCJjdHgiLCJjbGVhclJlY3QiLCJjYW52IiwiaGVpZ2h0IiwicmF0aW8iLCJBbGxCdWxsZXRzIiwiQnVsbGV0V2lkdGgiLCJCdWxsZXRIZWlnaHQiLCJpbWFnZSIsImJ1bGxldCIsImIiLCJleHBsb2RlU3RhZ2UiLCJzYXZlIiwidHJhbnNsYXRlIiwieCIsInkiLCJyb3RhdGUiLCJyb3RhdGlvbiIsIk1hdGgiLCJQSSIsImRyYXdJbWFnZSIsInJlc3RvcmUiLCJjb3MiLCJzaW4iLCJjb25zb2xlIiwibG9nIiwiZXhwbG9zaW9uSW1hZ2UiLCJTcGFjZXNoaXBXaWR0aCIsIlNwYWNlc2hpcEhlaWdodCIsInBsYXllciIsInAiLCJkYW1hZ2UiLCJkYW1hZ2VJbWFnZSIsInNwZWVkIiwiQWxsQXN0ZXJvaWRzIiwiQXN0ZXJvaWQiLCJhIiwia2V1emUiLCJyYW5kb20iLCJmbG9vciIsInNldEltYWdlIiwiY2VpbCIsImNoZWNrQnVsbGV0cyIsImNvbGxpc2lvbkRldGVjdGlvbiIsInNwbGljZSIsImV4cGxvZGUiLCJsaXZpbmdQbGF5ZXJzIiwicHVzaCIsInJhZGl1cyIsInNxcnQiLCJhbmdsZSIsImJ1bGxldEhlYWRYIiwiYnVsbGV0SGVhZFkiLCJzcGFjZVNoaXBYIiwic3BhY2VTaGlwWSIsImRpc3RhbmNlIiwiZGFtYWdlc291bmQiLCJBdWRpbyIsInBsYXkiLCJpbmNyZWFzZURhbWFnZSIsImxpZmUiLCJhc3Rlcm9pZFgiLCJhc3Rlcm9pZFkiLCJkZWFkIiwiZW5kR2FtZSIsImlzRGVmaW5lZCIsImN5Y2xlIiwiY2FuY2VsIiwidW5kZWZpbmVkIiwiZW5kR2FtZVRleHQiLCJkZWZhdWx0VmFycyIsIlBDU2hvdyIsImdldFBDU2hvdyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJnZXRDb250ZXh0IiwiQXJyYXkiLCJCdWZmZXJQbGF5ZXIiLCJnZXRQbGF5ZXJzIiwidGVsbGVyIiwiU3BhY2VzaGlwIiwiY29sb3IiLCJpIiwicm90YXRlU3BhY2VzaGlwUmVsYXRpdmUiLCJvcmllbnRhdGlvbiIsInRlbXAiLCJCdWxsZXQiLCJhdWRpb1VybCIsInNob3QiLCJyZXN0YXJ0R2FtZSIsInJlc2V0IiwidmFsdWUiLCJmYWN0b3J5IiwicGxheWVycyIsInBsYXllcnNBcnJheSIsInN0YWdlIiwidGhpcyIsIkltYWdlIiwic3JjIiwicHJvdG90eXBlIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJzbGljZSIsIm51bWJlciIsIm1vdmVTcGFjZXNoaXAiLCJtb3ZlU3BhY2VzaGlwUmVsYXRpdmUiLCJyb3RhdGVTcGFjZXNoaXAiLCJkZWdyZWUiLCJkZWNyZWFzZURhbWFnZSIsIiRyb290U2NvcGUiLCJzb2NrZXQiLCJpbyIsImNvbm5lY3QiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhvc3QiLCJldmVudE5hbWUiLCJjYWxsYmFjayIsImFyZ3MiLCJhcmd1bWVudHMiLCIkYXBwbHkiLCJhcHBseSJdLCJtYXBwaW5ncyI6IkNBR0EsV0FFQUEsUUFBQUMsT0FBQSxhQ0ZBLFdBQ0EsR0FBQUMsR0FBQSxTQUFBQyxHQVFBLFFBQUFDLEdBQUFDLEVBQUFDLEVBQUFDLEdBQ0FKLEVBQUFLLFdBQUFMLEVBQUFNLFlBQ0FKLEVBQUFLLE1BQUFQLEVBQUFLLFdBQUEsR0FFQUgsRUFBQUssTUFBQVAsRUFBQU0sWUFBQSxHQUdBVCxRQUFBTSxRQUFBSCxHQUFBUSxLQUFBLFNBQUEsV0FDQVIsRUFBQUssV0FBQUwsRUFBQU0sWUFDQUosRUFBQUssTUFBQVAsRUFBQUssV0FBQSxHQUVBSCxFQUFBSyxNQUFBUCxFQUFBTSxZQUFBLEdBR0FKLEVBQUFPLFlBckJBLE9BQ0FDLFNBQUEsSUFDQVQsS0FBQUEsRUFDQVUsU0FBQSxFQUNBQyxTQUFBLDhFQXNCQWYsU0FBQUMsT0FBQSxPQUFBZSxVQUFBLG1CQUFBLFVBQUFkLE9DM0JBLFdBQ0EsR0FBQWUsR0FBQSxTQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUVBSCxFQUFBSSxPQUFBRixFQUFBRyxTQUdBLElBQUFDLEdBQUEsV0FDQUwsRUFBQU0sS0FBQSxZQUFBLE1BRUFQLEdBQUFRLEtBQUEsR0FDQVAsRUFBQVEsR0FBQSxjQUFBLFNBQUFDLEdBQ0FWLEVBQUFRLEtBQUFFLElB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QUE0SSxFQUFBQyxHQUNBUCxFQUFBdEksR0FBQTRJLEVBQUEsV0FDQSxHQUFBRSxHQUFBQyxTQUNBVixHQUFBVyxPQUFBLFdBQ0FILEVBQUFJLE1BQUFYLEVBQUFRLFFBS0FoSixFQUFBLFNBQUE4SSxFQUFBM0ksRUFBQTRJLEdBQ0FQLEVBQUF4SSxLQUFBOEksRUFBQTNJLEVBQUEsV0FDQSxHQUFBNkksR0FBQUMsU0FDQVYsR0FBQVcsT0FBQSxXQUNBSCxHQUNBQSxFQUFBSSxNQUFBWCxFQUFBUSxPQU9BLFFBQ0E5SSxHQUFBQSxFQUNBRixLQUFBQSxFQUNBd0ksT0FBQUEsR0FJQWpLLFNBQUFDLE9BQUEsT0FBQThJLFFBQUEsaUJBQUEsYUFBQTVIIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENyZWF0ZWQgYnkgTWljaGllbCBvbiAyNS8xMS8yMDE1LlxuICovXG4oZnVuY3Rpb24oKXtcblxuICAgIHZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZShcImFwcFwiLFtdKTtcbn0pKCk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkganVzdGlqbmRlcG92ZXIgb24gMTYvMTIvMTUuXHJcbiAqL1xyXG4oZnVuY3Rpb24oKXtcclxuICAgIHZhciBjYW52YXNEaXJlY3RpdmUgPSBmdW5jdGlvbigkd2luZG93KXtcclxuICAgICAgICByZXR1cm57XHJcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXHJcbiAgICAgICAgICAgIGxpbms6bGluayxcclxuICAgICAgICAgICAgcmVwbGFjZTp0cnVlLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZTonPGNhbnZhcyBpZD1cImdhbWVcIiBjbGFzcz1cInBsYXlBcmVhXCIgd2lkdGg9XCJ7e3dpZHRofX1cIiBoZWlnaHQ9XCJ7e3dpZHRofX1cIiAvPidcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycyl7XHJcbiAgICAgICAgICAgIGlmKCR3aW5kb3cuaW5uZXJXaWR0aCA8ICR3aW5kb3cuaW5uZXJIZWlnaHQpe1xyXG4gICAgICAgICAgICAgICAgc2NvcGUud2lkdGggPSAkd2luZG93LmlubmVyV2lkdGggLSAyMDtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICBzY29wZS53aWR0aCA9ICR3aW5kb3cuaW5uZXJIZWlnaHQgLSAyMDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCR3aW5kb3cpLmJpbmQoJ3Jlc2l6ZScsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBpZigkd2luZG93LmlubmVyV2lkdGggPCAkd2luZG93LmlubmVySGVpZ2h0KXtcclxuICAgICAgICAgICAgICAgICAgICBzY29wZS53aWR0aCA9ICR3aW5kb3cuaW5uZXJXaWR0aCAtIDIwO1xyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUud2lkdGggPSAkd2luZG93LmlubmVySGVpZ2h0IC0gMjA7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgc2NvcGUuJGRpZ2VzdCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5kaXJlY3RpdmUoXCJjYW52YXNEaXJlY3RpdmVcIiwgW1wiJHdpbmRvd1wiLCBjYW52YXNEaXJlY3RpdmVdKTtcclxufSkoKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBNaWNoaWVsIG9uIDExLzEyLzIwMTUuXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgbG9naW5Db250cm9sbGVyID0gZnVuY3Rpb24oJHNjb3BlLCBzb2NrZXRTZXJ2aWNlLCBkaXNwbGF5U2VydmljZSwgcGxheWVyU2VydmljZSl7XHJcblxyXG4gICAgICAgICRzY29wZS5MQ1Nob3cgPSBkaXNwbGF5U2VydmljZS5nZXRMQ1Nob3c7XHJcblxyXG4gICAgICAgIC8vZnVuY3Rpb25zXHJcbiAgICAgICAgdmFyIG1ha2VSb29tID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgc29ja2V0U2VydmljZS5lbWl0KFwicGNjb25uZWN0XCIsIG51bGwpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgJHNjb3BlLnJvb20gPSBcIlwiO1xyXG4gICAgICAgIHNvY2tldFNlcnZpY2Uub24oJ3JlcXVlc3RSb29tJyxmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICAgICAgJHNjb3BlLnJvb20gPSBkYXRhO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHNvY2tldFNlcnZpY2Uub24oJ2RldmljZU9yaWVudGF0aW9uJywgZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgICAgIHZhciB1c2VybmFtZSA9IGRhdGEudXNlcm5hbWU7XHJcbiAgICAgICAgICAgIHZhciBkZXZpY2VPcmllbnRhdGlvbiA9IHt9O1xyXG4gICAgICAgICAgICBkZXZpY2VPcmllbnRhdGlvbi5nYW1tYSA9IGRhdGEuZ2FtbWE7XHJcbiAgICAgICAgICAgIGRldmljZU9yaWVudGF0aW9uLmJldGEgPSBkYXRhLmJldGE7XHJcbiAgICAgICAgICAgIGRldmljZU9yaWVudGF0aW9uLmFscGhhID0gZGF0YS5hbHBoYTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkc2NvcGUudXNlcm5hbWVzID0ge307XHJcbiAgICAgICAgJHNjb3BlLmNoZWNrVXNlckNvdW50ID0gZmFsc2U7XHJcbiAgICAgICAgc29ja2V0U2VydmljZS5vbigndXBkYXRldXNlcnMnLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICBwbGF5ZXJTZXJ2aWNlLnNldFBsYXllcnMoZGF0YSk7XHJcbiAgICAgICAgICAgICRzY29wZS51c2VybmFtZXMgPSBkYXRhO1xyXG4gICAgICAgICAgICAkc2NvcGUuY2hlY2tVc2VyQ291bnQgPSBPYmplY3Qua2V5cygkc2NvcGUudXNlcm5hbWVzKS5sZW5ndGggPCAwO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkc2NvcGUuc3RhcnRHYW1lPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNvY2tldFNlcnZpY2UuZW1pdChcInN0YXJ0R2FtZVwiLCBudWxsKTtcclxuICAgICAgICAgICAgZGlzcGxheVNlcnZpY2Uuc2V0TENTaG93KGZhbHNlKTtcclxuICAgICAgICAgICAgZGlzcGxheVNlcnZpY2Uuc2V0UENTaG93KHRydWUpO1xyXG4gICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICAoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIG1ha2VSb29tKCk7XHJcbiAgICAgICAgfSkoKTtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmNvbnRyb2xsZXIoXCJsb2dpbkNvbnRyb2xsZXJcIiwgW1wiJHNjb3BlXCIsIFwic29ja2V0U2VydmljZVwiICwgXCJkaXNwbGF5U2VydmljZVwiLCBcInBsYXllclNlcnZpY2VcIiwgbG9naW5Db250cm9sbGVyXSk7XHJcbn0pKCk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgTWljaGllbCBvbiAxNi8xMi8yMDE1LlxyXG4gKi9cclxuXHJcbihmdW5jdGlvbigpe1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcbiAgICB2YXIgcGxheUNvbnRyb2xsZXIgPSBmdW5jdGlvbigkc2NvcGUsICRpbnRlcnZhbCwgJHdpbmRvdywgc29ja2V0U2VydmljZSwgZGlzcGxheVNlcnZpY2UsIHBsYXllclNlcnZpY2Upe1xyXG4gICAgICAgIHZhciBkZWZhdWx0VmFycyA9IFt7eDoxMCwgeToxMCxyb3RhdGlvbjoxMzV9LHt4OjkwLCB5OjEwLHJvdGF0aW9uOjIyNX0se3g6OTAsIHk6OTAscm90YXRpb246MzE1fSx7eDoxMCwgeTo5MCxyb3RhdGlvbjo0NX1dO1xyXG4gICAgICAgICRzY29wZS5QQ1Nob3cgPSBkaXNwbGF5U2VydmljZS5nZXRQQ1Nob3c7XHJcbiAgICAgICAgJHNjb3BlLmVuZEdhbWUgPSBmYWxzZTtcclxuICAgICAgICB2YXIgY2FudiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYW1lJyk7XHJcbiAgICAgICAgdmFyIGN0eCA9IGNhbnYuZ2V0Q29udGV4dCgnMmQnKTtcclxuXHJcbiAgICAgICAgdmFyIEFsbFBsYXllcnMgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICB2YXIgQWxsQnVsbGV0cyA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgIHZhciBBbGxBc3Rlcm9pZHMgPSBuZXcgQXJyYXkoKTtcclxuXHJcbiAgICAgICAgdmFyIGN5Y2xlO1xyXG5cclxuICAgICAgICBzb2NrZXRTZXJ2aWNlLm9uKFwiaW5pdEdhbWVcIiwgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgdmFyIEJ1ZmZlclBsYXllciA9IHBsYXllclNlcnZpY2UuZ2V0UGxheWVycygpO1xyXG4gICAgICAgICAgICB2YXIgdGVsbGVyPSAwO1xyXG4gICAgICAgICAgICBmb3IodmFyIHBsYXllciBpbiBCdWZmZXJQbGF5ZXIpe1xyXG4gICAgICAgICAgICAgICAgdmFyIHAgPSBCdWZmZXJQbGF5ZXJbcGxheWVyXTtcclxuICAgICAgICAgICAgICAgIEFsbFBsYXllcnMucHVzaChuZXcgU3BhY2VzaGlwKHAudXNlcm5hbWUsIGRlZmF1bHRWYXJzW3RlbGxlcl0ueCwgZGVmYXVsdFZhcnNbdGVsbGVyXS55LCBwLmNvbG9yLCBkZWZhdWx0VmFyc1t0ZWxsZXJdLnJvdGF0aW9uKSk7XHJcbiAgICAgICAgICAgICAgICB0ZWxsZXIrKztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaTwxMDsgaSsrKXtcclxuICAgICAgICAgICAgICAgIEFsbEFzdGVyb2lkcy5wdXNoKG5ldyBBc3Rlcm9pZChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMTAwKSwgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjEwMCksIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSozNjEpLCBNYXRoLmNlaWwoTWF0aC5yYW5kb20oKSoyMCkpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgIGN5Y2xlID0gJGludGVydmFsKGRyYXcsIDEwKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgc29ja2V0U2VydmljZS5vbihcInVzZXJsZWZ0XCIsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIHZhciBwID0gbnVsbDtcclxuICAgICAgICAgICAgZm9yKHZhciBpIGluIEFsbFBsYXllcnMpe1xyXG4gICAgICAgICAgICAgICAgaWYoZmlsdGVyUGxheWVycyhBbGxQbGF5ZXJzW2ldLGRhdGEpID09IHRydWUpe1xyXG4gICAgICAgICAgICAgICAgICAgIHAgPSBpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIEFsbFBsYXllcnMuc3BsaWNlKHAsMSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHNvY2tldFNlcnZpY2Uub24oXCJ1cGRhdGVHYW1lRGF0YVwiLCBmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICAgICAgdmFyIHAgPSBudWxsO1xyXG4gICAgICAgICAgICBmb3IodmFyIGkgaW4gQWxsUGxheWVycyl7XHJcbiAgICAgICAgICAgICAgICBpZihmaWx0ZXJQbGF5ZXJzKEFsbFBsYXllcnNbaV0sZGF0YSkgPT0gdHJ1ZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgcCA9IGk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYocCAhPSBudWxsKXtcclxuICAgICAgICAgICAgICAgIEFsbFBsYXllcnNbcF0ucm90YXRlU3BhY2VzaGlwUmVsYXRpdmUoZGF0YS5vcmllbnRhdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgc29ja2V0U2VydmljZS5vbihcInBsYXllclNob3RcIiwgZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgICAgIGlmKCRzY29wZS5lbmRHYW1lPT1mYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHAgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBBbGxQbGF5ZXJzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbHRlclBsYXllcnMoQWxsUGxheWVyc1tpXSwgZGF0YSkgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwID0gaTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAocCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBBbGxQbGF5ZXJzW3BdO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhbmdsZSA9ICgzNjAgLSAodGVtcC5yb3RhdGlvbiArIDE4MCkpIC8gMTgwICogTWF0aC5QSTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IHRlbXAueCArIChjYW52LndpZHRoIC8gNDAwICogTWF0aC5zaW4oYW5nbGUpKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgeSA9IHRlbXAueSArIChjYW52LndpZHRoIC8gNDAwICogTWF0aC5jb3MoYW5nbGUpKTtcclxuICAgICAgICAgICAgICAgICAgICBBbGxCdWxsZXRzLnB1c2gobmV3IEJ1bGxldCh4LCB5LCB0ZW1wLnJvdGF0aW9uLCB0ZW1wLmNvbG9yLCB0ZW1wLnVzZXJOYW1lKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGF1ZGlvVXJsID0gJy4uLy4uL2Fzc2V0cy9Cb251cy9zZnhfbGFzZXIyLm9nZyc7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHAgJSAyID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXVkaW9VcmwgPSAnLi4vLi4vYXNzZXRzL0JvbnVzL3NmeF9sYXNlcjEub2dnJztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNob3QgPSBuZXcgQXVkaW8oYXVkaW9VcmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNob3QucGxheSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGZpbHRlclBsYXllcnMob2JqLGRhdGEpe1xyXG4gICAgICAgICAgICByZXR1cm4gZGF0YS51c2VybmFtZSA9PSBvYmoudXNlck5hbWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBkcmF3KCl7XHJcbiAgICAgICAgICAgIGlmKEFsbFBsYXllcnMubGVuZ3RoPjApe1xyXG4gICAgICAgICAgICAgICAgLy9BbGxQbGF5ZXJzWzBdLnNwZWVkID0gMDtcclxuICAgICAgICAgICAgICAgIC8vQWxsUGxheWVyc1sxXS5zcGVlZCA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLDAsY2Fudi53aWR0aCwgY2Fudi5oZWlnaHQpO1xyXG4gICAgICAgICAgICB2YXIgcmF0aW8gPSBjYW52LndpZHRoLzEwMDtcclxuXHJcbiAgICAgICAgICAgIGlmKEFsbEJ1bGxldHMubGVuZ3RoICE9IDApe1xyXG4gICAgICAgICAgICAgICAgdmFyIEJ1bGxldFdpZHRoID0gY2Fudi53aWR0aC8xMDA7XHJcbiAgICAgICAgICAgICAgICB2YXIgQnVsbGV0SGVpZ2h0ID0gQnVsbGV0V2lkdGggKiBBbGxCdWxsZXRzWzBdLmltYWdlLmhlaWdodC9BbGxCdWxsZXRzWzBdLmltYWdlLndpZHRoO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvcih2YXIgYnVsbGV0IGluIEFsbEJ1bGxldHMpe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBiID0gQWxsQnVsbGV0c1tidWxsZXRdO1xyXG4gICAgICAgICAgICAgICAgICAgIGIud2lkdGggPSBCdWxsZXRXaWR0aDtcclxuICAgICAgICAgICAgICAgICAgICBiLmhlaWdodCA9IEJ1bGxldEhlaWdodDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoYi5leHBsb2RlU3RhZ2UgPT0gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vRHJhdyBidWxsZXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnNhdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZShiLngqcmF0aW8sIGIueSpyYXRpbyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5yb3RhdGUoYi5yb3RhdGlvbi8xODAqTWF0aC5QSSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoYi5pbWFnZSwgLUJ1bGxldFdpZHRoLzIsIC1CdWxsZXRIZWlnaHQvMiwgQnVsbGV0V2lkdGgsIEJ1bGxldEhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBBbGxCdWxsZXRzW2J1bGxldF0ueCA9IE1hdGguY29zKChiLnJvdGF0aW9uIC0gOTApLzE4MCpNYXRoLlBJKSArIGIueDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQWxsQnVsbGV0c1tidWxsZXRdLnkgPSBNYXRoLnNpbigoYi5yb3RhdGlvbiAtIDkwKS8xODAqTWF0aC5QSSkrIGIueTtcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZihiLmV4cGxvZGVTdGFnZSA8IDQpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL0RyYXcgZXhwbG9zaW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGIuZXhwbG9zaW9uSW1hZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguc2F2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdHgudHJhbnNsYXRlKGIueCpyYXRpbywgYi55KnJhdGlvKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShiLmV4cGxvc2lvbkltYWdlLCAtQnVsbGV0V2lkdGgsIC1CdWxsZXRXaWR0aCwgQnVsbGV0V2lkdGgqMiwgQnVsbGV0V2lkdGgqMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZihBbGxQbGF5ZXJzLmxlbmd0aCAhPSAwKXtcclxuICAgICAgICAgICAgICAgIHZhciBTcGFjZXNoaXBXaWR0aCA9IGNhbnYud2lkdGgvMjA7XHJcbiAgICAgICAgICAgICAgICB2YXIgU3BhY2VzaGlwSGVpZ2h0ID0gU3BhY2VzaGlwV2lkdGggKiBBbGxQbGF5ZXJzWzBdLmltYWdlLmhlaWdodC8gQWxsUGxheWVyc1swXS5pbWFnZS53aWR0aDtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IodmFyIHBsYXllciBpbiBBbGxQbGF5ZXJzKXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcCA9IEFsbFBsYXllcnNbcGxheWVyXTtcclxuICAgICAgICAgICAgICAgICAgICBwLndpZHRoID0gU3BhY2VzaGlwV2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgcC5oZWlnaHQgPSBTcGFjZXNoaXBIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgY3R4LnNhdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICBjdHgudHJhbnNsYXRlKHAueCpyYXRpbywgcC55KnJhdGlvKTtcclxuICAgICAgICAgICAgICAgICAgICBjdHgucm90YXRlKHAucm90YXRpb24vMTgwKk1hdGguUEkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UocC5pbWFnZSwgLVNwYWNlc2hpcFdpZHRoLzIsIC1TcGFjZXNoaXBIZWlnaHQvMiwgU3BhY2VzaGlwV2lkdGgsIFNwYWNlc2hpcEhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocC5kYW1hZ2UgPiAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShwLmRhbWFnZUltYWdlLCAtU3BhY2VzaGlwV2lkdGgvMiwgLVNwYWNlc2hpcEhlaWdodC8yLCBTcGFjZXNoaXBXaWR0aCwgU3BhY2VzaGlwSGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZihwLmRhbWFnZTw0KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQWxsUGxheWVyc1twbGF5ZXJdLnggPSBNYXRoLmNvcygocC5yb3RhdGlvbiAtIDkwKS8xODAqTWF0aC5QSSkvMTAqIHAuc3BlZWQgKyBwLng7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEFsbFBsYXllcnNbcGxheWVyXS55ID0gTWF0aC5zaW4oKHAucm90YXRpb24gLSA5MCkvMTgwKk1hdGguUEkpLzEwKiBwLnNwZWVkICsgcC55O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYoQWxsQXN0ZXJvaWRzLmxlbmd0aD4wKXtcclxuICAgICAgICAgICAgICAgIGZvcih2YXIgQXN0ZXJvaWQgaW4gQWxsQXN0ZXJvaWRzKXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IEFsbEFzdGVyb2lkc1tBc3Rlcm9pZF07XHJcbiAgICAgICAgICAgICAgICAgICAgYS53aWR0aCA9IGNhbnYud2lkdGgvNzAwKiBhLmltYWdlLndpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgIGEuaGVpZ2h0ID0gYS53aWR0aCogYS5pbWFnZS5oZWlnaHQvIGEuaW1hZ2Uud2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgY3R4LnNhdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICBjdHgudHJhbnNsYXRlKGEueCpyYXRpbywgYS55KnJhdGlvKTtcclxuICAgICAgICAgICAgICAgICAgICBjdHgucm90YXRlKGEucm90YXRpb24vMTgwKk1hdGguUEkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoYS5pbWFnZSwgLWEud2lkdGgvMiwgLWEuaGVpZ2h0LzIsIGEud2lkdGgsIGEuaGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICBjdHgucmVzdG9yZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGEueCA8IC01IHx8IGEueCA+IDEwNSB8fCBhLnkgPCAtNSB8fCBhLnkgPiAxMDUpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL25pZXV3ZSBhc3Rlcm9pZCB0ZWtlbmVuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrZXV6ZSA9IE1hdGgucmFuZG9tKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGtldXplIDwgMC4yNSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2xpbmtzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbGxBc3Rlcm9pZHNbQXN0ZXJvaWRdLnggPSAtNDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFsbEFzdGVyb2lkc1tBc3Rlcm9pZF0ueSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoxMDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQWxsQXN0ZXJvaWRzW0FzdGVyb2lkXS5yb3RhdGlvbiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoxODApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQWxsQXN0ZXJvaWRzW0FzdGVyb2lkXS5zZXRJbWFnZShNYXRoLmNlaWwoTWF0aC5yYW5kb20oKSoyMCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZihrZXV6ZSA8IDAuNSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2JvdmVuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbGxBc3Rlcm9pZHNbQXN0ZXJvaWRdLnggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMTAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFsbEFzdGVyb2lkc1tBc3Rlcm9pZF0ueSA9IC00O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQWxsQXN0ZXJvaWRzW0FzdGVyb2lkXS5yb3RhdGlvbiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoxODApICsgOTA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbGxBc3Rlcm9pZHNbQXN0ZXJvaWRdLnNldEltYWdlKE1hdGguY2VpbChNYXRoLnJhbmRvbSgpKjIwKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKGtldXplIDwgMC43NSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3JlY2h0c1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQWxsQXN0ZXJvaWRzW0FzdGVyb2lkXS54ID0gMTA0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQWxsQXN0ZXJvaWRzW0FzdGVyb2lkXS55ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjEwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbGxBc3Rlcm9pZHNbQXN0ZXJvaWRdLnJvdGF0aW9uID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjE4MCkgKyAxODA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbGxBc3Rlcm9pZHNbQXN0ZXJvaWRdLnNldEltYWdlKE1hdGguY2VpbChNYXRoLnJhbmRvbSgpKjIwKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9vbmRlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQWxsQXN0ZXJvaWRzW0FzdGVyb2lkXS54ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjEwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbGxBc3Rlcm9pZHNbQXN0ZXJvaWRdLnkgPSAxMDQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbGxBc3Rlcm9pZHNbQXN0ZXJvaWRdLnJvdGF0aW9uID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjE4MCkgKyAyNzA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbGxBc3Rlcm9pZHNbQXN0ZXJvaWRdLnNldEltYWdlKE1hdGguY2VpbChNYXRoLnJhbmRvbSgpKjIwKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEFsbEFzdGVyb2lkc1tBc3Rlcm9pZF0ueCA9IE1hdGguY29zKChhLnJvdGF0aW9uIC0gOTApLzE4MCpNYXRoLlBJKS8zMCArIGEueDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQWxsQXN0ZXJvaWRzW0FzdGVyb2lkXS55ID0gTWF0aC5zaW4oKGEucm90YXRpb24gLSA5MCkvMTgwKk1hdGguUEkpLzMwICsgYS55O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY2hlY2tCdWxsZXRzKCk7XHJcblxyXG4gICAgICAgICAgICBjb2xsaXNpb25EZXRlY3Rpb24oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGNoZWNrQnVsbGV0cygpe1xyXG4gICAgICAgICAgICBmb3IodmFyIGIgaW4gQWxsQnVsbGV0cyl7XHJcbiAgICAgICAgICAgICAgICBpZihBbGxCdWxsZXRzW2JdLnggPCAwIHx8IEFsbEJ1bGxldHNbYl0ueCA+IGNhbnYud2lkdGggfHwgQWxsQnVsbGV0c1tiXS55IDwgMCB8fCBBbGxCdWxsZXRzW2JdLnkgPiBjYW52LmhlaWdodCl7XHJcbiAgICAgICAgICAgICAgICAgICAgQWxsQnVsbGV0cy5zcGxpY2UoYiwgMSk7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZSBpZihBbGxCdWxsZXRzW2JdLmV4cGxvZGVTdGFnZSA+MCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChBbGxCdWxsZXRzW2JdLmV4cGxvZGVTdGFnZSA8IDQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQWxsQnVsbGV0c1tiXS5leHBsb2RlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQWxsQnVsbGV0cy5zcGxpY2UoYiwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBjb2xsaXNpb25EZXRlY3Rpb24oKXtcclxuICAgICAgICAgICAgLy9QbGF5ZXIgLSBCdWxsZXRcclxuICAgICAgICAgICAgdmFyIGxpdmluZ1BsYXllcnM9W107XHJcbiAgICAgICAgICAgIGZvcih2YXIgcCBpbiBBbGxQbGF5ZXJzKXtcclxuICAgICAgICAgICAgICAgIGlmKEFsbFBsYXllcnNbcF0uZGFtYWdlPDQpe1xyXG4gICAgICAgICAgICAgICAgICAgIGxpdmluZ1BsYXllcnMucHVzaChBbGxQbGF5ZXJzW3BdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGZvcih2YXIgYiBpbiBBbGxCdWxsZXRzKXtcclxuICAgICAgICAgICAgICAgICAgICBpZihBbGxCdWxsZXRzW2JdLmV4cGxvZGVTdGFnZSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBbGxCdWxsZXRzW2JdLnBsYXllciAhPSBBbGxQbGF5ZXJzW3BdLnVzZXJOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmFkaXVzID0gTWF0aC5zcXJ0KDIpIC8gMiAqIChBbGxCdWxsZXRzW2JdLmhlaWdodCAvIDIgLSBBbGxCdWxsZXRzW2JdLndpZHRoIC8gMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYW5nbGUgPSAoMzYwIC0gKEFsbEJ1bGxldHNbYl0ucm90YXRpb24pKSAvIDE4MCAqIE1hdGguUEk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYnVsbGV0SGVhZFggPSAoQWxsQnVsbGV0c1tiXS54ICogY2Fudi53aWR0aCAvIDEwMCAtIChyYWRpdXMgKiBNYXRoLnNpbihhbmdsZSkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBidWxsZXRIZWFkWSA9IChBbGxCdWxsZXRzW2JdLnkgKiBjYW52LndpZHRoIC8gMTAwIC0gKHJhZGl1cyAqIE1hdGguY29zKGFuZ2xlKSkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcGFjZVNoaXBYID0gQWxsUGxheWVyc1twXS54ICogY2Fudi53aWR0aCAvIDEwMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcGFjZVNoaXBZID0gQWxsUGxheWVyc1twXS55ICogY2Fudi53aWR0aCAvIDEwMDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGlzdGFuY2UgPSBNYXRoLnNxcnQoKGJ1bGxldEhlYWRYIC0gc3BhY2VTaGlwWCkgKiAoYnVsbGV0SGVhZFggLSBzcGFjZVNoaXBYKSArIChidWxsZXRIZWFkWSAtIHNwYWNlU2hpcFkpICogKGJ1bGxldEhlYWRZIC0gc3BhY2VTaGlwWSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRpc3RhbmNlIDwgKEFsbEJ1bGxldHNbYl0ud2lkdGggLyAyICsgQWxsUGxheWVyc1twXS53aWR0aCAvIDIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhbWFnZXNvdW5kID0gbmV3IEF1ZGlvKCcuLi8uLi9hc3NldHMvQm9udXMvc2Z4X2xvc2Uub2dnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGFtYWdlc291bmQucGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFsbFBsYXllcnNbcF0uaW5jcmVhc2VEYW1hZ2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEudXNlcm5hbWUgPSBBbGxQbGF5ZXJzW3BdLnVzZXJOYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEubGlmZSA9IDMtQWxsUGxheWVyc1twXS5kYW1hZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc29ja2V0U2VydmljZS5lbWl0KFwicGxheWVyTGlmZVwiLGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFsbEJ1bGxldHNbYl0uZXhwbG9kZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy9QbGF5ZXIgLSBBc3Rlcm9pZFxyXG4gICAgICAgICAgICAgICAgZm9yKHZhciBhIGluIEFsbEFzdGVyb2lkcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFzdGVyb2lkWCA9IEFsbEFzdGVyb2lkc1thXS54ICogY2Fudi53aWR0aCAvIDEwMDtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYXN0ZXJvaWRZID0gQWxsQXN0ZXJvaWRzW2FdLnkgKiBjYW52LndpZHRoIC8gMTAwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgc3BhY2VTaGlwWCA9IEFsbFBsYXllcnNbcF0ueCAqIGNhbnYud2lkdGggLyAxMDA7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNwYWNlU2hpcFkgPSBBbGxQbGF5ZXJzW3BdLnkgKiBjYW52LndpZHRoIC8gMTAwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgZGlzdGFuY2UgPSBNYXRoLnNxcnQoKGFzdGVyb2lkWCAtIHNwYWNlU2hpcFgpICogKGFzdGVyb2lkWCAtIHNwYWNlU2hpcFgpICsgKGFzdGVyb2lkWSAtIHNwYWNlU2hpcFkpICogKGFzdGVyb2lkWSAtIHNwYWNlU2hpcFkpKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGlzdGFuY2UgPCAoQWxsQXN0ZXJvaWRzW2FdLndpZHRoIC8gMiArIEFsbFBsYXllcnNbcF0ud2lkdGggLyAyKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGFtYWdlc291bmQgPSBuZXcgQXVkaW8oJy4uLy4uL2Fzc2V0cy9Cb251cy9zZnhfbG9zZS5vZ2cnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGFtYWdlc291bmQucGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBBbGxQbGF5ZXJzW3BdLmRlYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS51c2VybmFtZSA9IEFsbFBsYXllcnNbcF0udXNlck5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEubGlmZSA9IDMtQWxsUGxheWVyc1twXS5kYW1hZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvY2tldFNlcnZpY2UuZW1pdChcInBsYXllckxpZmVcIixkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy9QbGF5ZXIgLSBQbGF5ZXJcclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgIC8vQnVsbGV0IC0gQXN0ZXJvaWRcclxuICAgICAgICAgICAgZm9yKHZhciBhIGluIEFsbEFzdGVyb2lkcykge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgYiBpbiBBbGxCdWxsZXRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKEFsbEJ1bGxldHNbYl0uZXhwbG9kZVN0YWdlID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFsbEJ1bGxldHNbYl0ucGxheWVyICE9IEFsbEFzdGVyb2lkc1thXS51c2VyTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJhZGl1cyA9IE1hdGguc3FydCgyKSAvIDIgKiAoQWxsQnVsbGV0c1tiXS5oZWlnaHQgLyAyIC0gQWxsQnVsbGV0c1tiXS53aWR0aCAvIDIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFuZ2xlID0gKDM2MCAtIChBbGxCdWxsZXRzW2JdLnJvdGF0aW9uKSkgLyAxODAgKiBNYXRoLlBJO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJ1bGxldEhlYWRYID0gKEFsbEJ1bGxldHNbYl0ueCAqIGNhbnYud2lkdGggLyAxMDAgLSAocmFkaXVzICogTWF0aC5zaW4oYW5nbGUpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYnVsbGV0SGVhZFkgPSAoQWxsQnVsbGV0c1tiXS55ICogY2Fudi53aWR0aCAvIDEwMCAtIChyYWRpdXMgKiBNYXRoLmNvcyhhbmdsZSkpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXN0ZXJvaWRYID0gQWxsQXN0ZXJvaWRzW2FdLnggKiBjYW52LndpZHRoIC8gMTAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFzdGVyb2lkWSA9IEFsbEFzdGVyb2lkc1thXS55ICogY2Fudi53aWR0aCAvIDEwMDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGlzdGFuY2UgPSBNYXRoLnNxcnQoKGJ1bGxldEhlYWRYIC0gYXN0ZXJvaWRYKSAqIChidWxsZXRIZWFkWCAtIGFzdGVyb2lkWCkgKyAoYnVsbGV0SGVhZFkgLSBhc3Rlcm9pZFkpICogKGJ1bGxldEhlYWRZIC0gYXN0ZXJvaWRZKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlzdGFuY2UgPCAoQWxsQnVsbGV0c1tiXS53aWR0aCAvIDIgKyBBbGxBc3Rlcm9pZHNbYV0ud2lkdGggLyAyKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYW1hZ2Vzb3VuZCA9IG5ldyBBdWRpbygnLi4vLi4vYXNzZXRzL0JvbnVzL3NmeF9sb3NlLm9nZycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhbWFnZXNvdW5kLnBsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEudXNlcm5hbWUgPSBBbGxBc3Rlcm9pZHNbYV0udXNlck5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5saWZlID0gMyAtIEFsbEFzdGVyb2lkc1thXS5kYW1hZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc29ja2V0U2VydmljZS5lbWl0KFwicGxheWVyTGlmZVwiLCBkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbGxCdWxsZXRzW2JdLmV4cGxvZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYobGl2aW5nUGxheWVycy5sZW5ndGg9PTEpe1xyXG4gICAgICAgICAgICAgICAgZW5kR2FtZShsaXZpbmdQbGF5ZXJzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZW5kR2FtZShsaXZpbmdQbGF5ZXJzKXtcclxuICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKGN5Y2xlKSkge1xyXG4gICAgICAgICAgICAgICAgJGludGVydmFsLmNhbmNlbChjeWNsZSk7XHJcbiAgICAgICAgICAgICAgICBjeWNsZSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkc2NvcGUuZW5kR2FtZT10cnVlO1xyXG4gICAgICAgICAgICAkc2NvcGUuZW5kR2FtZVRleHQ9IGxpdmluZ1BsYXllcnNbMF0udXNlck5hbWUgKyBcIiBpcyB0aGUgd2lubmVyIVwiXHJcbiAgICAgICAgICAgIHNvY2tldFNlcnZpY2UuZW1pdChcImVuZEdhbWVcIiwgbGl2aW5nUGxheWVyc1swXS51c2VyTmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICRzY29wZS5yZXN0YXJ0R2FtZSA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICRzY29wZS5lbmRHYW1lPWZhbHNlO1xyXG4gICAgICAgICAgICB2YXIgdGVsbGVyPTA7XHJcbiAgICAgICAgICAgIGZvcih2YXIgcCBpbiBBbGxQbGF5ZXJzKXtcclxuICAgICAgICAgICAgICAgIEFsbFBsYXllcnNbcF0ucmVzZXQoZGVmYXVsdFZhcnNbdGVsbGVyXS54LGRlZmF1bHRWYXJzW3RlbGxlcl0ueSxkZWZhdWx0VmFyc1t0ZWxsZXJdLnJvdGF0aW9uKTtcclxuICAgICAgICAgICAgICAgIHRlbGxlcisrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGN0eC5jbGVhclJlY3QoMCwwLGNhbnYud2lkdGgsIGNhbnYuaGVpZ2h0KTtcclxuICAgICAgICAgICAgc29ja2V0U2VydmljZS5lbWl0KFwicmVzdGFydEdhbWVcIixudWxsKTtcclxuICAgICAgICAgICAgY3ljbGUgPSAkaW50ZXJ2YWwoZHJhdywgMTApO1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmNvbnRyb2xsZXIoXCJwbGF5Q29udHJvbGxlclwiLCBbXCIkc2NvcGVcIiwgXCIkaW50ZXJ2YWxcIiwgXCIkd2luZG93XCIsIFwic29ja2V0U2VydmljZVwiLCBcImRpc3BsYXlTZXJ2aWNlXCIsIFwicGxheWVyU2VydmljZVwiLCBwbGF5Q29udHJvbGxlcl0pXHJcbn0pKCk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgTWljaGllbCBvbiAxNi8xMi8yMDE1LlxyXG4gKi9cclxuLyoqXHJcbiAqIENyZWF0ZWQgYnkganVzdGlqbmRlcG92ZXIgb24gMTYvMTIvMTUuXHJcbiAqL1xyXG5cclxuXHJcbihmdW5jdGlvbigpe1xyXG4gICAgdmFyIGRpc3BsYXlTZXJ2aWNlID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAvL0xvZ2luIENvbnRyb2xsZXJcclxuICAgICAgICB2YXIgTENTaG93ID0gdHJ1ZTtcclxuICAgICAgICAvL1BsYXkgY29udHJvbGxlclxyXG4gICAgICAgIHZhciBQQ1Nob3cgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgcmV0dXJue1xyXG4gICAgICAgICAgICBnZXRMQ1Nob3c6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTENTaG93O1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzZXRMQ1Nob3c6IGZ1bmN0aW9uKHZhbHVlKXtcclxuICAgICAgICAgICAgICAgIExDU2hvdyA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBnZXRQQ1Nob3c6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUENTaG93O1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzZXRQQ1Nob3c6IGZ1bmN0aW9uKHZhbHVlKXtcclxuICAgICAgICAgICAgICAgIFBDU2hvdyA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuZmFjdG9yeSgnZGlzcGxheVNlcnZpY2UnLCBbZGlzcGxheVNlcnZpY2VdKTtcclxufSkoKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBqdXN0aWpuZGVwb3ZlciBvbiAxNy8xMi8xNS5cclxuICovXHJcblxyXG4oZnVuY3Rpb24oKXtcclxuICAgIHZhciBwbGF5ZXJTZXJ2aWNlID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAvL0xvZ2luIENvbnRyb2xsZXJcclxuICAgICAgICB2YXIgcGxheWVycyA9IFtdO1xyXG5cclxuICAgICAgICByZXR1cm57XHJcbiAgICAgICAgICAgIGdldFBsYXllcnM6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcGxheWVycztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2V0UGxheWVyczogZnVuY3Rpb24ocGxheWVyc0FycmF5KXtcclxuICAgICAgICAgICAgICAgIHBsYXllcnMgPSBwbGF5ZXJzQXJyYXk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5mYWN0b3J5KCdwbGF5ZXJTZXJ2aWNlJywgW3BsYXllclNlcnZpY2VdKTtcclxufSkoKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBqdXN0aWpuZGVwb3ZlciBvbiAwOS8xMi8xNS5cclxuICovXHJcblxyXG5cclxudmFyIEFzdGVyb2lkID0gZnVuY3Rpb24oeCwgeSwgcm90YXRpb24sIHN0YWdlKXtcclxuICAgIHRoaXMueCA9IHg7XHJcbiAgICB0aGlzLnkgPSB5O1xyXG4gICAgdGhpcy53aWR0aCA9IDA7XHJcbiAgICB0aGlzLmhlaWdodCA9IDA7XHJcbiAgICB0aGlzLnJvdGF0aW9uID0gcm90YXRpb247XHJcbiAgICB0aGlzLnN0YWdlID0gc3RhZ2U7XHJcbiAgICB0aGlzLmltYWdlID0gbmV3IEltYWdlKCk7XHJcbiAgICB0aGlzLmltYWdlLnNyYyA9IChcIi4uL2Fzc2V0cy9QTkcvTWV0ZW9ycy9tZXRlb3JfXCIgKyBzdGFnZSArIFwiLnBuZ1wiKTtcclxufTtcclxuXHJcbkFzdGVyb2lkLnByb3RvdHlwZS5zZXRJbWFnZSA9IGZ1bmN0aW9uKHN0YWdlKXtcclxuICAgIHRoaXMuc3RhZ2UgPSBzdGFnZTtcclxuICAgIHRoaXMuaW1hZ2Uuc3JjID0gKFwiLi4vYXNzZXRzL1BORy9NZXRlb3JzL21ldGVvcl9cIiArIHN0YWdlICsgXCIucG5nXCIpO1xyXG59OyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGp1c3Rpam5kZXBvdmVyIG9uIDIyLzEyLzE1LlxyXG4gKi9cclxuXHJcbnZhciBCdWxsZXQgPSBmdW5jdGlvbih4LCB5LHJvdGF0aW9uLCBjb2xvciwgcGxheWVyKXtcclxuICAgIHRoaXMueCA9IHg7XHJcbiAgICB0aGlzLnkgPSB5O1xyXG4gICAgdGhpcy5yb3RhdGlvbiA9IHJvdGF0aW9uO1xyXG4gICAgdGhpcy5pbWFnZSA9IG5ldyBJbWFnZSgpO1xyXG4gICAgdGhpcy5jb2xvciA9IGNvbG9yO1xyXG4gICAgdGhpcy53aWR0aCA9IDA7XHJcbiAgICB0aGlzLmhlaWdodCA9IDA7XHJcbiAgICB0aGlzLnBsYXllciA9IHBsYXllcjtcclxuICAgIHRoaXMuZXhwbG9zaW9uSW1hZ2UgPSBuZXcgSW1hZ2UoKTtcclxuICAgIHRoaXMuZXhwbG9kZVN0YWdlID0gMDtcclxuICAgIGlmKHRoaXMuY29sb3IgPT0gXCJvcmFuZ2VcIil7XHJcbiAgICAgICAgdGhpcy5jb2xvciA9ICdyZWQnO1xyXG4gICAgfVxyXG4gICAgdGhpcy5pbWFnZS5zcmMgPSAnLi4vYXNzZXRzL1BORy9MYXNlcnMvbGFzZXInKyB0aGlzLmNvbG9yLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdGhpcy5jb2xvci5zbGljZSgxKSArJzAxLnBuZydcclxufTtcclxuXHJcbkJ1bGxldC5wcm90b3R5cGUuZXhwbG9kZSA9IGZ1bmN0aW9uKCl7XHJcbiAgICBpZih0aGlzLmV4cGxvZGVTdGFnZSA8IDQpe1xyXG4gICAgICAgIHRoaXMuZXhwbG9kZVN0YWdlKys7XHJcbiAgICAgICAgdmFyIG51bWJlcjtcclxuICAgICAgICBpZih0aGlzLmV4cGxvZGVTdGFnZSA8IDMpe1xyXG4gICAgICAgICAgIG51bWJlciA9IDFcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgbnVtYmVyID0gMlxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmV4cGxvc2lvbkltYWdlLnNyYyA9ICcuLi9hc3NldHMvUE5HL0xhc2Vycy9sYXNlcicgKyB0aGlzLmNvbG9yLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdGhpcy5jb2xvci5zbGljZSgxKSArICdFeHBsb2RlJysgbnVtYmVyICsnLnBuZyc7XHJcbiAgICB9ZWxzZXtcclxuICAgICAgICB0aGlzLmV4cGxvc2lvbkltYWdlLnNyYyA9ICcnO1xyXG4gICAgfVxyXG59O1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBqdXN0aWpuZGVwb3ZlciBvbiAwOS8xMi8xNS5cclxuICovXHJcblxyXG52YXIgU3BhY2VzaGlwID0gZnVuY3Rpb24odXNlck5hbWUsIHgsIHksIGNvbG9yLCByb3RhdGlvbil7XHJcbiAgICB0aGlzLnVzZXJOYW1lID0gdXNlck5hbWU7XHJcbiAgICB0aGlzLnggPSB4O1xyXG4gICAgdGhpcy55ID0geTtcclxuICAgIHRoaXMuc3BlZWQgPSAxO1xyXG4gICAgdGhpcy5jb2xvciA9IGNvbG9yO1xyXG4gICAgdGhpcy5yb3RhdGlvbiA9IHJvdGF0aW9uO1xyXG4gICAgdGhpcy5pbWFnZSA9IG5ldyBJbWFnZSgpO1xyXG4gICAgdGhpcy5kYW1hZ2UgPSAwO1xyXG4gICAgdGhpcy53aWR0aCA9IDA7XHJcbiAgICB0aGlzLmhlaWdodCA9IDA7XHJcbiAgICB0aGlzLmRhbWFnZUltYWdlID0gbmV3IEltYWdlKCk7XHJcbiAgICB0aGlzLmltYWdlLnNyYyA9ICcuLi9hc3NldHMvUE5HL3BsYXllclNoaXAxXycrIHRoaXMuY29sb3IgKycucG5nJ1xyXG59O1xyXG5cclxuU3BhY2VzaGlwLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uICh4LCB5LCByb3RhdGlvbikge1xyXG4gICAgdGhpcy5zcGVlZCA9IDE7XHJcbiAgICB0aGlzLmRhbWFnZSA9IDA7XHJcbiAgICB0aGlzLmRhbWFnZUltYWdlID0gbmV3IEltYWdlKCk7XHJcbiAgICB0aGlzLmltYWdlLnNyYyA9ICcuLi9hc3NldHMvUE5HL3BsYXllclNoaXAxXycrIHRoaXMuY29sb3IgKycucG5nJ1xyXG4gICAgdGhpcy54ID0geDtcclxuICAgIHRoaXMueSA9IHk7XHJcbiAgICB0aGlzLnJvdGF0aW9uID0gcm90YXRpb247XHJcbn07XHJcblxyXG5TcGFjZXNoaXAucHJvdG90eXBlLm1vdmVTcGFjZXNoaXAgPSBmdW5jdGlvbih4LCB5KXtcclxuICAgIHRoaXMueCA9IHg7XHJcbiAgICB0aGlzLnkgPSB5O1xyXG59O1xyXG5cclxuU3BhY2VzaGlwLnByb3RvdHlwZS5tb3ZlU3BhY2VzaGlwUmVsYXRpdmUgPSBmdW5jdGlvbih4LCB5KXtcclxuICAgIHRoaXMueCA9IHRoaXMueCt4O1xyXG4gICAgdGhpcy55ID0gdGhpcy55K3k7XHJcbn07XHJcblxyXG5TcGFjZXNoaXAucHJvdG90eXBlLnJvdGF0ZVNwYWNlc2hpcCA9IGZ1bmN0aW9uKGRlZ3JlZSl7XHJcbiAgICB0aGlzLnJvdGF0aW9uID0gZGVncmVlO1xyXG59O1xyXG5cclxuU3BhY2VzaGlwLnByb3RvdHlwZS5yb3RhdGVTcGFjZXNoaXBSZWxhdGl2ZSA9IGZ1bmN0aW9uKGRlZ3JlZSl7XHJcbiAgICB0aGlzLnJvdGF0aW9uID0gdGhpcy5yb3RhdGlvbiArIGRlZ3JlZS81O1xyXG4gICAgaWYodGhpcy5yb3RhdGlvbiA8IC0zNjApe1xyXG4gICAgICAgIHRoaXMucm90YXRpb24gPSB0aGlzLnJvdGF0aW9uICsgNzIwO1xyXG4gICAgfVxyXG4gICAgaWYodGhpcy5yb3RhdGlvbiA+IDM2MCl7XHJcbiAgICAgICAgdGhpcy5yb3RhdGlvbiA9IHRoaXMucm90YXRpb24gLSA3MjA7XHJcbiAgICB9XHJcbn07XHJcblxyXG5TcGFjZXNoaXAucHJvdG90eXBlLmluY3JlYXNlRGFtYWdlID0gZnVuY3Rpb24oKXtcclxuICAgIGlmKHRoaXMuZGFtYWdlIDwgNCl7XHJcbiAgICAgICAgdGhpcy5kYW1hZ2UgKz0gMTtcclxuICAgIH1cclxuXHJcbiAgICBpZih0aGlzLmRhbWFnZSA8PSAzICYmIHRoaXMuZGFtYWdlID4gMCl7XHJcbiAgICAgICAgdGhpcy5kYW1hZ2VJbWFnZS5zcmMgPSAnLi4vYXNzZXRzL1BORy9EYW1hZ2UvcGxheWVyU2hpcDFfZGFtYWdlJysgdGhpcy5kYW1hZ2UgKyAnLnBuZyc7XHJcbiAgICB9ZWxzZSBpZih0aGlzLmRhbWFnZT09NCl7XHJcbiAgICAgICAgdGhpcy5kYW1hZ2VJbWFnZS5zcmMgPSAnLi4vYXNzZXRzL1BORy9EYW1hZ2UvZXhwbG9kZS5naWYnO1xyXG4gICAgfVxyXG59O1xyXG5cclxuU3BhY2VzaGlwLnByb3RvdHlwZS5kZWFkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5kYW1hZ2UgPSA0O1xyXG4gICAgdGhpcy5kYW1hZ2VJbWFnZS5zcmMgPSAnLi4vYXNzZXRzL1BORy9EYW1hZ2UvZXhwbG9kZS5naWYnO1xyXG59O1xyXG5cclxuU3BhY2VzaGlwLnByb3RvdHlwZS5kZWNyZWFzZURhbWFnZSA9IGZ1bmN0aW9uKCl7XHJcbiAgICBpZih0aGlzLmRhbWFnZSA+IDApe1xyXG4gICAgICAgIHRoaXMuZGFtYWdlIC09IDE7XHJcbiAgICB9XHJcblxyXG4gICAgaWYodGhpcy5kYW1hZ2UgPD0gMyAmJiB0aGlzLmRhbWFnZSA+IDApe1xyXG4gICAgICAgIHRoaXMuZGFtYWdlSW1hZ2Uuc3JjID0gJy4uL2Fzc2V0cy9QTkcvRGFtYWdlL3BsYXllclNoaXAxX2RhbWFnZScrIHRoaXMuZGFtYWdlICsgJy5wbmcnO1xyXG4gICAgfVxyXG59O1xyXG5cclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkganVzdGlqbmRlcG92ZXIgb24gMDkvMTIvMTUuXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgdmFyIHNvY2tldFNlcnZpY2UgPSBmdW5jdGlvbigkcm9vdFNjb3BlKXtcclxuICAgICAgICBcInVzZSBzdHJpY3RcIjtcclxuICAgICAgICAvL3ByaXZhdGVcclxuICAgICAgICB2YXIgc29ja2V0ID0gaW8uY29ubmVjdCh3aW5kb3cubG9jYXRpb24uaG9zdCk7XHJcbiAgICAgICAgLy9mdW5jdGlvbnNcclxuICAgICAgICB2YXIgb24gPSBmdW5jdGlvbiAoZXZlbnROYW1lLCBjYWxsYmFjaykge1xyXG4gICAgICAgICAgICBzb2NrZXQub24oZXZlbnROYW1lLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcclxuICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5hcHBseShzb2NrZXQsIGFyZ3MpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBlbWl0ID0gZnVuY3Rpb24gKGV2ZW50TmFtZSwgZGF0YSwgY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgc29ja2V0LmVtaXQoZXZlbnROYW1lLCBkYXRhLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcclxuICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkoc29ja2V0LCBhcmdzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvL3B1YmxpY1xyXG4gICAgICAgIHJldHVybntcclxuICAgICAgICAgICAgb246IG9uLFxyXG4gICAgICAgICAgICBlbWl0OiBlbWl0LFxyXG4gICAgICAgICAgICBzb2NrZXQ6IHNvY2tldFxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoXCJhcHBcIikuZmFjdG9yeShcInNvY2tldFNlcnZpY2VcIiwgW1wiJHJvb3RTY29wZVwiLCBzb2NrZXRTZXJ2aWNlXSk7XHJcblxyXG59KSgpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
