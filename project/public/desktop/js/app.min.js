!function(){angular.module("app",[])}(),function(){var e=function(e,n,t,o){e.LCShow=t.getLCShow;var r=function(){n.emit("pcconnect",null)};e.room="",n.on("requestRoom",function(n){e.room=n}),n.on("deviceOrientation",function(e){var n=(e.username,{});n.gamma=e.gamma,n.beta=e.beta,n.alpha=e.alpha}),e.usernames={},e.checkUserCount=!1,n.on("updateusers",function(n){o.setPlayers(n),e.usernames=n,e.checkUserCount=Object.keys(e.usernames).length<0}),e.startGame=function(){n.emit("startGame",null),t.setLCShow(!1),t.setPCShow(!0)},function(){r()}()};angular.module("app").controller("loginController",["$scope","socketService","displayService","playerService",e])}(),function(){"use strict";var e=function(e,n,t,o,r){e.PCShow=o.getPCShow,e.startGame=!1;var i=document.getElementById("game"),a=i.getContext("2d");t.on("gameCycle",function(){var e=r.getPlayers(),n=i.width/100;for(var t in e){var o=new Image;o.user=e[t],o.onload=function(){a.rotate(this.user.rotation*Math.PI/180),a.drawImage(this,this.user.posX*n,this.user.posY*n),a.rotate(-(this.user.rotation*Math.PI/180))},o.src="../assets/PNG/playerShip1_"+e[t].color+".png"}})};angular.module("app").controller("playController",["$scope","$window","socketService","displayService","playerService",e])}(),function(){var e=function(e){function n(n,t,o){e.innerWidth<e.innerHeight?n.width=e.innerWidth-20:n.width=e.innerHeight-20,angular.element(e).bind("resize",function(){e.innerWidth<e.innerHeight?n.width=e.innerWidth-20:n.width=e.innerHeight-20,n.$digest()})}return{restrict:"E",link:n,replace:!0,template:'<canvas id="game" class="playArea" width="{{width}}" height="{{width}}" />'}};angular.module("app").directive("canvasDirective",["$window",e])}();var Spaceship=function(e,n,t){this.orientation=0,this.gamerId=e,this.x=n,this.y=t};Spaceship.prototype.moveSpaceship=function(e,n){},function(){var e=function(){var e=!0,n=!1;return{getLCShow:function(){return e},setLCShow:function(n){e=n},getPCShow:function(){return n},setPCShow:function(e){n=e}}};angular.module("app").factory("displayService",[e])}(),function(){var e=function(){var e=[];return{getPlayers:function(){return e},setPlayers:function(n){e=n}}};angular.module("app").factory("playerService",[e])}(),function(){var e=function(e){"use strict";var n=io.connect(window.location.host),t=function(t,o){n.on(t,function(){var t=arguments;e.$apply(function(){o.apply(n,t)})})},o=function(t,o,r){n.emit(t,o,function(){var t=arguments;e.$apply(function(){r&&r.apply(n,t)})})};return{on:t,emit:o,socket:n}};angular.module("app").factory("socketService",["$rootScope",e])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNvbnRyb2xsZXIvbG9naW5Db250cm9sbGVyLmpzIiwiY29udHJvbGxlci9wbGF5Q29udHJvbGxlci5qcyIsImRpcmVjdGl2ZXMvY2FudmFzRGlyZWN0aXZlLmpzIiwibW9kZWxzL1NwYWNlc2hpcC5qcyIsInNlcnZpY2VzL2Rpc3BsYXlTZXJ2aWNlLmpzIiwic2VydmljZXMvcGxheWVyU2VydmljZS5qcyIsInNlcnZpY2VzL3NvY2tldFNlcnZpY2UuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImxvZ2luQ29udHJvbGxlciIsIiRzY29wZSIsInNvY2tldFNlcnZpY2UiLCJkaXNwbGF5U2VydmljZSIsInBsYXllclNlcnZpY2UiLCJMQ1Nob3ciLCJnZXRMQ1Nob3ciLCJtYWtlUm9vbSIsImVtaXQiLCJyb29tIiwib24iLCJkYXRhIiwiZGV2aWNlT3JpZW50YXRpb24iLCJ1c2VybmFtZSIsImdhbW1hIiwiYmV0YSIsImFscGhhIiwidXNlcm5hbWVzIiwiY2hlY2tVc2VyQ291bnQiLCJzZXRQbGF5ZXJzIiwiT2JqZWN0Iiwia2V5cyIsImxlbmd0aCIsInN0YXJ0R2FtZSIsInNldExDU2hvdyIsInNldFBDU2hvdyIsImNvbnRyb2xsZXIiLCJwbGF5Q29udHJvbGxlciIsIiR3aW5kb3ciLCJQQ1Nob3ciLCJnZXRQQ1Nob3ciLCJjYW52IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImN0eCIsImdldENvbnRleHQiLCJwbGF5ZXJzIiwiZ2V0UGxheWVycyIsInJhdGlvIiwid2lkdGgiLCJ1c2VyIiwiaW1hZ2VPYmoiLCJJbWFnZSIsIm9ubG9hZCIsInJvdGF0ZSIsInRoaXMiLCJyb3RhdGlvbiIsIk1hdGgiLCJQSSIsImRyYXdJbWFnZSIsInBvc1giLCJwb3NZIiwic3JjIiwiY29sb3IiLCJjYW52YXNEaXJlY3RpdmUiLCJsaW5rIiwic2NvcGUiLCJlbGVtZW50IiwiYXR0cnMiLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJiaW5kIiwiJGRpZ2VzdCIsInJlc3RyaWN0IiwicmVwbGFjZSIsInRlbXBsYXRlIiwiZGlyZWN0aXZlIiwiU3BhY2VzaGlwIiwiZ2FtZXJJZCIsIngiLCJ5Iiwib3JpZW50YXRpb24iLCJwcm90b3R5cGUiLCJtb3ZlU3BhY2VzaGlwIiwidmFsdWUiLCJmYWN0b3J5IiwicGxheWVyc0FycmF5IiwiJHJvb3RTY29wZSIsInNvY2tldCIsImlvIiwiY29ubmVjdCIsIndpbmRvdyIsImxvY2F0aW9uIiwiaG9zdCIsImV2ZW50TmFtZSIsImNhbGxiYWNrIiwiYXJncyIsImFyZ3VtZW50cyIsIiRhcHBseSIsImFwcGx5Il0sIm1hcHBpbmdzIjoiQ0FHQSxXQUVBQSxRQUFBQyxPQUFBLGFDREEsV0FDQSxHQUFBQyxHQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBRUFILEVBQUFJLE9BQUFGLEVBQUFHLFNBR0EsSUFBQUMsR0FBQSxXQUNBTCxFQUFBTSxLQUFBLFlBQUEsTUFFQVAsR0FBQVEsS0FBQSxHQUNBUCxFQUFBUSxHQUFBLGNBQUEsU0FBQUMsR0FDQVYsRUFBQVEsS0FBQUUsSUFFQVQsRUFBQVEsR0FBQSxvQkFBQSxTQUFBQyxHQUNBLEdBQ0FDLElBREFELEVBQUFFLFlBRUFELEdBQUFFLE1BQUFILEVBQUFHLE1BQ0FGLEVBQUFHLEtBQUFKLEVBQUFJLEtBQ0FILEVBQUFJLE1BQUFMLEVBQUFLLFFBRUFmLEVBQUFnQixhQUNBaEIsRUFBQWlCLGdCQUFBLEVBQ0FoQixFQUFBUSxHQUFBLGNBQUEsU0FBQUMsR0FDQVAsRUFBQWUsV0FBQVIsR0FDQVYsRUFBQWdCLFVBQUFOLEVBQ0FWLEVBQUFpQixlQUFBRSxPQUFBQyxLQUFBcEIsRUFBQWdCLFdBQUFLLE9BQUEsSUFHQXJCLEVBQUFzQixVQUFBLFdBQ0FyQixFQUFBTSxLQUFBLFlBQUEsTUFDQUwsRUFBQXFCLFdBQUEsR0FDQXJCLEVBQUFzQixXQUFBLElBSUEsV0FDQWxCLE9BS0FULFNBQUFDLE9BQUEsT0FBQTJCLFdBQUEsbUJBQUEsU0FBQSxn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R0FBQUEsRUFDQUYsS0FBQUEsRUFDQXNFLE9BQUFBLEdBSUFoRixTQUFBQyxPQUFBLE9BQUE0RSxRQUFBLGlCQUFBLGFBQUF6RSIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDcmVhdGVkIGJ5IE1pY2hpZWwgb24gMjUvMTEvMjAxNS5cbiAqL1xuKGZ1bmN0aW9uKCl7XG5cbiAgICB2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoXCJhcHBcIixbXSk7XG59KSgpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IE1pY2hpZWwgb24gMTEvMTIvMjAxNS5cclxuICovXHJcblxyXG4oZnVuY3Rpb24oKXtcclxuICAgIHZhciBsb2dpbkNvbnRyb2xsZXIgPSBmdW5jdGlvbigkc2NvcGUsIHNvY2tldFNlcnZpY2UsIGRpc3BsYXlTZXJ2aWNlLCBwbGF5ZXJTZXJ2aWNlKXtcclxuXHJcbiAgICAgICAgJHNjb3BlLkxDU2hvdyA9IGRpc3BsYXlTZXJ2aWNlLmdldExDU2hvdztcclxuXHJcbiAgICAgICAgLy9mdW5jdGlvbnNcclxuICAgICAgICB2YXIgbWFrZVJvb20gPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBzb2NrZXRTZXJ2aWNlLmVtaXQoXCJwY2Nvbm5lY3RcIiwgbnVsbCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAkc2NvcGUucm9vbSA9IFwiXCI7XHJcbiAgICAgICAgc29ja2V0U2VydmljZS5vbigncmVxdWVzdFJvb20nLGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgICAgICAkc2NvcGUucm9vbSA9IGRhdGE7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgc29ja2V0U2VydmljZS5vbignZGV2aWNlT3JpZW50YXRpb24nLCBmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICAgICAgdmFyIHVzZXJuYW1lID0gZGF0YS51c2VybmFtZTtcclxuICAgICAgICAgICAgdmFyIGRldmljZU9yaWVudGF0aW9uID0ge307XHJcbiAgICAgICAgICAgIGRldmljZU9yaWVudGF0aW9uLmdhbW1hID0gZGF0YS5nYW1tYTtcclxuICAgICAgICAgICAgZGV2aWNlT3JpZW50YXRpb24uYmV0YSA9IGRhdGEuYmV0YTtcclxuICAgICAgICAgICAgZGV2aWNlT3JpZW50YXRpb24uYWxwaGEgPSBkYXRhLmFscGhhO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICRzY29wZS51c2VybmFtZXMgPSB7fTtcclxuICAgICAgICAkc2NvcGUuY2hlY2tVc2VyQ291bnQgPSBmYWxzZTtcclxuICAgICAgICBzb2NrZXRTZXJ2aWNlLm9uKCd1cGRhdGV1c2VycycsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIHBsYXllclNlcnZpY2Uuc2V0UGxheWVycyhkYXRhKTtcclxuICAgICAgICAgICAgJHNjb3BlLnVzZXJuYW1lcyA9IGRhdGE7XHJcbiAgICAgICAgICAgICRzY29wZS5jaGVja1VzZXJDb3VudCA9IE9iamVjdC5rZXlzKCRzY29wZS51c2VybmFtZXMpLmxlbmd0aCA8IDA7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICRzY29wZS5zdGFydEdhbWU9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc29ja2V0U2VydmljZS5lbWl0KFwic3RhcnRHYW1lXCIsIG51bGwpO1xyXG4gICAgICAgICAgICBkaXNwbGF5U2VydmljZS5zZXRMQ1Nob3coZmFsc2UpO1xyXG4gICAgICAgICAgICBkaXNwbGF5U2VydmljZS5zZXRQQ1Nob3codHJ1ZSk7XHJcbiAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgIChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgbWFrZVJvb20oKTtcclxuICAgICAgICB9KSgpO1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoXCJhcHBcIikuY29udHJvbGxlcihcImxvZ2luQ29udHJvbGxlclwiLCBbXCIkc2NvcGVcIiwgXCJzb2NrZXRTZXJ2aWNlXCIgLCBcImRpc3BsYXlTZXJ2aWNlXCIsIFwicGxheWVyU2VydmljZVwiLCBsb2dpbkNvbnRyb2xsZXJdKTtcclxufSkoKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBNaWNoaWVsIG9uIDE2LzEyLzIwMTUuXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uKCl7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuICAgIHZhciBwbGF5Q29udHJvbGxlciA9IGZ1bmN0aW9uKCRzY29wZSwgJHdpbmRvdywgc29ja2V0U2VydmljZSwgZGlzcGxheVNlcnZpY2UsIHBsYXllclNlcnZpY2Upe1xyXG4gICAgICAgICRzY29wZS5QQ1Nob3cgPSBkaXNwbGF5U2VydmljZS5nZXRQQ1Nob3c7XHJcbiAgICAgICAgJHNjb3BlLnN0YXJ0R2FtZSA9IGZhbHNlO1xyXG4gICAgICAgIHZhciBjYW52ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWUnKTtcclxuICAgICAgICB2YXIgY3R4ID0gY2Fudi5nZXRDb250ZXh0KCcyZCcpO1xyXG5cclxuICAgICAgICBzb2NrZXRTZXJ2aWNlLm9uKFwiZ2FtZUN5Y2xlXCIsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHZhciBwbGF5ZXJzID0gcGxheWVyU2VydmljZS5nZXRQbGF5ZXJzKCk7XHJcbiAgICAgICAgICAgIHZhciBpID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHZhciByYXRpbyA9IGNhbnYud2lkdGgvMTAwO1xyXG4gICAgICAgICAgICBmb3IodmFyIHVzZXIgaW4gcGxheWVycyl7XHJcbiAgICAgICAgICAgICAgICB2YXIgaW1hZ2VPYmogPSBuZXcgSW1hZ2UoKTtcclxuICAgICAgICAgICAgICAgIGltYWdlT2JqLnVzZXI9cGxheWVyc1t1c2VyXTtcclxuICAgICAgICAgICAgICAgIGltYWdlT2JqLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGN0eC5yb3RhdGUodGhpcy51c2VyLnJvdGF0aW9uKk1hdGguUEkvMTgwKTtcclxuICAgICAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKHRoaXMsIHRoaXMudXNlci5wb3NYKnJhdGlvLCB0aGlzLnVzZXIucG9zWSpyYXRpbyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY3R4LnJvdGF0ZSgtKHRoaXMudXNlci5yb3RhdGlvbipNYXRoLlBJLzE4MCkpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGltYWdlT2JqLnNyYyA9ICcuLi9hc3NldHMvUE5HL3BsYXllclNoaXAxXycrcGxheWVyc1t1c2VyXS5jb2xvcisnLnBuZyc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmNvbnRyb2xsZXIoXCJwbGF5Q29udHJvbGxlclwiLCBbXCIkc2NvcGVcIiwgXCIkd2luZG93XCIsIFwic29ja2V0U2VydmljZVwiLCBcImRpc3BsYXlTZXJ2aWNlXCIsIFwicGxheWVyU2VydmljZVwiLCBwbGF5Q29udHJvbGxlcl0pXHJcbn0pKCk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkganVzdGlqbmRlcG92ZXIgb24gMTYvMTIvMTUuXHJcbiAqL1xyXG4oZnVuY3Rpb24oKXtcclxuICAgIHZhciBjYW52YXNEaXJlY3RpdmUgPSBmdW5jdGlvbigkd2luZG93KXtcclxuICAgICAgICByZXR1cm57XHJcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXHJcbiAgICAgICAgICAgIGxpbms6bGluayxcclxuICAgICAgICAgICAgcmVwbGFjZTp0cnVlLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZTonPGNhbnZhcyBpZD1cImdhbWVcIiBjbGFzcz1cInBsYXlBcmVhXCIgd2lkdGg9XCJ7e3dpZHRofX1cIiBoZWlnaHQ9XCJ7e3dpZHRofX1cIiAvPidcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycyl7XHJcbiAgICAgICAgICAgIGlmKCR3aW5kb3cuaW5uZXJXaWR0aCA8ICR3aW5kb3cuaW5uZXJIZWlnaHQpe1xyXG4gICAgICAgICAgICAgICAgc2NvcGUud2lkdGggPSAkd2luZG93LmlubmVyV2lkdGggLSAyMDtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICBzY29wZS53aWR0aCA9ICR3aW5kb3cuaW5uZXJIZWlnaHQgLSAyMDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KCR3aW5kb3cpLmJpbmQoJ3Jlc2l6ZScsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBpZigkd2luZG93LmlubmVyV2lkdGggPCAkd2luZG93LmlubmVySGVpZ2h0KXtcclxuICAgICAgICAgICAgICAgICAgICBzY29wZS53aWR0aCA9ICR3aW5kb3cuaW5uZXJXaWR0aCAtIDIwO1xyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUud2lkdGggPSAkd2luZG93LmlubmVySGVpZ2h0IC0gMjA7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgc2NvcGUuJGRpZ2VzdCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5kaXJlY3RpdmUoXCJjYW52YXNEaXJlY3RpdmVcIiwgW1wiJHdpbmRvd1wiLCBjYW52YXNEaXJlY3RpdmVdKTtcclxufSkoKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBqdXN0aWpuZGVwb3ZlciBvbiAwOS8xMi8xNS5cclxuICovXHJcblxyXG52YXIgU3BhY2VzaGlwID0gZnVuY3Rpb24oZ2FtZXJJZCwgeCwgeSl7XHJcbiAgICB0aGlzLm9yaWVudGF0aW9uID0gMDtcclxuICAgIHRoaXMuZ2FtZXJJZCA9IGdhbWVySWQ7XHJcbiAgICB0aGlzLnggPSB4O1xyXG4gICAgdGhpcy55ID0geTtcclxufTtcclxuXHJcblNwYWNlc2hpcC5wcm90b3R5cGUubW92ZVNwYWNlc2hpcCA9IGZ1bmN0aW9uKHgsIHkpe1xyXG4gICAgLy9tb3ZlIHRoZSBzcGFjZXNoaXAgb24gdGhlIGNhbnZhc1xyXG5cclxufTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBNaWNoaWVsIG9uIDE2LzEyLzIwMTUuXHJcbiAqL1xyXG4vKipcclxuICogQ3JlYXRlZCBieSBqdXN0aWpuZGVwb3ZlciBvbiAxNi8xMi8xNS5cclxuICovXHJcblxyXG5cclxuKGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgZGlzcGxheVNlcnZpY2UgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgIC8vTG9naW4gQ29udHJvbGxlclxyXG4gICAgICAgIHZhciBMQ1Nob3cgPSB0cnVlO1xyXG4gICAgICAgIC8vUGxheSBjb250cm9sbGVyXHJcbiAgICAgICAgdmFyIFBDU2hvdyA9IGZhbHNlO1xyXG5cclxuICAgICAgICByZXR1cm57XHJcbiAgICAgICAgICAgIGdldExDU2hvdzogZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIHJldHVybiBMQ1Nob3c7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNldExDU2hvdzogZnVuY3Rpb24odmFsdWUpe1xyXG4gICAgICAgICAgICAgICAgTENTaG93ID0gdmFsdWU7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGdldFBDU2hvdzogZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIHJldHVybiBQQ1Nob3c7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNldFBDU2hvdzogZnVuY3Rpb24odmFsdWUpe1xyXG4gICAgICAgICAgICAgICAgUENTaG93ID0gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5mYWN0b3J5KCdkaXNwbGF5U2VydmljZScsIFtkaXNwbGF5U2VydmljZV0pO1xyXG59KSgpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGp1c3Rpam5kZXBvdmVyIG9uIDE3LzEyLzE1LlxyXG4gKi9cclxuXHJcbihmdW5jdGlvbigpe1xyXG4gICAgdmFyIHBsYXllclNlcnZpY2UgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgIC8vTG9naW4gQ29udHJvbGxlclxyXG4gICAgICAgIHZhciBwbGF5ZXJzID0gW107XHJcblxyXG4gICAgICAgIHJldHVybntcclxuICAgICAgICAgICAgZ2V0UGxheWVyczogZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwbGF5ZXJzO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzZXRQbGF5ZXJzOiBmdW5jdGlvbihwbGF5ZXJzQXJyYXkpe1xyXG4gICAgICAgICAgICAgICAgcGxheWVycyA9IHBsYXllcnNBcnJheTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmZhY3RvcnkoJ3BsYXllclNlcnZpY2UnLCBbcGxheWVyU2VydmljZV0pO1xyXG59KSgpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGp1c3Rpam5kZXBvdmVyIG9uIDA5LzEyLzE1LlxyXG4gKi9cclxuXHJcbihmdW5jdGlvbigpe1xyXG5cclxuICAgIHZhciBzb2NrZXRTZXJ2aWNlID0gZnVuY3Rpb24oJHJvb3RTY29wZSl7XHJcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XHJcbiAgICAgICAgLy9wcml2YXRlXHJcbiAgICAgICAgdmFyIHNvY2tldCA9IGlvLmNvbm5lY3Qod2luZG93LmxvY2F0aW9uLmhvc3QpO1xyXG4gICAgICAgIC8vZnVuY3Rpb25zXHJcbiAgICAgICAgdmFyIG9uID0gZnVuY3Rpb24gKGV2ZW50TmFtZSwgY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgc29ja2V0Lm9uKGV2ZW50TmFtZSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkoc29ja2V0LCBhcmdzKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZW1pdCA9IGZ1bmN0aW9uIChldmVudE5hbWUsIGRhdGEsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIHNvY2tldC5lbWl0KGV2ZW50TmFtZSwgZGF0YSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KHNvY2tldCwgYXJncyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy9wdWJsaWNcclxuICAgICAgICByZXR1cm57XHJcbiAgICAgICAgICAgIG9uOiBvbixcclxuICAgICAgICAgICAgZW1pdDogZW1pdCxcclxuICAgICAgICAgICAgc29ja2V0OiBzb2NrZXRcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmZhY3RvcnkoXCJzb2NrZXRTZXJ2aWNlXCIsIFtcIiRyb290U2NvcGVcIiwgc29ja2V0U2VydmljZV0pO1xyXG5cclxufSkoKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
