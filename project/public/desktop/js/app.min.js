!function(){angular.module("app",[])}(),function(){var t=function(t,e,a,i){t.LCShow=a.getLCShow;var o=function(){e.emit("pcconnect",null)};t.room="",e.on("requestRoom",function(e){t.room=e}),e.on("deviceOrientation",function(t){var e=(t.username,{});e.gamma=t.gamma,e.beta=t.beta,e.alpha=t.alpha}),t.usernames={},t.checkUserCount=!1,e.on("updateusers",function(e){i.setPlayers(e),t.usernames=e,t.checkUserCount=Object.keys(t.usernames).length<0}),t.startGame=function(){e.emit("startGame",null),a.setLCShow(!1),a.setPCShow(!0)},function(){o()}()};angular.module("app").controller("loginController",["$scope","socketService","displayService","playerService",t])}(),function(){"use strict";var t=function(t,e,a,i,o,r){function n(t,e){return e.username==t.userName}function s(){u.length>0,p.clearRect(0,0,d.width,d.height);var t=d.width/100;if(0!=f.length){var e=d.width/100,a=e*f[0].image.height/f[0].image.width;for(var i in f){var o=f[i];o.width=e,o.height=a,0==o.explodeStage?(p.save(),p.translate(o.x*t,o.y*t),p.rotate(o.rotation/180*Math.PI),p.drawImage(o.image,-e/2,-a/2,e,a),p.restore(),f[i].x=Math.cos((o.rotation-90)/180*Math.PI)+o.x,f[i].y=Math.sin((o.rotation-90)/180*Math.PI)+o.y):o.explodeStage<4&&(console.log(o.explosionImage),p.save(),p.translate(o.x*t,o.y*t),p.drawImage(o.explosionImage,-e,-e,2*e,2*e),p.restore())}}if(0!=u.length){var r=d.width/20,n=r*u[0].image.height/u[0].image.width;for(var s in u){var c=u[s];c.width=r,c.height=n,p.save(),p.translate(c.x*t,c.y*t),p.rotate(c.rotation/180*Math.PI),p.drawImage(c.image,-r/2,-n/2,r,n),c.damage>0&&p.drawImage(c.damageImage,-r/2,-n/2,r,n),p.restore(),u[s].x=Math.cos((c.rotation-90)/180*Math.PI)/10*c.speed+c.x,u[s].y=Math.sin((c.rotation-90)/180*Math.PI)/10*c.speed+c.y}}if(y.length>0)for(var g in y){var m=y[g];if(m.width=d.width/1500*m.image.width,m.height=m.width*m.image.height/m.image.width,p.save(),p.translate(m.x*t,m.y*t),p.rotate(m.rotation/180*Math.PI),p.drawImage(m.image,-m.width/2,-m.height/2,m.width,m.height),p.restore(),m.x<-5||m.x>105||m.y<-5||m.y>105){var v=Math.random();.25>v?(y[g].x=-4,y[g].y=Math.floor(100*Math.random()),y[g].rotation=Math.floor(180*Math.random())):.5>v?(y[g].x=Math.floor(100*Math.random()),y[g].y=-4,y[g].rotation=Math.floor(180*Math.random())+90):.75>v?(y[g].x=104,y[g].y=Math.floor(100*Math.random()),y[g].rotation=Math.floor(180*Math.random())+180):(y[g].x=Math.floor(100*Math.random()),y[g].y=104,y[g].rotation=Math.floor(180*Math.random())+270),y[g].setImage(Math.ceil(18*Math.random()))}else y[g].x=Math.cos((m.rotation-90)/180*Math.PI)/30+m.x,y[g].y=Math.sin((m.rotation-90)/180*Math.PI)/30+m.y}h(),l()}function h(){for(var t in f)f[t].x<0||f[t].x>d.width||f[t].y<0||f[t].y>d.height?f.splice(t,1):f[t].explodeStage>0&&(f[t].explodeStage<4?f[t].explode():f.splice(t,1))}function l(){var t=[];for(var e in u){u[e].damage<4&&t.push(u[e]);for(var a in f)if(0==f[a].explodeStage&&f[a].player!=u[e].userName){var o=Math.sqrt(2)/2*(f[a].height/2-f[a].width/2),r=(360-f[a].rotation)/180*Math.PI,n=f[a].x*d.width/100-o*Math.sin(r),s=f[a].y*d.width/100-o*Math.cos(r),h=u[e].x*d.width/100,l=u[e].y*d.width/100,g=Math.sqrt((n-h)*(n-h)+(s-l)*(s-l));if(g<f[a].width/2+u[e].width/2){var m=new Audio("../../assets/Bonus/sfx_lose.ogg");m.play(),u[e].increaseDamage();var p={};p.username=u[e].userName,p.life=3-u[e].damage,i.emit("playerLife",p),f[a].explode()}}for(var v in y){var w=y[v].x*d.width/100,x=y[v].y*d.width/100,h=u[e].x*d.width/100,l=u[e].y*d.width/100,g=Math.sqrt((w-h)*(w-h)+(x-l)*(x-l));if(g<y[v].width/2+u[e].width/2){var m=new Audio("../../assets/Bonus/sfx_lose.ogg");m.play(),u[e].damage=3;var p={};p.username=u[e].userName,p.life=3-u[e].damage,i.emit("playerLife",p),f[a].explode()}}}1==t.length&&c(t)}function c(a){angular.isDefined(m)&&(e.cancel(m),m=void 0),t.endGame=!0,t.endGameText=a[0].userName+" is the winner!",i.emit("endGame",a[0].userName)}var g=[{x:10,y:10,rotation:135},{x:90,y:10,rotation:225},{x:90,y:90,rotation:315},{x:10,y:90,rotation:45}];t.PCShow=o.getPCShow,t.endGame=!1;var m,d=document.getElementById("game"),p=d.getContext("2d"),u=new Array,f=new Array,y=new Array;i.on("initGame",function(){var t=r.getPlayers(),a=0;for(var i in t){var o=t[i];u.push(new Spaceship(o.username,g[a].x,g[a].y,o.color,g[a].rotation)),a++}for(var n=0;10>n;n++)y.push(new Asteroid(Math.floor(100*Math.random()),Math.floor(100*Math.random()),Math.floor(361*Math.random()),Math.ceil(18*Math.random())));m=e(s,10)}),i.on("userleft",function(t){var e=null;for(var a in u)1==n(u[a],t)&&(e=a);u.splice(e,1)}),i.on("updateGameData",function(t){var e=null;for(var a in u)1==n(u[a],t)&&(e=a);null!=e&&u[e].rotateSpaceshipRelative(t.orientation)}),i.on("playerShot",function(e){if(0==t.endGame){var a=null;for(var i in u)1==n(u[i],e)&&(a=i);if(null!=a){var o=u[a],r=(360-(o.rotation+180))/180*Math.PI,s=o.x+d.width/400*Math.sin(r),h=o.y+d.width/400*Math.cos(r);f.push(new Bullet(s,h,o.rotation,o.color,o.userName));var l="../../assets/Bonus/sfx_laser2.ogg";a%2==0&&(l="../../assets/Bonus/sfx_laser1.ogg");var c=new Audio(l);c.play()}}}),t.restartGame=function(){t.endGame=!1;var a=0;for(var o in u)u[o].reset(g[a].x,g[a].y,g[a].rotation),a++;p.clearRect(0,0,d.width,d.height),i.emit("restartGame",null),m=e(s,10)}};angular.module("app").controller("playController",["$scope","$interval","$window","socketService","displayService","playerService",t])}();var Asteroid=function(t,e,a,i){this.x=t,this.y=e,this.width=0,this.height=0,this.rotation=a,this.stage=i,this.image=new Image,this.image.src="../assets/PNG/Meteors/meteor_"+i+".png"};Asteroid.prototype.setImage=function(t){this.stage=t,this.image.src="../assets/PNG/Meteors/meteor_"+t+".png"};var Bullet=function(t,e,a,i,o){this.x=t,this.y=e,this.rotation=a,this.image=new Image,this.color=i,this.width=0,this.height=0,this.player=o,this.explosionImage=new Image,this.explodeStage=0,"orange"==this.color&&(this.color="red"),this.image.src="../assets/PNG/Lasers/laser"+this.color.charAt(0).toUpperCase()+this.color.slice(1)+"01.png"};Bullet.prototype.explode=function(){if(this.explodeStage<4){this.explodeStage++;var t;t=this.explodeStage<3?1:2,this.explosionImage.src="../assets/PNG/Lasers/laser"+this.color.charAt(0).toUpperCase()+this.color.slice(1)+"Explode"+t+".png"}else this.explosionImage.src=""};var Spaceship=function(t,e,a,i,o){this.userName=t,this.x=e,this.y=a,this.speed=1,this.color=i,this.rotation=o,this.image=new Image,this.damage=0,this.width=0,this.height=0,this.damageImage=new Image,this.image.src="../assets/PNG/playerShip1_"+this.color+".png"};Spaceship.prototype.reset=function(t,e,a){this.speed=1,this.damage=0,this.damageImage=new Image,this.image.src="../assets/PNG/playerShip1_"+this.color+".png",this.x=t,this.y=e,this.rotation=a},Spaceship.prototype.moveSpaceship=function(t,e){this.x=t,this.y=e},Spaceship.prototype.moveSpaceshipRelative=function(t,e){this.x=this.x+t,this.y=this.y+e},Spaceship.prototype.rotateSpaceship=function(t){this.rotation=t},Spaceship.prototype.rotateSpaceshipRelative=function(t){this.rotation=this.rotation+t/5,this.rotation<-360&&(this.rotation=this.rotation+720),this.rotation>360&&(this.rotation=this.rotation-720)},Spaceship.prototype.increaseDamage=function(){this.damage<4&&(this.damage+=1),this.damage<=3&&this.damage>0?this.damageImage.src="../assets/PNG/Damage/playerShip1_damage"+this.damage+".png":4==this.damage&&(this.damageImage.src="../assets/PNG/Damage/explode.gif")},Spaceship.prototype.decreaseDamage=function(){this.damage>0&&(this.damage-=1),this.damage<=3&&this.damage>0&&(this.damageImage.src="../assets/PNG/Damage/playerShip1_damage"+this.damage+".png")},function(){var t=function(t){function e(e,a,i){t.innerWidth<t.innerHeight?e.width=t.innerWidth-20:e.width=t.innerHeight-20,angular.element(t).bind("resize",function(){t.innerWidth<t.innerHeight?e.width=t.innerWidth-20:e.width=t.innerHeight-20,e.$digest()})}return{restrict:"E",link:e,replace:!0,template:'<canvas id="game" class="playArea" width="{{width}}" height="{{width}}" />'}};angular.module("app").directive("canvasDirective",["$window",t])}(),function(){var t=function(){var t=!0,e=!1;return{getLCShow:function(){return t},setLCShow:function(e){t=e},getPCShow:function(){return e},setPCShow:function(t){e=t}}};angular.module("app").factory("displayService",[t])}(),function(){var t=function(){var t=[];return{getPlayers:function(){return t},setPlayers:function(e){t=e}}};angular.module("app").factory("playerService",[t])}(),function(){var t=function(t){"use strict";var e=io.connect(window.location.host),a=function(a,i){e.on(a,function(){var a=arguments;t.$apply(function(){i.apply(e,a)})})},i=function(a,i,o){e.emit(a,i,function(){var a=arguments;t.$apply(function(){o&&o.apply(e,a)})})};return{on:a,emit:i,socket:e}};angular.module("app").factory("socketService",["$rootScope",t])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNvbnRyb2xsZXIvbG9naW5Db250cm9sbGVyLmpzIiwiY29udHJvbGxlci9wbGF5Q29udHJvbGxlci5qcyIsIm1vZGVscy9Bc3RlcmlvZC5qcyIsIm1vZGVscy9CdWxsZXQuanMiLCJtb2RlbHMvU3BhY2VzaGlwLmpzIiwiZGlyZWN0aXZlcy9jYW52YXNEaXJlY3RpdmUuanMiLCJzZXJ2aWNlcy9kaXNwbGF5U2VydmljZS5qcyIsInNlcnZpY2VzL3BsYXllclNlcnZpY2UuanMiLCJzZXJ2aWNlcy9zb2NrZXRTZXJ2aWNlLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJsb2dpbkNvbnRyb2xsZXIiLCIkc2NvcGUiLCJzb2NrZXRTZXJ2aWNlIiwiZGlzcGxheVNlcnZpY2UiLCJwbGF5ZXJTZXJ2aWNlIiwiTENTaG93IiwiZ2V0TENTaG93IiwibWFrZVJvb20iLCJlbWl0Iiwicm9vbSIsIm9uIiwiZGF0YSIsImRldmljZU9yaWVudGF0aW9uIiwidXNlcm5hbWUiLCJnYW1tYSIsImJldGEiLCJhbHBoYSIsInVzZXJuYW1lcyIsImNoZWNrVXNlckNvdW50Iiwic2V0UGxheWVycyIsIk9iamVjdCIsImtleXMiLCJsZW5ndGgiLCJzdGFydEdhbWUiLCJzZXRMQ1Nob3ciLCJzZXRQQ1Nob3ciLCJjb250cm9sbGVyIiwicGxheUNvbnRyb2xsZXIiLCIkaW50ZXJ2YWwiLCIkd2luZG93IiwiZmlsdGVyUGxheWVycyIsIm9iaiIsInVzZXJOYW1lIiwiZHJhdyIsIkFsbFBsYXllcnMiLCJjdHgiLCJjbGVhclJlY3QiLCJjYW52Iiwid2lkdGgiLCJoZWlnaHQiLCJyYXRpbyIsIkFsbEJ1bGxldHMiLCJCdWxsZXRXaWR0aCIsIkJ1bGxldEhlaWdodCIsImltYWdlIiwiYnVsbGV0IiwiYiIsImV4cGxvZGVTdGFnZSIsInNhdmUiLCJ0cmFuc2xhdGUiLCJ4IiwieSIsInJvdGF0ZSIsInJvdGF0aW9uIiwiTWF0aCIsIlBJIiwiZHJhd0ltYWdlIiwicmVzdG9yZSIsImNvcyIsInNpbiIsImNvbnNvbGUiLCJsb2ciLCJleHBsb3Npb25JbWFnZSIsIlNwYWNlc2hpcFdpZHRoIiwiU3BhY2VzaGlwSGVpZ2h0IiwicGxheWVyIiwicCIsImRhbWFnZSIsImRhbWFnZUltYWdlIiwic3BlZWQiLCJBbGxBc3Rlcm9pZHMiLCJBc3Rlcm9pZCIsImEiLCJrZXV6ZSIsInJhbmRvbSIsImZsb29yIiwic2V0SW1hZ2UiLCJjZWlsIiwiY2hlY2tCdWxsZXRzIiwiY29sbGlzaW9uRGV0ZWN0aW9uIiwic3BsaWNlIiwiZXhwbG9kZSIsImxpdmluZ1BsYXllcnMiLCJwdXNoIiwicmFkaXVzIiwic3FydCIsImFuZ2xlIiwiYnVsbGV0SGVhZFgiLCJidWxsZXRIZWFkWSIsInNwYWNlU2hpcFgiLCJzcGFjZVNoaXBZIiwiZGlzdGFuY2UiLCJkYW1hZ2Vzb3VuZCIsIkF1ZGlvIiwicGxheSIsImluY3JlYXNlRGFtYWdlIiwibGlmZSIsImFzdGVyb2lkWCIsImFzdGVyb2lkWSIsImVuZEdhbWUiLCJpc0RlZmluZWQiLCJjeWNsZSIsImNhbmNlbCIsInVuZGVmaW5lZCIsImVuZEdhbWVUZXh0IiwiZGVmYXVsdFZhcnMiLCJQQ1Nob3ciLCJnZXRQQ1Nob3ciLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiZ2V0Q29udGV4dCIsIkFycmF5IiwiQnVmZmVyUGxheWVyIiwiZ2V0UGxheWVycyIsInRlbGxlciIsIlNwYWNlc2hpcCIsImNvbG9yIiwiaSIsInJvdGF0ZVNwYWNlc2hpcFJlbGF0aXZlIiwib3JpZW50YXRpb24iLCJ0ZW1wIiwiQnVsbGV0IiwiYXVkaW9VcmwiLCJzaG90IiwicmVzdGFydEdhbWUiLCJyZXNldCIsInN0YWdlIiwidGhpcyIsIkltYWdlIiwic3JjIiwicHJvdG90eXBlIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJzbGljZSIsIm51bWJlciIsIm1vdmVTcGFjZXNoaXAiLCJtb3ZlU3BhY2VzaGlwUmVsYXRpdmUiLCJyb3RhdGVTcGFjZXNoaXAiLCJkZWdyZWUiLCJkZWNyZWFzZURhbWFnZSIsImNhbnZhc0RpcmVjdGl2ZSIsImxpbmsiLCJzY29wZSIsImVsZW1lbnQiLCJhdHRycyIsImlubmVyV2lkdGgiLCJpbm5lckhlaWdodCIsImJpbmQiLCIkZGlnZXN0IiwicmVzdHJpY3QiLCJyZXBsYWNlIiwidGVtcGxhdGUiLCJkaXJlY3RpdmUiLCJ2YWx1ZSIsImZhY3RvcnkiLCJwbGF5ZXJzIiwicGxheWVyc0FycmF5IiwiJHJvb3RTY29wZSIsInNvY2tldCIsImlvIiwiY29ubmVjdCIsIndpbmRvdyIsImxvY2F0aW9uIiwiaG9zdCIsImV2ZW50TmFtZSIsImNhbGxiYWNrIiwiYXJncyIsImFyZ3VtZW50cyIsIiRhcHBseSIsImFwcGx5Il0sIm1hcHBpbmdzIjoiQ0FHQSxXQUVBQSxRQUFBQyxPQUFBLGFDREEsV0FDQSxHQUFBQyxHQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBRUFILEVBQUFJLE9BQUFGLEVBQUFHLFNBR0EsSUFBQUMsR0FBQSxXQUNBTCxFQUFBTSxLQUFBLFlBQUEsTUFFQVAsR0FBQVEsS0FBQSxHQUNBUCxFQUFBUSxHQUFBLGNBQUEsU0FBQUMsR0FDQVYsRUFBQVEsS0FBQUUsSUFFQVQsRUFBQVEsR0FBQSxvQkFBQSxTQUFBQyxHQUNBLEdBQ0FDLElBREFELEVBQUFFLFlBRUFELEdBQUFFLE1BQUFILEVBQUFHLE1BQ0FGLEVBQUFHLEtBQUFKLEVBQUFJLEtBQ0FILEVBQUFJLE1BQUFMLEVBQUFLLFFBRUFmLEVBQUFnQixhQUNBaEIsRUFBQWlCLGdCQUFBLEVBQ0FoQixFQUFBUSxHQUFBLGNBQUEsU0FBQUMsR0FDQVAsRUFBQWUsV0FBQVIsR0FDQVYsRUFBQWdCLFVBQUFOLEVBQ0FWLEVBQUFpQixlQUFBRSxPQUFBQyxLQUFBcEIsRUFBQWdCLFdBQUFLLE9BQUEsSUFHQXJCLEVBQUFzQixVQUFBLFdBQ0FyQixFQUFBTSxLQUFBLFlBQUEsTUFDQUwsRUFBQXFCLFdBQUEsR0FDQXJCLEVBQUFzQixXQUFBLElBSUEsV0FDQWxCLE9BS0FU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Q0FQLEVBQUF0SixLQUFBNEosRUFBQXpKLEVBQUEsV0FDQSxHQUFBMkosR0FBQUMsU0FDQVYsR0FBQVcsT0FBQSxXQUNBSCxHQUNBQSxFQUFBSSxNQUFBWCxFQUFBUSxPQU9BLFFBQ0E1SixHQUFBQSxFQUNBRixLQUFBQSxFQUNBc0osT0FBQUEsR0FJQWhLLFNBQUFDLE9BQUEsT0FBQTJKLFFBQUEsaUJBQUEsYUFBQXhKIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENyZWF0ZWQgYnkgTWljaGllbCBvbiAyNS8xMS8yMDE1LlxuICovXG4oZnVuY3Rpb24oKXtcblxuICAgIHZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZShcImFwcFwiLFtdKTtcbn0pKCk7IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IE1pY2hpZWwgb24gMTEvMTIvMjAxNS5cbiAqL1xuXG4oZnVuY3Rpb24oKXtcbiAgICB2YXIgbG9naW5Db250cm9sbGVyID0gZnVuY3Rpb24oJHNjb3BlLCBzb2NrZXRTZXJ2aWNlLCBkaXNwbGF5U2VydmljZSwgcGxheWVyU2VydmljZSl7XG5cbiAgICAgICAgJHNjb3BlLkxDU2hvdyA9IGRpc3BsYXlTZXJ2aWNlLmdldExDU2hvdztcblxuICAgICAgICAvL2Z1bmN0aW9uc1xuICAgICAgICB2YXIgbWFrZVJvb20gPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgc29ja2V0U2VydmljZS5lbWl0KFwicGNjb25uZWN0XCIsIG51bGwpO1xuICAgICAgICB9O1xuICAgICAgICAkc2NvcGUucm9vbSA9IFwiXCI7XG4gICAgICAgIHNvY2tldFNlcnZpY2Uub24oJ3JlcXVlc3RSb29tJyxmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgICRzY29wZS5yb29tID0gZGF0YTtcbiAgICAgICAgfSk7XG4gICAgICAgIHNvY2tldFNlcnZpY2Uub24oJ2RldmljZU9yaWVudGF0aW9uJywgZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICB2YXIgdXNlcm5hbWUgPSBkYXRhLnVzZXJuYW1lO1xuICAgICAgICAgICAgdmFyIGRldmljZU9yaWVudGF0aW9uID0ge307XG4gICAgICAgICAgICBkZXZpY2VPcmllbnRhdGlvbi5nYW1tYSA9IGRhdGEuZ2FtbWE7XG4gICAgICAgICAgICBkZXZpY2VPcmllbnRhdGlvbi5iZXRhID0gZGF0YS5iZXRhO1xuICAgICAgICAgICAgZGV2aWNlT3JpZW50YXRpb24uYWxwaGEgPSBkYXRhLmFscGhhO1xuICAgICAgICB9KTtcbiAgICAgICAgJHNjb3BlLnVzZXJuYW1lcyA9IHt9O1xuICAgICAgICAkc2NvcGUuY2hlY2tVc2VyQ291bnQgPSBmYWxzZTtcbiAgICAgICAgc29ja2V0U2VydmljZS5vbigndXBkYXRldXNlcnMnLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgcGxheWVyU2VydmljZS5zZXRQbGF5ZXJzKGRhdGEpO1xuICAgICAgICAgICAgJHNjb3BlLnVzZXJuYW1lcyA9IGRhdGE7XG4gICAgICAgICAgICAkc2NvcGUuY2hlY2tVc2VyQ291bnQgPSBPYmplY3Qua2V5cygkc2NvcGUudXNlcm5hbWVzKS5sZW5ndGggPCAwO1xuICAgICAgICB9KTtcblxuICAgICAgICAkc2NvcGUuc3RhcnRHYW1lPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzb2NrZXRTZXJ2aWNlLmVtaXQoXCJzdGFydEdhbWVcIiwgbnVsbCk7XG4gICAgICAgICAgICBkaXNwbGF5U2VydmljZS5zZXRMQ1Nob3coZmFsc2UpO1xuICAgICAgICAgICAgZGlzcGxheVNlcnZpY2Uuc2V0UENTaG93KHRydWUpO1xuICAgICAgICB9O1xuXG5cbiAgICAgICAgKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbWFrZVJvb20oKTtcbiAgICAgICAgfSkoKTtcblxuICAgIH07XG5cbiAgICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5jb250cm9sbGVyKFwibG9naW5Db250cm9sbGVyXCIsIFtcIiRzY29wZVwiLCBcInNvY2tldFNlcnZpY2VcIiAsIFwiZGlzcGxheVNlcnZpY2VcIiwgXCJwbGF5ZXJTZXJ2aWNlXCIsIGxvZ2luQ29udHJvbGxlcl0pO1xufSkoKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgTWljaGllbCBvbiAxNi8xMi8yMDE1LlxuICovXG5cbihmdW5jdGlvbigpe1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIHZhciBwbGF5Q29udHJvbGxlciA9IGZ1bmN0aW9uKCRzY29wZSwgJGludGVydmFsLCAkd2luZG93LCBzb2NrZXRTZXJ2aWNlLCBkaXNwbGF5U2VydmljZSwgcGxheWVyU2VydmljZSl7XG4gICAgICAgIHZhciBkZWZhdWx0VmFycyA9IFt7eDoxMCwgeToxMCxyb3RhdGlvbjoxMzV9LHt4OjkwLCB5OjEwLHJvdGF0aW9uOjIyNX0se3g6OTAsIHk6OTAscm90YXRpb246MzE1fSx7eDoxMCwgeTo5MCxyb3RhdGlvbjo0NX1dO1xuICAgICAgICAkc2NvcGUuUENTaG93ID0gZGlzcGxheVNlcnZpY2UuZ2V0UENTaG93O1xuICAgICAgICAkc2NvcGUuZW5kR2FtZSA9IGZhbHNlO1xuICAgICAgICB2YXIgY2FudiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYW1lJyk7XG4gICAgICAgIHZhciBjdHggPSBjYW52LmdldENvbnRleHQoJzJkJyk7XG5cbiAgICAgICAgdmFyIEFsbFBsYXllcnMgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgdmFyIEFsbEJ1bGxldHMgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgdmFyIEFsbEFzdGVyb2lkcyA9IG5ldyBBcnJheSgpO1xuXG4gICAgICAgIHZhciBjeWNsZTtcblxuICAgICAgICBzb2NrZXRTZXJ2aWNlLm9uKFwiaW5pdEdhbWVcIiwgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHZhciBCdWZmZXJQbGF5ZXIgPSBwbGF5ZXJTZXJ2aWNlLmdldFBsYXllcnMoKTtcbiAgICAgICAgICAgIHZhciB0ZWxsZXI9IDA7XG4gICAgICAgICAgICBmb3IodmFyIHBsYXllciBpbiBCdWZmZXJQbGF5ZXIpe1xuICAgICAgICAgICAgICAgIHZhciBwID0gQnVmZmVyUGxheWVyW3BsYXllcl07XG4gICAgICAgICAgICAgICAgQWxsUGxheWVycy5wdXNoKG5ldyBTcGFjZXNoaXAocC51c2VybmFtZSwgZGVmYXVsdFZhcnNbdGVsbGVyXS54LCBkZWZhdWx0VmFyc1t0ZWxsZXJdLnksIHAuY29sb3IsIGRlZmF1bHRWYXJzW3RlbGxlcl0ucm90YXRpb24pKTtcbiAgICAgICAgICAgICAgICB0ZWxsZXIrKztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaTwxMDsgaSsrKXtcbiAgICAgICAgICAgICAgICBBbGxBc3Rlcm9pZHMucHVzaChuZXcgQXN0ZXJvaWQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjEwMCksIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoxMDApLCBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMzYxKSwgTWF0aC5jZWlsKE1hdGgucmFuZG9tKCkqMTgpKSk7XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgY3ljbGUgPSAkaW50ZXJ2YWwoZHJhdywgMTApO1xuICAgICAgICB9KTtcblxuICAgICAgICBzb2NrZXRTZXJ2aWNlLm9uKFwidXNlcmxlZnRcIiwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBwID0gbnVsbDtcbiAgICAgICAgICAgIGZvcih2YXIgaSBpbiBBbGxQbGF5ZXJzKXtcbiAgICAgICAgICAgICAgICBpZihmaWx0ZXJQbGF5ZXJzKEFsbFBsYXllcnNbaV0sZGF0YSkgPT0gdHJ1ZSl7XG4gICAgICAgICAgICAgICAgICAgIHAgPSBpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIEFsbFBsYXllcnMuc3BsaWNlKHAsMSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHNvY2tldFNlcnZpY2Uub24oXCJ1cGRhdGVHYW1lRGF0YVwiLCBmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgIHZhciBwID0gbnVsbDtcbiAgICAgICAgICAgIGZvcih2YXIgaSBpbiBBbGxQbGF5ZXJzKXtcbiAgICAgICAgICAgICAgICBpZihmaWx0ZXJQbGF5ZXJzKEFsbFBsYXllcnNbaV0sZGF0YSkgPT0gdHJ1ZSl7XG4gICAgICAgICAgICAgICAgICAgIHAgPSBpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKHAgIT0gbnVsbCl7XG4gICAgICAgICAgICAgICAgQWxsUGxheWVyc1twXS5yb3RhdGVTcGFjZXNoaXBSZWxhdGl2ZShkYXRhLm9yaWVudGF0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgc29ja2V0U2VydmljZS5vbihcInBsYXllclNob3RcIiwgZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICBpZigkc2NvcGUuZW5kR2FtZT09ZmFsc2UpIHtcbiAgICAgICAgICAgICAgICB2YXIgcCA9IG51bGw7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBBbGxQbGF5ZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWx0ZXJQbGF5ZXJzKEFsbFBsYXllcnNbaV0sIGRhdGEpID09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHAgPSBpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBBbGxQbGF5ZXJzW3BdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYW5nbGUgPSAoMzYwIC0gKHRlbXAucm90YXRpb24gKyAxODApKSAvIDE4MCAqIE1hdGguUEk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB4ID0gdGVtcC54ICsgKGNhbnYud2lkdGggLyA0MDAgKiBNYXRoLnNpbihhbmdsZSkpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgeSA9IHRlbXAueSArIChjYW52LndpZHRoIC8gNDAwICogTWF0aC5jb3MoYW5nbGUpKTtcbiAgICAgICAgICAgICAgICAgICAgQWxsQnVsbGV0cy5wdXNoKG5ldyBCdWxsZXQoeCwgeSwgdGVtcC5yb3RhdGlvbiwgdGVtcC5jb2xvciwgdGVtcC51c2VyTmFtZSkpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYXVkaW9VcmwgPSAnLi4vLi4vYXNzZXRzL0JvbnVzL3NmeF9sYXNlcjIub2dnJztcbiAgICAgICAgICAgICAgICAgICAgaWYgKHAgJSAyID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1ZGlvVXJsID0gJy4uLy4uL2Fzc2V0cy9Cb251cy9zZnhfbGFzZXIxLm9nZyc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIHNob3QgPSBuZXcgQXVkaW8oYXVkaW9VcmwpO1xuICAgICAgICAgICAgICAgICAgICBzaG90LnBsYXkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGZ1bmN0aW9uIGZpbHRlclBsYXllcnMob2JqLGRhdGEpe1xuICAgICAgICAgICAgcmV0dXJuIGRhdGEudXNlcm5hbWUgPT0gb2JqLnVzZXJOYW1lO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZHJhdygpe1xuICAgICAgICAgICAgaWYoQWxsUGxheWVycy5sZW5ndGg+MCl7XG4gICAgICAgICAgICAgICAgLy9BbGxQbGF5ZXJzWzBdLnNwZWVkID0gMDtcbiAgICAgICAgICAgICAgICAvL0FsbFBsYXllcnNbMV0uc3BlZWQgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLDAsY2Fudi53aWR0aCwgY2Fudi5oZWlnaHQpO1xuICAgICAgICAgICAgdmFyIHJhdGlvID0gY2Fudi53aWR0aC8xMDA7XG5cbiAgICAgICAgICAgIGlmKEFsbEJ1bGxldHMubGVuZ3RoICE9IDApe1xuICAgICAgICAgICAgICAgIHZhciBCdWxsZXRXaWR0aCA9IGNhbnYud2lkdGgvMTAwO1xuICAgICAgICAgICAgICAgIHZhciBCdWxsZXRIZWlnaHQgPSBCdWxsZXRXaWR0aCAqIEFsbEJ1bGxldHNbMF0uaW1hZ2UuaGVpZ2h0L0FsbEJ1bGxldHNbMF0uaW1hZ2Uud2lkdGg7XG5cbiAgICAgICAgICAgICAgICBmb3IodmFyIGJ1bGxldCBpbiBBbGxCdWxsZXRzKXtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGIgPSBBbGxCdWxsZXRzW2J1bGxldF07XG4gICAgICAgICAgICAgICAgICAgIGIud2lkdGggPSBCdWxsZXRXaWR0aDtcbiAgICAgICAgICAgICAgICAgICAgYi5oZWlnaHQgPSBCdWxsZXRIZWlnaHQ7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoYi5leHBsb2RlU3RhZ2UgPT0gMCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL0RyYXcgYnVsbGV0XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguc2F2ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZShiLngqcmF0aW8sIGIueSpyYXRpbyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHgucm90YXRlKGIucm90YXRpb24vMTgwKk1hdGguUEkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShiLmltYWdlLCAtQnVsbGV0V2lkdGgvMiwgLUJ1bGxldEhlaWdodC8yLCBCdWxsZXRXaWR0aCwgQnVsbGV0SGVpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIEFsbEJ1bGxldHNbYnVsbGV0XS54ID0gTWF0aC5jb3MoKGIucm90YXRpb24gLSA5MCkvMTgwKk1hdGguUEkpICsgYi54O1xuICAgICAgICAgICAgICAgICAgICAgICAgQWxsQnVsbGV0c1tidWxsZXRdLnkgPSBNYXRoLnNpbigoYi5yb3RhdGlvbiAtIDkwKS8xODAqTWF0aC5QSSkrIGIueTtcbiAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYoYi5leHBsb2RlU3RhZ2UgPCA0KXtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vRHJhdyBleHBsb3Npb25cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGIuZXhwbG9zaW9uSW1hZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnNhdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC50cmFuc2xhdGUoYi54KnJhdGlvLCBiLnkqcmF0aW8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShiLmV4cGxvc2lvbkltYWdlLCAtQnVsbGV0V2lkdGgsIC1CdWxsZXRXaWR0aCwgQnVsbGV0V2lkdGgqMiwgQnVsbGV0V2lkdGgqMik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHgucmVzdG9yZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZihBbGxQbGF5ZXJzLmxlbmd0aCAhPSAwKXtcbiAgICAgICAgICAgICAgICB2YXIgU3BhY2VzaGlwV2lkdGggPSBjYW52LndpZHRoLzIwO1xuICAgICAgICAgICAgICAgIHZhciBTcGFjZXNoaXBIZWlnaHQgPSBTcGFjZXNoaXBXaWR0aCAqIEFsbFBsYXllcnNbMF0uaW1hZ2UuaGVpZ2h0LyBBbGxQbGF5ZXJzWzBdLmltYWdlLndpZHRoO1xuXG4gICAgICAgICAgICAgICAgZm9yKHZhciBwbGF5ZXIgaW4gQWxsUGxheWVycyl7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwID0gQWxsUGxheWVyc1twbGF5ZXJdO1xuICAgICAgICAgICAgICAgICAgICBwLndpZHRoID0gU3BhY2VzaGlwV2lkdGg7XG4gICAgICAgICAgICAgICAgICAgIHAuaGVpZ2h0ID0gU3BhY2VzaGlwSGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICBjdHguc2F2ZSgpO1xuICAgICAgICAgICAgICAgICAgICBjdHgudHJhbnNsYXRlKHAueCpyYXRpbywgcC55KnJhdGlvKTtcbiAgICAgICAgICAgICAgICAgICAgY3R4LnJvdGF0ZShwLnJvdGF0aW9uLzE4MCpNYXRoLlBJKTtcbiAgICAgICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShwLmltYWdlLCAtU3BhY2VzaGlwV2lkdGgvMiwgLVNwYWNlc2hpcEhlaWdodC8yLCBTcGFjZXNoaXBXaWR0aCwgU3BhY2VzaGlwSGVpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgaWYocC5kYW1hZ2UgPiAwKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UocC5kYW1hZ2VJbWFnZSwgLVNwYWNlc2hpcFdpZHRoLzIsIC1TcGFjZXNoaXBIZWlnaHQvMiwgU3BhY2VzaGlwV2lkdGgsIFNwYWNlc2hpcEhlaWdodCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTtcbiAgICAgICAgICAgICAgICAgICAgQWxsUGxheWVyc1twbGF5ZXJdLnggPSBNYXRoLmNvcygocC5yb3RhdGlvbiAtIDkwKS8xODAqTWF0aC5QSSkvMTAqIHAuc3BlZWQgKyBwLng7XG4gICAgICAgICAgICAgICAgICAgIEFsbFBsYXllcnNbcGxheWVyXS55ID0gTWF0aC5zaW4oKHAucm90YXRpb24gLSA5MCkvMTgwKk1hdGguUEkpLzEwKiBwLnNwZWVkICsgcC55O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYoQWxsQXN0ZXJvaWRzLmxlbmd0aD4wKXtcbiAgICAgICAgICAgICAgICBmb3IodmFyIEFzdGVyb2lkIGluIEFsbEFzdGVyb2lkcyl7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhID0gQWxsQXN0ZXJvaWRzW0FzdGVyb2lkXTtcbiAgICAgICAgICAgICAgICAgICAgYS53aWR0aCA9IGNhbnYud2lkdGgvMTUwMCogYS5pbWFnZS53aWR0aDtcbiAgICAgICAgICAgICAgICAgICAgYS5oZWlnaHQgPSBhLndpZHRoKiBhLmltYWdlLmhlaWdodC8gYS5pbWFnZS53aWR0aDtcbiAgICAgICAgICAgICAgICAgICAgY3R4LnNhdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZShhLngqcmF0aW8sIGEueSpyYXRpbyk7XG4gICAgICAgICAgICAgICAgICAgIGN0eC5yb3RhdGUoYS5yb3RhdGlvbi8xODAqTWF0aC5QSSk7XG4gICAgICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoYS5pbWFnZSwgLWEud2lkdGgvMiwgLWEuaGVpZ2h0LzIsIGEud2lkdGgsIGEuaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYoYS54IDwgLTUgfHwgYS54ID4gMTA1IHx8IGEueSA8IC01IHx8IGEueSA+IDEwNSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL25pZXV3ZSBhc3Rlcm9pZCB0ZWtlbmVuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIga2V1emUgPSBNYXRoLnJhbmRvbSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoa2V1emUgPCAwLjI1KXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2xpbmtzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQWxsQXN0ZXJvaWRzW0FzdGVyb2lkXS54ID0gLTQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQWxsQXN0ZXJvaWRzW0FzdGVyb2lkXS55ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjEwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQWxsQXN0ZXJvaWRzW0FzdGVyb2lkXS5yb3RhdGlvbiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoxODApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYoa2V1emUgPCAwLjUpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYm92ZW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbGxBc3Rlcm9pZHNbQXN0ZXJvaWRdLnggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMTAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbGxBc3Rlcm9pZHNbQXN0ZXJvaWRdLnkgPSAtNDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbGxBc3Rlcm9pZHNbQXN0ZXJvaWRdLnJvdGF0aW9uID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjE4MCkgKyA5MDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKGtldXplIDwgMC43NSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9yZWNodHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbGxBc3Rlcm9pZHNbQXN0ZXJvaWRdLnggPSAxMDQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQWxsQXN0ZXJvaWRzW0FzdGVyb2lkXS55ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjEwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQWxsQXN0ZXJvaWRzW0FzdGVyb2lkXS5yb3RhdGlvbiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoxODApICsgMTgwO1xuICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9vbmRlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFsbEFzdGVyb2lkc1tBc3Rlcm9pZF0ueCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoxMDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFsbEFzdGVyb2lkc1tBc3Rlcm9pZF0ueSA9IDEwNDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbGxBc3Rlcm9pZHNbQXN0ZXJvaWRdLnJvdGF0aW9uID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjE4MCkgKyAyNzA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBBbGxBc3Rlcm9pZHNbQXN0ZXJvaWRdLnNldEltYWdlKE1hdGguY2VpbChNYXRoLnJhbmRvbSgpKjE4KSlcblxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgIEFsbEFzdGVyb2lkc1tBc3Rlcm9pZF0ueCA9IE1hdGguY29zKChhLnJvdGF0aW9uIC0gOTApLzE4MCpNYXRoLlBJKS8zMCArIGEueDtcbiAgICAgICAgICAgICAgICAgICAgICAgIEFsbEFzdGVyb2lkc1tBc3Rlcm9pZF0ueSA9IE1hdGguc2luKChhLnJvdGF0aW9uIC0gOTApLzE4MCpNYXRoLlBJKS8zMCArIGEueTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2hlY2tCdWxsZXRzKCk7XG5cbiAgICAgICAgICAgIGNvbGxpc2lvbkRldGVjdGlvbigpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gY2hlY2tCdWxsZXRzKCl7XG4gICAgICAgICAgICBmb3IodmFyIGIgaW4gQWxsQnVsbGV0cyl7XG4gICAgICAgICAgICAgICAgaWYoQWxsQnVsbGV0c1tiXS54IDwgMCB8fCBBbGxCdWxsZXRzW2JdLnggPiBjYW52LndpZHRoIHx8IEFsbEJ1bGxldHNbYl0ueSA8IDAgfHwgQWxsQnVsbGV0c1tiXS55ID4gY2Fudi5oZWlnaHQpe1xuICAgICAgICAgICAgICAgICAgICBBbGxCdWxsZXRzLnNwbGljZShiLCAxKTtcbiAgICAgICAgICAgICAgICB9ZWxzZSBpZihBbGxCdWxsZXRzW2JdLmV4cGxvZGVTdGFnZSA+MCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoQWxsQnVsbGV0c1tiXS5leHBsb2RlU3RhZ2UgPCA0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBBbGxCdWxsZXRzW2JdLmV4cGxvZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEFsbEJ1bGxldHMuc3BsaWNlKGIsIDEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gY29sbGlzaW9uRGV0ZWN0aW9uKCl7XG4gICAgICAgICAgICAvL1BsYXllciAtIEJ1bGxldFxuICAgICAgICAgICAgdmFyIGxpdmluZ1BsYXllcnM9W107XG4gICAgICAgICAgICBmb3IodmFyIHAgaW4gQWxsUGxheWVycyl7XG4gICAgICAgICAgICAgICAgaWYoQWxsUGxheWVyc1twXS5kYW1hZ2U8NCl7XG4gICAgICAgICAgICAgICAgICAgIGxpdmluZ1BsYXllcnMucHVzaChBbGxQbGF5ZXJzW3BdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yKHZhciBiIGluIEFsbEJ1bGxldHMpe1xuICAgICAgICAgICAgICAgICAgICBpZihBbGxCdWxsZXRzW2JdLmV4cGxvZGVTdGFnZSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoQWxsQnVsbGV0c1tiXS5wbGF5ZXIgIT0gQWxsUGxheWVyc1twXS51c2VyTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByYWRpdXMgPSBNYXRoLnNxcnQoMikgLyAyICogKEFsbEJ1bGxldHNbYl0uaGVpZ2h0IC8gMiAtIEFsbEJ1bGxldHNbYl0ud2lkdGggLyAyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYW5nbGUgPSAoMzYwIC0gKEFsbEJ1bGxldHNbYl0ucm90YXRpb24pKSAvIDE4MCAqIE1hdGguUEk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJ1bGxldEhlYWRYID0gKEFsbEJ1bGxldHNbYl0ueCAqIGNhbnYud2lkdGggLyAxMDAgLSAocmFkaXVzICogTWF0aC5zaW4oYW5nbGUpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJ1bGxldEhlYWRZID0gKEFsbEJ1bGxldHNbYl0ueSAqIGNhbnYud2lkdGggLyAxMDAgLSAocmFkaXVzICogTWF0aC5jb3MoYW5nbGUpKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3BhY2VTaGlwWCA9IEFsbFBsYXllcnNbcF0ueCAqIGNhbnYud2lkdGggLyAxMDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNwYWNlU2hpcFkgPSBBbGxQbGF5ZXJzW3BdLnkgKiBjYW52LndpZHRoIC8gMTAwO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRpc3RhbmNlID0gTWF0aC5zcXJ0KChidWxsZXRIZWFkWCAtIHNwYWNlU2hpcFgpICogKGJ1bGxldEhlYWRYIC0gc3BhY2VTaGlwWCkgKyAoYnVsbGV0SGVhZFkgLSBzcGFjZVNoaXBZKSAqIChidWxsZXRIZWFkWSAtIHNwYWNlU2hpcFkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlzdGFuY2UgPCAoQWxsQnVsbGV0c1tiXS53aWR0aCAvIDIgKyBBbGxQbGF5ZXJzW3BdLndpZHRoIC8gMikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhbWFnZXNvdW5kID0gbmV3IEF1ZGlvKCcuLi8uLi9hc3NldHMvQm9udXMvc2Z4X2xvc2Uub2dnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhbWFnZXNvdW5kLnBsYXkoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWxsUGxheWVyc1twXS5pbmNyZWFzZURhbWFnZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnVzZXJuYW1lID0gQWxsUGxheWVyc1twXS51c2VyTmFtZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5saWZlID0gMy1BbGxQbGF5ZXJzW3BdLmRhbWFnZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc29ja2V0U2VydmljZS5lbWl0KFwicGxheWVyTGlmZVwiLGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbGxCdWxsZXRzW2JdLmV4cGxvZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy9QbGF5ZXIgLSBBc3Rlcm9pZFxuICAgICAgICAgICAgICAgIGZvcih2YXIgYSBpbiBBbGxBc3Rlcm9pZHMpe1xuICAgICAgICAgICAgICAgICAgICB2YXIgYXN0ZXJvaWRYID0gQWxsQXN0ZXJvaWRzW2FdLnggKiBjYW52LndpZHRoIC8gMTAwO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYXN0ZXJvaWRZID0gQWxsQXN0ZXJvaWRzW2FdLnkgKiBjYW52LndpZHRoIC8gMTAwO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBzcGFjZVNoaXBYID0gQWxsUGxheWVyc1twXS54ICogY2Fudi53aWR0aCAvIDEwMDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNwYWNlU2hpcFkgPSBBbGxQbGF5ZXJzW3BdLnkgKiBjYW52LndpZHRoIC8gMTAwO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBkaXN0YW5jZSA9IE1hdGguc3FydCgoYXN0ZXJvaWRYIC0gc3BhY2VTaGlwWCkgKiAoYXN0ZXJvaWRYIC0gc3BhY2VTaGlwWCkgKyAoYXN0ZXJvaWRZIC0gc3BhY2VTaGlwWSkgKiAoYXN0ZXJvaWRZIC0gc3BhY2VTaGlwWSkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGlzdGFuY2UgPCAoQWxsQXN0ZXJvaWRzW2FdLndpZHRoIC8gMiArIEFsbFBsYXllcnNbcF0ud2lkdGggLyAyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhbWFnZXNvdW5kID0gbmV3IEF1ZGlvKCcuLi8uLi9hc3NldHMvQm9udXMvc2Z4X2xvc2Uub2dnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYW1hZ2Vzb3VuZC5wbGF5KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBBbGxQbGF5ZXJzW3BdLmRhbWFnZSA9IDM7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS51c2VybmFtZSA9IEFsbFBsYXllcnNbcF0udXNlck5hbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmxpZmUgPSAzLUFsbFBsYXllcnNbcF0uZGFtYWdlO1xuICAgICAgICAgICAgICAgICAgICAgICAgc29ja2V0U2VydmljZS5lbWl0KFwicGxheWVyTGlmZVwiLGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgQWxsQnVsbGV0c1tiXS5leHBsb2RlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvL1BsYXllciAtIFBsYXllclxuXG4gICAgICAgICAgICB9XG5cblxuXG5cbiAgICAgICAgICAgIC8vQnVsbGV0IC0gQXN0ZXJvaWRcblxuXG4gICAgICAgICAgICBpZihsaXZpbmdQbGF5ZXJzLmxlbmd0aD09MSl7XG4gICAgICAgICAgICAgICAgZW5kR2FtZShsaXZpbmdQbGF5ZXJzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGVuZEdhbWUobGl2aW5nUGxheWVycyl7XG4gICAgICAgICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQoY3ljbGUpKSB7XG4gICAgICAgICAgICAgICAgJGludGVydmFsLmNhbmNlbChjeWNsZSk7XG4gICAgICAgICAgICAgICAgY3ljbGUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkc2NvcGUuZW5kR2FtZT10cnVlO1xuICAgICAgICAgICAgJHNjb3BlLmVuZEdhbWVUZXh0PSBsaXZpbmdQbGF5ZXJzWzBdLnVzZXJOYW1lICsgXCIgaXMgdGhlIHdpbm5lciFcIlxuICAgICAgICAgICAgc29ja2V0U2VydmljZS5lbWl0KFwiZW5kR2FtZVwiLCBsaXZpbmdQbGF5ZXJzWzBdLnVzZXJOYW1lKTtcbiAgICAgICAgfVxuICAgICAgICAkc2NvcGUucmVzdGFydEdhbWUgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgJHNjb3BlLmVuZEdhbWU9ZmFsc2U7XG4gICAgICAgICAgICB2YXIgdGVsbGVyPTA7XG4gICAgICAgICAgICBmb3IodmFyIHAgaW4gQWxsUGxheWVycyl7XG4gICAgICAgICAgICAgICAgQWxsUGxheWVyc1twXS5yZXNldChkZWZhdWx0VmFyc1t0ZWxsZXJdLngsZGVmYXVsdFZhcnNbdGVsbGVyXS55LGRlZmF1bHRWYXJzW3RlbGxlcl0ucm90YXRpb24pO1xuICAgICAgICAgICAgICAgIHRlbGxlcisrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLDAsY2Fudi53aWR0aCwgY2Fudi5oZWlnaHQpO1xuICAgICAgICAgICAgc29ja2V0U2VydmljZS5lbWl0KFwicmVzdGFydEdhbWVcIixudWxsKTtcbiAgICAgICAgICAgIGN5Y2xlID0gJGludGVydmFsKGRyYXcsIDEwKTtcbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJhcHBcIikuY29udHJvbGxlcihcInBsYXlDb250cm9sbGVyXCIsIFtcIiRzY29wZVwiLCBcIiRpbnRlcnZhbFwiLCBcIiR3aW5kb3dcIiwgXCJzb2NrZXRTZXJ2aWNlXCIsIFwiZGlzcGxheVNlcnZpY2VcIiwgXCJwbGF5ZXJTZXJ2aWNlXCIsIHBsYXlDb250cm9sbGVyXSlcbn0pKCk7IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGp1c3Rpam5kZXBvdmVyIG9uIDA5LzEyLzE1LlxuICovXG5cblxudmFyIEFzdGVyb2lkID0gZnVuY3Rpb24oeCwgeSwgcm90YXRpb24sIHN0YWdlKXtcbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG4gICAgdGhpcy53aWR0aCA9IDA7XG4gICAgdGhpcy5oZWlnaHQgPSAwO1xuICAgIHRoaXMucm90YXRpb24gPSByb3RhdGlvbjtcbiAgICB0aGlzLnN0YWdlID0gc3RhZ2U7XG4gICAgdGhpcy5pbWFnZSA9IG5ldyBJbWFnZSgpO1xuICAgIHRoaXMuaW1hZ2Uuc3JjID0gKFwiLi4vYXNzZXRzL1BORy9NZXRlb3JzL21ldGVvcl9cIiArIHN0YWdlICsgXCIucG5nXCIpO1xufTtcblxuQXN0ZXJvaWQucHJvdG90eXBlLnNldEltYWdlID0gZnVuY3Rpb24oc3RhZ2Upe1xuICAgIHRoaXMuc3RhZ2UgPSBzdGFnZTtcbiAgICB0aGlzLmltYWdlLnNyYyA9IChcIi4uL2Fzc2V0cy9QTkcvTWV0ZW9ycy9tZXRlb3JfXCIgKyBzdGFnZSArIFwiLnBuZ1wiKTtcbn07IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGp1c3Rpam5kZXBvdmVyIG9uIDIyLzEyLzE1LlxuICovXG5cbnZhciBCdWxsZXQgPSBmdW5jdGlvbih4LCB5LHJvdGF0aW9uLCBjb2xvciwgcGxheWVyKXtcbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG4gICAgdGhpcy5yb3RhdGlvbiA9IHJvdGF0aW9uO1xuICAgIHRoaXMuaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcbiAgICB0aGlzLmNvbG9yID0gY29sb3I7XG4gICAgdGhpcy53aWR0aCA9IDA7XG4gICAgdGhpcy5oZWlnaHQgPSAwO1xuICAgIHRoaXMucGxheWVyID0gcGxheWVyO1xuICAgIHRoaXMuZXhwbG9zaW9uSW1hZ2UgPSBuZXcgSW1hZ2UoKTtcbiAgICB0aGlzLmV4cGxvZGVTdGFnZSA9IDA7XG4gICAgaWYodGhpcy5jb2xvciA9PSBcIm9yYW5nZVwiKXtcbiAgICAgICAgdGhpcy5jb2xvciA9ICdyZWQnO1xuICAgIH1cbiAgICB0aGlzLmltYWdlLnNyYyA9ICcuLi9hc3NldHMvUE5HL0xhc2Vycy9sYXNlcicrIHRoaXMuY29sb3IuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB0aGlzLmNvbG9yLnNsaWNlKDEpICsnMDEucG5nJ1xufTtcblxuQnVsbGV0LnByb3RvdHlwZS5leHBsb2RlID0gZnVuY3Rpb24oKXtcbiAgICBpZih0aGlzLmV4cGxvZGVTdGFnZSA8IDQpe1xuICAgICAgICB0aGlzLmV4cGxvZGVTdGFnZSsrO1xuICAgICAgICB2YXIgbnVtYmVyO1xuICAgICAgICBpZih0aGlzLmV4cGxvZGVTdGFnZSA8IDMpe1xuICAgICAgICAgICBudW1iZXIgPSAxXG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgbnVtYmVyID0gMlxuICAgICAgICB9XG4gICAgICAgIHRoaXMuZXhwbG9zaW9uSW1hZ2Uuc3JjID0gJy4uL2Fzc2V0cy9QTkcvTGFzZXJzL2xhc2VyJyArIHRoaXMuY29sb3IuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB0aGlzLmNvbG9yLnNsaWNlKDEpICsgJ0V4cGxvZGUnKyBudW1iZXIgKycucG5nJztcbiAgICB9ZWxzZXtcbiAgICAgICAgdGhpcy5leHBsb3Npb25JbWFnZS5zcmMgPSAnJztcbiAgICB9XG59O1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGp1c3Rpam5kZXBvdmVyIG9uIDA5LzEyLzE1LlxuICovXG5cbnZhciBTcGFjZXNoaXAgPSBmdW5jdGlvbih1c2VyTmFtZSwgeCwgeSwgY29sb3IsIHJvdGF0aW9uKXtcbiAgICB0aGlzLnVzZXJOYW1lID0gdXNlck5hbWU7XG4gICAgdGhpcy54ID0geDtcbiAgICB0aGlzLnkgPSB5O1xuICAgIHRoaXMuc3BlZWQgPSAxO1xuICAgIHRoaXMuY29sb3IgPSBjb2xvcjtcbiAgICB0aGlzLnJvdGF0aW9uID0gcm90YXRpb247XG4gICAgdGhpcy5pbWFnZSA9IG5ldyBJbWFnZSgpO1xuICAgIHRoaXMuZGFtYWdlID0gMDtcbiAgICB0aGlzLndpZHRoID0gMDtcbiAgICB0aGlzLmhlaWdodCA9IDA7XG4gICAgdGhpcy5kYW1hZ2VJbWFnZSA9IG5ldyBJbWFnZSgpO1xuICAgIHRoaXMuaW1hZ2Uuc3JjID0gJy4uL2Fzc2V0cy9QTkcvcGxheWVyU2hpcDFfJysgdGhpcy5jb2xvciArJy5wbmcnXG59O1xuXG5TcGFjZXNoaXAucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKHgsIHksIHJvdGF0aW9uKSB7XG4gICAgdGhpcy5zcGVlZCA9IDE7XG4gICAgdGhpcy5kYW1hZ2UgPSAwO1xuICAgIHRoaXMuZGFtYWdlSW1hZ2UgPSBuZXcgSW1hZ2UoKTtcbiAgICB0aGlzLmltYWdlLnNyYyA9ICcuLi9hc3NldHMvUE5HL3BsYXllclNoaXAxXycrIHRoaXMuY29sb3IgKycucG5nJ1xuICAgIHRoaXMueCA9IHg7XG4gICAgdGhpcy55ID0geTtcbiAgICB0aGlzLnJvdGF0aW9uID0gcm90YXRpb247XG59O1xuXG5TcGFjZXNoaXAucHJvdG90eXBlLm1vdmVTcGFjZXNoaXAgPSBmdW5jdGlvbih4LCB5KXtcbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG59O1xuXG5TcGFjZXNoaXAucHJvdG90eXBlLm1vdmVTcGFjZXNoaXBSZWxhdGl2ZSA9IGZ1bmN0aW9uKHgsIHkpe1xuICAgIHRoaXMueCA9IHRoaXMueCt4O1xuICAgIHRoaXMueSA9IHRoaXMueSt5O1xufTtcblxuU3BhY2VzaGlwLnByb3RvdHlwZS5yb3RhdGVTcGFjZXNoaXAgPSBmdW5jdGlvbihkZWdyZWUpe1xuICAgIHRoaXMucm90YXRpb24gPSBkZWdyZWU7XG59O1xuXG5TcGFjZXNoaXAucHJvdG90eXBlLnJvdGF0ZVNwYWNlc2hpcFJlbGF0aXZlID0gZnVuY3Rpb24oZGVncmVlKXtcbiAgICB0aGlzLnJvdGF0aW9uID0gdGhpcy5yb3RhdGlvbiArIGRlZ3JlZS81O1xuICAgIGlmKHRoaXMucm90YXRpb24gPCAtMzYwKXtcbiAgICAgICAgdGhpcy5yb3RhdGlvbiA9IHRoaXMucm90YXRpb24gKyA3MjA7XG4gICAgfVxuICAgIGlmKHRoaXMucm90YXRpb24gPiAzNjApe1xuICAgICAgICB0aGlzLnJvdGF0aW9uID0gdGhpcy5yb3RhdGlvbiAtIDcyMDtcbiAgICB9XG59O1xuXG5TcGFjZXNoaXAucHJvdG90eXBlLmluY3JlYXNlRGFtYWdlID0gZnVuY3Rpb24oKXtcbiAgICBpZih0aGlzLmRhbWFnZSA8IDQpe1xuICAgICAgICB0aGlzLmRhbWFnZSArPSAxO1xuICAgIH1cblxuICAgIGlmKHRoaXMuZGFtYWdlIDw9IDMgJiYgdGhpcy5kYW1hZ2UgPiAwKXtcbiAgICAgICAgdGhpcy5kYW1hZ2VJbWFnZS5zcmMgPSAnLi4vYXNzZXRzL1BORy9EYW1hZ2UvcGxheWVyU2hpcDFfZGFtYWdlJysgdGhpcy5kYW1hZ2UgKyAnLnBuZyc7XG4gICAgfWVsc2UgaWYodGhpcy5kYW1hZ2U9PTQpe1xuICAgICAgICB0aGlzLmRhbWFnZUltYWdlLnNyYyA9ICcuLi9hc3NldHMvUE5HL0RhbWFnZS9leHBsb2RlLmdpZic7XG4gICAgfVxufTtcblxuU3BhY2VzaGlwLnByb3RvdHlwZS5kZWNyZWFzZURhbWFnZSA9IGZ1bmN0aW9uKCl7XG4gICAgaWYodGhpcy5kYW1hZ2UgPiAwKXtcbiAgICAgICAgdGhpcy5kYW1hZ2UgLT0gMTtcbiAgICB9XG5cbiAgICBpZih0aGlzLmRhbWFnZSA8PSAzICYmIHRoaXMuZGFtYWdlID4gMCl7XG4gICAgICAgIHRoaXMuZGFtYWdlSW1hZ2Uuc3JjID0gJy4uL2Fzc2V0cy9QTkcvRGFtYWdlL3BsYXllclNoaXAxX2RhbWFnZScrIHRoaXMuZGFtYWdlICsgJy5wbmcnO1xuICAgIH1cbn07XG5cbiIsIi8qKlxuICogQ3JlYXRlZCBieSBqdXN0aWpuZGVwb3ZlciBvbiAxNi8xMi8xNS5cbiAqL1xuKGZ1bmN0aW9uKCl7XG4gICAgdmFyIGNhbnZhc0RpcmVjdGl2ZSA9IGZ1bmN0aW9uKCR3aW5kb3cpe1xuICAgICAgICByZXR1cm57XG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICAgICAgbGluazpsaW5rLFxuICAgICAgICAgICAgcmVwbGFjZTp0cnVlLFxuICAgICAgICAgICAgdGVtcGxhdGU6JzxjYW52YXMgaWQ9XCJnYW1lXCIgY2xhc3M9XCJwbGF5QXJlYVwiIHdpZHRoPVwie3t3aWR0aH19XCIgaGVpZ2h0PVwie3t3aWR0aH19XCIgLz4nXG4gICAgICAgIH07XG5cbiAgICAgICAgZnVuY3Rpb24gbGluayhzY29wZSwgZWxlbWVudCwgYXR0cnMpe1xuICAgICAgICAgICAgaWYoJHdpbmRvdy5pbm5lcldpZHRoIDwgJHdpbmRvdy5pbm5lckhlaWdodCl7XG4gICAgICAgICAgICAgICAgc2NvcGUud2lkdGggPSAkd2luZG93LmlubmVyV2lkdGggLSAyMDtcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIHNjb3BlLndpZHRoID0gJHdpbmRvdy5pbm5lckhlaWdodCAtIDIwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJHdpbmRvdykuYmluZCgncmVzaXplJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBpZigkd2luZG93LmlubmVyV2lkdGggPCAkd2luZG93LmlubmVySGVpZ2h0KXtcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUud2lkdGggPSAkd2luZG93LmlubmVyV2lkdGggLSAyMDtcbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUud2lkdGggPSAkd2luZG93LmlubmVySGVpZ2h0IC0gMjA7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgc2NvcGUuJGRpZ2VzdCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmRpcmVjdGl2ZShcImNhbnZhc0RpcmVjdGl2ZVwiLCBbXCIkd2luZG93XCIsIGNhbnZhc0RpcmVjdGl2ZV0pO1xufSkoKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgTWljaGllbCBvbiAxNi8xMi8yMDE1LlxuICovXG4vKipcbiAqIENyZWF0ZWQgYnkganVzdGlqbmRlcG92ZXIgb24gMTYvMTIvMTUuXG4gKi9cblxuXG4oZnVuY3Rpb24oKXtcbiAgICB2YXIgZGlzcGxheVNlcnZpY2UgPSBmdW5jdGlvbigpe1xuICAgICAgICAvL0xvZ2luIENvbnRyb2xsZXJcbiAgICAgICAgdmFyIExDU2hvdyA9IHRydWU7XG4gICAgICAgIC8vUGxheSBjb250cm9sbGVyXG4gICAgICAgIHZhciBQQ1Nob3cgPSBmYWxzZTtcblxuICAgICAgICByZXR1cm57XG4gICAgICAgICAgICBnZXRMQ1Nob3c6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIExDU2hvdztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXRMQ1Nob3c6IGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAgICAgICAgICAgICBMQ1Nob3cgPSB2YWx1ZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXRQQ1Nob3c6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFBDU2hvdztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXRQQ1Nob3c6IGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAgICAgICAgICAgICBQQ1Nob3cgPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuZmFjdG9yeSgnZGlzcGxheVNlcnZpY2UnLCBbZGlzcGxheVNlcnZpY2VdKTtcbn0pKCk7IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGp1c3Rpam5kZXBvdmVyIG9uIDE3LzEyLzE1LlxuICovXG5cbihmdW5jdGlvbigpe1xuICAgIHZhciBwbGF5ZXJTZXJ2aWNlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgLy9Mb2dpbiBDb250cm9sbGVyXG4gICAgICAgIHZhciBwbGF5ZXJzID0gW107XG5cbiAgICAgICAgcmV0dXJue1xuICAgICAgICAgICAgZ2V0UGxheWVyczogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGxheWVycztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXRQbGF5ZXJzOiBmdW5jdGlvbihwbGF5ZXJzQXJyYXkpe1xuICAgICAgICAgICAgICAgIHBsYXllcnMgPSBwbGF5ZXJzQXJyYXk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmZhY3RvcnkoJ3BsYXllclNlcnZpY2UnLCBbcGxheWVyU2VydmljZV0pO1xufSkoKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkganVzdGlqbmRlcG92ZXIgb24gMDkvMTIvMTUuXG4gKi9cblxuKGZ1bmN0aW9uKCl7XG5cbiAgICB2YXIgc29ja2V0U2VydmljZSA9IGZ1bmN0aW9uKCRyb290U2NvcGUpe1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgLy9wcml2YXRlXG4gICAgICAgIHZhciBzb2NrZXQgPSBpby5jb25uZWN0KHdpbmRvdy5sb2NhdGlvbi5ob3N0KTtcbiAgICAgICAgLy9mdW5jdGlvbnNcbiAgICAgICAgdmFyIG9uID0gZnVuY3Rpb24gKGV2ZW50TmFtZSwgY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHNvY2tldC5vbihldmVudE5hbWUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KHNvY2tldCwgYXJncyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgZW1pdCA9IGZ1bmN0aW9uIChldmVudE5hbWUsIGRhdGEsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICBzb2NrZXQuZW1pdChldmVudE5hbWUsIGRhdGEsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkoc29ja2V0LCBhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfTtcblxuICAgICAgICAvL3B1YmxpY1xuICAgICAgICByZXR1cm57XG4gICAgICAgICAgICBvbjogb24sXG4gICAgICAgICAgICBlbWl0OiBlbWl0LFxuICAgICAgICAgICAgc29ja2V0OiBzb2NrZXRcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5mYWN0b3J5KFwic29ja2V0U2VydmljZVwiLCBbXCIkcm9vdFNjb3BlXCIsIHNvY2tldFNlcnZpY2VdKTtcblxufSkoKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
