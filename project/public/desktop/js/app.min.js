!function(){angular.module("app",[])}(),function(){var e=function(e,n){var o=function(){n.emit("pcconnect",null)};e.room="",n.on("requestRoom",function(n){e.room=n}),n.on("deviceOrientation",function(e){var n=(e.username,{});n.gamma=e.gamma,n.beta=e.beta,n.alpha=e.alpha}),e.usernames={},n.on("updateusers",function(n){e.usernames=n}),function(){o()}()};angular.module("app").controller("socketController",["$scope","socketService",e])}(),angular.module("app").directive("qrcode",["$window",function(e){var n=!!e.CanvasRenderingContext2D,o={L:"Low",M:"Medium",Q:"Quartile",H:"High"},t=function(e,n,o,t){for(var r=0;o>r;r++)for(var i=0;o>i;i++){var a=Math.ceil((i+1)*t)-Math.floor(i*t),c=Math.ceil((r+1)*t)-Math.floor(r*t);e.fillStyle=n.isDark(r,i)?"#000":"#fff",e.fillRect(Math.round(i*t),Math.round(r*t),a,c)}};return{restrict:"E",template:'<canvas class="qrcode"></canvas>',link:function(e,r,i){var a,c,u,s,f,l,d,p,m,v=r[0],h=r.find("canvas"),g=h[0],M=n?g.getContext("2d"):null,w="download"in i,$=i.href,q=w||$?document.createElement("a"):"",y=/^\s+|\s+$/g,C=function(e){c=Math.max(1,Math.min(parseInt(e,10),10))||4},b=function(e){u=e in o?e:"M"},k=function(e){if(e){s=e.replace(y,""),p=qrcode(c,u),p.addData(s);try{p.make()}catch(n){return void(a=n.message)}a=!1,l=p.getModuleCount()}},L=function(e){f=parseInt(e,10)||2*l,d=f/l,g.width=g.height=f},S=function(){if(p){if(a)return q&&(q.removeAttribute("download"),q.title="",q.href="#_"),n||(v.innerHTML='<img src width="'+f+'"height="'+f+'"class="qrcode">'),void e.$emit("qrcode:error",a);if(w&&(v.download="qrcode.png",v.title="Download QR code"),n){if(t(M,p,l,d),w)return void(v.href=g.toDataURL("image/png"))}else if(v.innerHTML=p.createImgTag(d,0),m=r.find("img"),m.addClass("qrcode"),w)return void(v.href=m[0].src);$&&(v.href=$)}};q&&(q.className="qrcode-link",h.wrap(q),v=v.firstChild),C(i.version),b(i.errorCorrectionLevel),L(i.size),i.$observe("version",function(e){e&&(C(e),k(s),L(f),S())}),i.$observe("errorCorrectionLevel",function(e){e&&(b(e),k(s),L(f),S())}),i.$observe("data",function(e){e&&(k(e),L(f),S())}),i.$observe("size",function(e){e&&(L(e),S())}),i.$observe("href",function(e){e&&($=e,S())})}}}]);var Spaceship=function(e,n,o){this.orientation=0,this.gamerId=e,this.x=n,this.y=o};Spaceship.prototype.moveSpaceship=function(e,n){},function(){var e=function(e){"use strict";var n=io.connect(window.location.host),o=function(o,t){n.on(o,function(){var o=arguments;e.$apply(function(){t.apply(n,o)})})},t=function(o,t,r){n.emit(o,t,function(){var o=arguments;e.$apply(function(){r&&r.apply(n,o)})})};return{on:o,emit:t,socket:n}};angular.module("app").factory("socketService",["$rootScope",e])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNvbnRyb2xsZXIvc29ja2V0Q29udHJvbGxlci5qcyIsImRpcmVjdGl2ZS9xcmNvZGVEaXJlY3RpdmUuanMiLCJtb2RlbHMvU3BhY2VzaGlwLmpzIiwic2VydmljZXMvc29ja2V0U2VydmljZS5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwic29ja2V0Q29udHJvbGxlciIsIiRzY29wZSIsInNvY2tldFNlcnZpY2UiLCJtYWtlUm9vbSIsImVtaXQiLCJyb29tIiwib24iLCJkYXRhIiwiZGV2aWNlT3JpZW50YXRpb24iLCJ1c2VybmFtZSIsImdhbW1hIiwiYmV0YSIsImFscGhhIiwidXNlcm5hbWVzIiwiY29udHJvbGxlciIsImRpcmVjdGl2ZSIsIiR3aW5kb3ciLCJjYW52YXMyRCIsIkNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCIsImxldmVscyIsIkwiLCJNIiwiUSIsIkgiLCJkcmF3IiwiY29udGV4dCIsInFyIiwibW9kdWxlcyIsInRpbGUiLCJyb3ciLCJjb2wiLCJ3IiwiTWF0aCIsImNlaWwiLCJmbG9vciIsImgiLCJmaWxsU3R5bGUiLCJpc0RhcmsiLCJmaWxsUmVjdCIsInJvdW5kIiwicmVzdHJpY3QiLCJ0ZW1wbGF0ZSIsImxpbmsiLCJzY29wZSIsImVsZW1lbnQiLCJhdHRycyIsImVycm9yIiwidmVyc2lvbiIsImVycm9yQ29ycmVjdGlvbkxldmVsIiwic2l6ZSIsIiRpbWciLCJkb21FbGVtZW50IiwiJGNhbnZhcyIsImZpbmQiLCJjYW52YXMiLCJnZXRDb250ZXh0IiwiZG93bmxvYWQiLCJocmVmIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwidHJpbSIsInNldFZlcnNpb24iLCJ2YWx1ZSIsIm1heCIsIm1pbiIsInBhcnNlSW50Iiwic2V0RXJyb3JDb3JyZWN0aW9uTGV2ZWwiLCJzZXREYXRhIiwicmVwbGFjZSIsInFyY29kZSIsImFkZERhdGEiLCJtYWtlIiwiZSIsIm1lc3NhZ2UiLCJnZXRNb2R1bGVDb3VudCIsInNldFNpemUiLCJ3aWR0aCIsImhlaWdodCIsInJlbmRlciIsInJlbW92ZUF0dHJpYnV0ZSIsInRpdGxlIiwiaW5uZXJIVE1MIiwiJGVtaXQiLCJ0b0RhdGFVUkwiLCJjcmVhdGVJbWdUYWciLCJhZGRDbGFzcyIsInNyYyIsImNsYXNzTmFtZSIsIndyYXAiLCJmaXJzdENoaWxkIiwiJG9ic2VydmUiLCJTcGFjZXNoaXAiLCJnYW1lcklkIiwieCIsInkiLCJ0aGlzIiwib3JpZW50YXRpb24iLCJwcm90b3R5cGUiLCJtb3ZlU3BhY2VzaGlwIiwiJHJvb3RTY29wZSIsInNvY2tldCIsImlvIiwiY29ubmVjdCIsIndpbmRvdyIsImxvY2F0aW9uIiwiaG9zdCIsImV2ZW50TmFtZSIsImNhbGxiYWNrIiwiYXJncyIsImFyZ3VtZW50cyIsIiRhcHBseSIsImFwcGx5IiwiZmFjdG9yeSJdLCJtYXBwaW5ncyI6IkNBR0EsV0FFQUEsUUFBQUMsT0FBQSxhQ0RBLFdBQ0EsR0FBQUMsR0FBQSxTQUFBQyxFQUFBQyxHQUtBLEdBQUFDLEdBQUEsV0FDQUQsRUFBQUUsS0FBQSxZQUFBLE1BRUFILEdBQUFJLEtBQUEsR0FDQUgsRUFBQUksR0FBQSxjQUFBLFNBQUFDLEdBQ0FOLEVBQUFJLEtBQUFFLElBRUFMLEVBQUFJLEdBQUEsb0JBQUEsU0FBQUMsR0FDQSxHQUNBQyxJQURBRCxFQUFBRSxZQUVBRCxHQUFBRSxNQUFBSCxFQUFBRyxNQUNBRixFQUFBRyxLQUFBSixFQUFBSSxLQUNBSCxFQUFBSSxNQUFBTCxFQUFBSyxRQUVBWCxFQUFBWSxhQUNBWCxFQUFBSSxHQUFBLGNBQUEsU0FBQUMsR0FDQU4sRUFBQVksVUFBQU4sSUFFQSxXQUNBSixPQUtBTCxTQUFBQyxPQUFBLE9BQUFlLFdBQUEsb0JBQUEsU0FBQSxnQkFBQWQsT0M1QkFGLFFBQUFDLE9BQUEsT0FBQWdCLFVBQUEsVUFBQSxVQUFBLFNBQUFDLEdBRUEsR0FBQUMsS0FBQUQsRUFBQUUseUJBQ0FDLEdBQ0FDLEVBQUEsTUFDQUMsRUFBQSxTQUNBQyxFQUFBLFdBQ0FDLEVBQUEsUUFFQUMsRUFBQSxTQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUNBLElBQUEsR0FBQUMsR0FBQSxFQUFBRixFQUFBRSxFQUFBQSxJQUNBLElBQUEsR0FBQUMsR0FBQSxFQUFBSCxFQUFBRyxFQUFBQSxJQUFBLENBQ0EsR0FBQUMsR0FBQUMsS0FBQUMsTUFBQUgsRUFBQSxHQUFBRixHQUFBSSxLQUFBRSxNQUFBSixFQUFBRixHQUNBTyxFQUFBSCxLQUFBQyxNQUFBSixFQUFBLEdBQUFELEdBQUFJLEtBQUFFLE1BQUFMLEVBQUFELEVBRUFILEdBQUFXLFVBQUFWLEVBQUFXLE9BQUFSLEVBQUFDLEdBQUEsT0FBQSxPQUNBTCxFQUFBYSxTQUFBTixLQUFBTyxNQUFBVCxFQUFBRixHQUNBSSxLQUFBTyxNQUFBVixFQUFBRCxHQUFBRyxFQUFBSSxJQUtBLFFBQ0FLLFNBQUEsSUFDQUMsU0FBQSxtQ0FDQUMsS0FBQSxTQUFBQyxFQUFBQyxFQUFBQyxHQUNBLEdBUUFDLEdBQ0FDLEVBQ0FDLEVBQ0F6QyxFQUNBMEMsRUFDQXRCLEVBQ0FDLEVBQ0FGLEVBQ0F3QixFQWhCQUMsRUFBQVAsRUFBQSxHQUNBUSxFQUFBUixFQUFBUyxLQUFBLFVBQ0FDLEVBQUFGLEVBQUEsR0FDQTNCLEVBQUFSLEVBQUFxQyxFQUFBQyxXQUFBLE1BQUEsS0FDQUMsRUFBQSxZQUFBWCxHQUNBWSxFQUFBWixFQUFBWSxLQUNBZixFQUFBYyxHQUFBQyxFQUFBQyxTQUFBQyxjQUFBLEtBQUEsR0FDQUMsRUFBQSxhQVVBQyxFQUFBLFNBQUFDLEdBQ0FmLEVBQUFmLEtBQUErQixJQUFBLEVBQUEvQixLQUFBZ0MsSUFBQUMsU0FBQUgsRUFBQSxJQUFBLE1BQUEsR0FFQUksRUFBQSxTQUFBSixHQUNBZCxFQUFBYyxJQUFBM0MsR0FBQTJDLEVBQUEsS0FFQUssRUFBQSxTQUFBTCxHQUNBLEdBQUFBLEVBQUEsQ0FJQXZELEVBQUF1RCxFQUFBTSxRQUFBUixFQUFBLElBQ0FsQyxFQUFBMkMsT0FBQXRCLEVBQUFDLEdBQ0F0QixFQUFBNEMsUUFBQS9ELEVBRUEsS0FDQW1CLEVBQUE2QyxPQUNBLE1BQUFDLEdBRUEsWUFEQTFCLEVBQUEwQixFQUFBQyxTQUlBM0IsR0FBQSxFQUNBbkIsRUFBQUQsRUFBQWdELG1CQUVBQyxFQUFBLFNBQUFiLEdBQ0FiLEVBQUFnQixTQUFBSCxFQUFBLEtBQUEsRUFBQW5DLEVBQ0FDLEVBQUFxQixFQUFBdEIsRUFDQTJCLEVBQUFzQixNQUFBdEIsRUFBQXVCLE9BQUE1QixHQUVBNkIsRUFBQSxXQUNBLEdBQUFwRCxFQUFBLENBSUEsR0FBQW9CLEVBWUEsTUFYQUosS0FDQUEsRUFBQXFDLGdCQUFBLFlBQ0FyQyxFQUFBc0MsTUFBQSxHQUNBdEMsRUFBQWUsS0FBQSxNQUVBeEMsSUFDQWtDLEVBQUE4QixVQUFBLG1CQUFBaEMsRUFBQSxZQUNBQSxFQUFBLHdCQUdBTixHQUFBdUMsTUFBQSxlQUFBcEMsRUFTQSxJQUxBVSxJQUNBTCxFQUFBSyxTQUFBLGFBQ0FMLEVBQUE2QixNQUFBLG9CQUdBL0QsR0FHQSxHQUZBTyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUVBNEIsRUFFQSxZQURBTCxFQUFBTSxLQUFBSCxFQUFBNkIsVUFBQSxrQkFRQSxJQUpBaEMsRUFBQThCLFVBQUF2RCxFQUFBMEQsYUFBQXhELEVBQUEsR0FDQXNCLEVBQUFOLEVBQUFTLEtBQUEsT0FDQUgsRUFBQW1DLFNBQUEsVUFFQTdCLEVBRUEsWUFEQUwsRUFBQU0sS0FBQVAsRUFBQSxHQUFBb0MsSUFLQTdCLEtBQ0FOLEVBQUFNLEtBQUFBLElBSUFmLEtBQ0FBLEVBQUE2QyxVQUFBLGNBQ0FuQyxFQUFBb0MsS0FBQTlDLEdBQ0FTLEVBQUFBLEVBQUFzQyxZQUdBNUIsRUFBQWhCLEVBQUFFLFNBQ0FtQixFQUFBckIsRUFBQUcsc0JBQ0EyQixFQUFBOUIsRUFBQUksTUFFQUosRUFBQTZDLFNBQUEsVUFBQSxTQUFBNUIsR0FDQUEsSUFJQUQsRUFBQUMsR0FDQUssRUFBQTVELEdBQ0FvRSxFQUFBMUIsR0FDQTZCLE9BR0FqQyxFQUFBNkMsU0FBQSx1QkFBQSxTQUFBNUIsR0FDQUEsSUFJQUksRUFBQUosR0FDQUssRUFBQTVELEdBQ0FvRSxFQUFBMUIsR0FDQTZCLE9BR0FqQyxFQUFBNkMsU0FBQSxPQUFBLFNBQUE1QixHQUNBQSxJQUlBSyxFQUFBTCxHQUNBYSxFQUFBMUIsR0FDQTZCLE9BR0FqQyxFQUFBNkMsU0FBQSxPQUFBLFNBQUE1QixHQUNBQSxJQUlBYSxFQUFBYixHQUNBZ0IsT0FHQWpDLEVBQUE2QyxTQUFBLE9BQUEsU0FBQTVCLEdBQ0FBLElBSUFMLEVBQUFLLEVBQ0FnQixXQ3BMQSxJQUFBYSxXQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEdBQ0FDLEtBQUFDLFlBQUEsRUFDQUQsS0FBQUgsUUFBQUEsRUFDQUcsS0FBQUYsRUFBQUEsRUFDQUUsS0FBQUQsRUFBQUEsRUFHQUgsV0FBQU0sVUFBQUMsY0FBQSxTQUFBTCxFQUFBQyxLQ1BBLFdBRUEsR0FBQTVGLEdBQUEsU0FBQWlHLEdBQ0EsWUFFQSxJQUFBQyxHQUFBQyxHQUFBQyxRQUFBQyxPQUFBQyxTQUFBQyxNQUVBbkcsRUFBQSxTQUFBb0csRUFBQUMsR0FDQVAsRUFBQTlGLEdBQUFvRyxFQUFBLFdBQ0EsR0FBQUUsR0FBQUMsU0FDQVYsR0FBQVcsT0FBQSxXQUNBSCxFQUFBSSxNQUFBWCxFQUFBUSxRQUtBeEcsRUFBQSxTQUFBc0csRUFBQW5HLEVBQUFvRyxHQUNBUCxFQUFBaEcsS0FBQXNHLEVBQUFuRyxFQUFBLFdBQ0EsR0FBQXFHLEdBQUFDLFNBQ0FWLEdBQUFXLE9BQUEsV0FDQUgsR0FDQUEsRUFBQUksTUFBQVgsRUFBQVEsT0FPQSxRQUNBdEcsR0FBQUEsRUFDQUYsS0FBQUEsRUFDQWdHLE9BQUFBLEdBSUF0RyxTQUFBQyxPQUFBLE9BQUFpSCxRQUFBLGlCQUFBLGFBQUE5RyIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDcmVhdGVkIGJ5IE1pY2hpZWwgb24gMjUvMTEvMjAxNS5cbiAqL1xuKGZ1bmN0aW9uKCl7XG5cbiAgICB2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoXCJhcHBcIixbXSk7XG59KSgpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IE1pY2hpZWwgb24gMTEvMTIvMjAxNS5cclxuICovXHJcblxyXG4oZnVuY3Rpb24oKXtcclxuICAgIHZhciBzb2NrZXRDb250cm9sbGVyID0gZnVuY3Rpb24oJHNjb3BlLCBzb2NrZXRTZXJ2aWNlKXtcclxuXHJcbiAgICAgICAgLy9wcml2YXRlXHJcblxyXG4gICAgICAgIC8vZnVuY3Rpb25zXHJcbiAgICAgICAgdmFyIG1ha2VSb29tID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgc29ja2V0U2VydmljZS5lbWl0KFwicGNjb25uZWN0XCIsIG51bGwpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgJHNjb3BlLnJvb20gPSBcIlwiO1xyXG4gICAgICAgIHNvY2tldFNlcnZpY2Uub24oJ3JlcXVlc3RSb29tJyxmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICAgICAgJHNjb3BlLnJvb20gPSBkYXRhO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHNvY2tldFNlcnZpY2Uub24oJ2RldmljZU9yaWVudGF0aW9uJywgZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgICAgIHZhciB1c2VybmFtZSA9IGRhdGEudXNlcm5hbWU7XHJcbiAgICAgICAgICAgIHZhciBkZXZpY2VPcmllbnRhdGlvbiA9IHt9O1xyXG4gICAgICAgICAgICBkZXZpY2VPcmllbnRhdGlvbi5nYW1tYSA9IGRhdGEuZ2FtbWE7XHJcbiAgICAgICAgICAgIGRldmljZU9yaWVudGF0aW9uLmJldGEgPSBkYXRhLmJldGE7XHJcbiAgICAgICAgICAgIGRldmljZU9yaWVudGF0aW9uLmFscGhhID0gZGF0YS5hbHBoYTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkc2NvcGUudXNlcm5hbWVzID0ge307XHJcbiAgICAgICAgc29ja2V0U2VydmljZS5vbigndXBkYXRldXNlcnMnLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAkc2NvcGUudXNlcm5hbWVzID0gZGF0YTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIG1ha2VSb29tKCk7XHJcbiAgICAgICAgfSkoKTtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmNvbnRyb2xsZXIoXCJzb2NrZXRDb250cm9sbGVyXCIsIFtcIiRzY29wZVwiLCBcInNvY2tldFNlcnZpY2VcIiwgc29ja2V0Q29udHJvbGxlcl0pO1xyXG59KSgpOyIsIi8qXHJcbiAqIGFuZ3VsYXItcXJjb2RlIHY2LjEuM1xyXG4gKiAoYykgMjAxMyBNb25vc3BhY2VkIGh0dHA6Ly9tb25vc3BhY2VkLmNvbVxyXG4gKiBMaWNlbnNlOiBNSVRcclxuICovXHJcblxyXG5hbmd1bGFyLm1vZHVsZShcImFwcFwiKS5kaXJlY3RpdmUoJ3FyY29kZScsIFsnJHdpbmRvdycsIGZ1bmN0aW9uKCR3aW5kb3cpIHtcclxuXHJcbiAgICB2YXIgY2FudmFzMkQgPSAhISR3aW5kb3cuQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELFxyXG4gICAgICAgIGxldmVscyA9IHtcclxuICAgICAgICAgICAgJ0wnOiAnTG93JyxcclxuICAgICAgICAgICAgJ00nOiAnTWVkaXVtJyxcclxuICAgICAgICAgICAgJ1EnOiAnUXVhcnRpbGUnLFxyXG4gICAgICAgICAgICAnSCc6ICdIaWdoJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZHJhdyA9IGZ1bmN0aW9uKGNvbnRleHQsIHFyLCBtb2R1bGVzLCB0aWxlKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIHJvdyA9IDA7IHJvdyA8IG1vZHVsZXM7IHJvdysrKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBjb2wgPSAwOyBjb2wgPCBtb2R1bGVzOyBjb2wrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB3ID0gKE1hdGguY2VpbCgoY29sICsgMSkgKiB0aWxlKSAtIE1hdGguZmxvb3IoY29sICogdGlsZSkpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoID0gKE1hdGguY2VpbCgocm93ICsgMSkgKiB0aWxlKSAtIE1hdGguZmxvb3Iocm93ICogdGlsZSkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IHFyLmlzRGFyayhyb3csIGNvbCkgPyAnIzAwMCcgOiAnI2ZmZic7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5maWxsUmVjdChNYXRoLnJvdW5kKGNvbCAqIHRpbGUpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBNYXRoLnJvdW5kKHJvdyAqIHRpbGUpLCB3LCBoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICByZXN0cmljdDogJ0UnLFxyXG4gICAgICAgIHRlbXBsYXRlOiAnPGNhbnZhcyBjbGFzcz1cInFyY29kZVwiPjwvY2FudmFzPicsXHJcbiAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XHJcbiAgICAgICAgICAgIHZhciBkb21FbGVtZW50ID0gZWxlbWVudFswXSxcclxuICAgICAgICAgICAgICAgICRjYW52YXMgPSBlbGVtZW50LmZpbmQoJ2NhbnZhcycpLFxyXG4gICAgICAgICAgICAgICAgY2FudmFzID0gJGNhbnZhc1swXSxcclxuICAgICAgICAgICAgICAgIGNvbnRleHQgPSBjYW52YXMyRCA/IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpIDogbnVsbCxcclxuICAgICAgICAgICAgICAgIGRvd25sb2FkID0gJ2Rvd25sb2FkJyBpbiBhdHRycyxcclxuICAgICAgICAgICAgICAgIGhyZWYgPSBhdHRycy5ocmVmLFxyXG4gICAgICAgICAgICAgICAgbGluayA9IGRvd25sb2FkIHx8IGhyZWYgPyBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJykgOiAnJyxcclxuICAgICAgICAgICAgICAgIHRyaW0gPSAvXlxccyt8XFxzKyQvZyxcclxuICAgICAgICAgICAgICAgIGVycm9yLFxyXG4gICAgICAgICAgICAgICAgdmVyc2lvbixcclxuICAgICAgICAgICAgICAgIGVycm9yQ29ycmVjdGlvbkxldmVsLFxyXG4gICAgICAgICAgICAgICAgZGF0YSxcclxuICAgICAgICAgICAgICAgIHNpemUsXHJcbiAgICAgICAgICAgICAgICBtb2R1bGVzLFxyXG4gICAgICAgICAgICAgICAgdGlsZSxcclxuICAgICAgICAgICAgICAgIHFyLFxyXG4gICAgICAgICAgICAgICAgJGltZyxcclxuICAgICAgICAgICAgICAgIHNldFZlcnNpb24gPSBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZlcnNpb24gPSBNYXRoLm1heCgxLCBNYXRoLm1pbihwYXJzZUludCh2YWx1ZSwgMTApLCAxMCkpIHx8IDQ7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc2V0RXJyb3JDb3JyZWN0aW9uTGV2ZWwgPSBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yQ29ycmVjdGlvbkxldmVsID0gdmFsdWUgaW4gbGV2ZWxzID8gdmFsdWUgOiAnTSc7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc2V0RGF0YSA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBkYXRhID0gdmFsdWUucmVwbGFjZSh0cmltLCAnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcXIgPSBxcmNvZGUodmVyc2lvbiwgZXJyb3JDb3JyZWN0aW9uTGV2ZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHFyLmFkZERhdGEoZGF0YSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHFyLm1ha2UoKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IgPSBlLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgbW9kdWxlcyA9IHFyLmdldE1vZHVsZUNvdW50KCk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc2V0U2l6ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2l6ZSA9IHBhcnNlSW50KHZhbHVlLCAxMCkgfHwgbW9kdWxlcyAqIDI7XHJcbiAgICAgICAgICAgICAgICAgICAgdGlsZSA9IHNpemUgLyBtb2R1bGVzO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IGNhbnZhcy5oZWlnaHQgPSBzaXplO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHJlbmRlciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghcXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaW5rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5rLnJlbW92ZUF0dHJpYnV0ZSgnZG93bmxvYWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmsudGl0bGUgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmsuaHJlZiA9ICcjXyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjYW52YXMyRCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9tRWxlbWVudC5pbm5lckhUTUwgPSAnPGltZyBzcmMgd2lkdGg9XCInICsgc2l6ZSArICdcIicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdoZWlnaHQ9XCInICsgc2l6ZSArICdcIicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjbGFzcz1cInFyY29kZVwiPic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuJGVtaXQoJ3FyY29kZTplcnJvcicsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRvd25sb2FkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvbUVsZW1lbnQuZG93bmxvYWQgPSAncXJjb2RlLnBuZyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvbUVsZW1lbnQudGl0bGUgPSAnRG93bmxvYWQgUVIgY29kZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2FudmFzMkQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHJhdyhjb250ZXh0LCBxciwgbW9kdWxlcywgdGlsZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZG93bmxvYWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvbUVsZW1lbnQuaHJlZiA9IGNhbnZhcy50b0RhdGFVUkwoJ2ltYWdlL3BuZycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9tRWxlbWVudC5pbm5lckhUTUwgPSBxci5jcmVhdGVJbWdUYWcodGlsZSwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRpbWcgPSBlbGVtZW50LmZpbmQoJ2ltZycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkaW1nLmFkZENsYXNzKCdxcmNvZGUnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkb3dubG9hZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9tRWxlbWVudC5ocmVmID0gJGltZ1swXS5zcmM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChocmVmKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvbUVsZW1lbnQuaHJlZiA9IGhyZWY7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGlmIChsaW5rKSB7XHJcbiAgICAgICAgICAgICAgICBsaW5rLmNsYXNzTmFtZSA9ICdxcmNvZGUtbGluayc7XHJcbiAgICAgICAgICAgICAgICAkY2FudmFzLndyYXAobGluayk7XHJcbiAgICAgICAgICAgICAgICBkb21FbGVtZW50ID0gZG9tRWxlbWVudC5maXJzdENoaWxkO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzZXRWZXJzaW9uKGF0dHJzLnZlcnNpb24pO1xyXG4gICAgICAgICAgICBzZXRFcnJvckNvcnJlY3Rpb25MZXZlbChhdHRycy5lcnJvckNvcnJlY3Rpb25MZXZlbCk7XHJcbiAgICAgICAgICAgIHNldFNpemUoYXR0cnMuc2l6ZSk7XHJcblxyXG4gICAgICAgICAgICBhdHRycy4kb2JzZXJ2ZSgndmVyc2lvbicsIGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHNldFZlcnNpb24odmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgc2V0RGF0YShkYXRhKTtcclxuICAgICAgICAgICAgICAgIHNldFNpemUoc2l6ZSk7XHJcbiAgICAgICAgICAgICAgICByZW5kZXIoKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBhdHRycy4kb2JzZXJ2ZSgnZXJyb3JDb3JyZWN0aW9uTGV2ZWwnLCBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBzZXRFcnJvckNvcnJlY3Rpb25MZXZlbCh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICBzZXREYXRhKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgc2V0U2l6ZShzaXplKTtcclxuICAgICAgICAgICAgICAgIHJlbmRlcigpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGF0dHJzLiRvYnNlcnZlKCdkYXRhJywgZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGlmICghdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgc2V0RGF0YSh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICBzZXRTaXplKHNpemUpO1xyXG4gICAgICAgICAgICAgICAgcmVuZGVyKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgYXR0cnMuJG9ic2VydmUoJ3NpemUnLCBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBzZXRTaXplKHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIHJlbmRlcigpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGF0dHJzLiRvYnNlcnZlKCdocmVmJywgZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGlmICghdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaHJlZiA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgcmVuZGVyKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1dKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBqdXN0aWpuZGVwb3ZlciBvbiAwOS8xMi8xNS5cclxuICovXHJcblxyXG52YXIgU3BhY2VzaGlwID0gZnVuY3Rpb24oZ2FtZXJJZCwgeCwgeSl7XHJcbiAgICB0aGlzLm9yaWVudGF0aW9uID0gMDtcclxuICAgIHRoaXMuZ2FtZXJJZCA9IGdhbWVySWQ7XHJcbiAgICB0aGlzLnggPSB4O1xyXG4gICAgdGhpcy55ID0geTtcclxufTtcclxuXHJcblNwYWNlc2hpcC5wcm90b3R5cGUubW92ZVNwYWNlc2hpcCA9IGZ1bmN0aW9uKHgsIHkpe1xyXG4gICAgLy9tb3ZlIHRoZSBzcGFjZXNoaXAgb24gdGhlIGNhbnZhc1xyXG5cclxufTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBqdXN0aWpuZGVwb3ZlciBvbiAwOS8xMi8xNS5cclxuICovXHJcblxyXG4oZnVuY3Rpb24oKXtcclxuXHJcbiAgICB2YXIgc29ja2V0U2VydmljZSA9IGZ1bmN0aW9uKCRyb290U2NvcGUpe1xyXG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xyXG4gICAgICAgIC8vcHJpdmF0ZVxyXG4gICAgICAgIHZhciBzb2NrZXQgPSBpby5jb25uZWN0KHdpbmRvdy5sb2NhdGlvbi5ob3N0KTtcclxuICAgICAgICAvL2Z1bmN0aW9uc1xyXG4gICAgICAgIHZhciBvbiA9IGZ1bmN0aW9uIChldmVudE5hbWUsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIHNvY2tldC5vbihldmVudE5hbWUsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xyXG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KHNvY2tldCwgYXJncyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGVtaXQgPSBmdW5jdGlvbiAoZXZlbnROYW1lLCBkYXRhLCBjYWxsYmFjaykge1xyXG4gICAgICAgICAgICBzb2NrZXQuZW1pdChldmVudE5hbWUsIGRhdGEsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xyXG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5hcHBseShzb2NrZXQsIGFyZ3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vcHVibGljXHJcbiAgICAgICAgcmV0dXJue1xyXG4gICAgICAgICAgICBvbjogb24sXHJcbiAgICAgICAgICAgIGVtaXQ6IGVtaXQsXHJcbiAgICAgICAgICAgIHNvY2tldDogc29ja2V0XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5mYWN0b3J5KFwic29ja2V0U2VydmljZVwiLCBbXCIkcm9vdFNjb3BlXCIsIHNvY2tldFNlcnZpY2VdKTtcclxuXHJcbn0pKCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
