!function(){angular.module("app",[])}(),function(){var t=function(t,e,a,i){t.LCShow=a.getLCShow;var o=function(){e.emit("pcconnect",null)};t.room="",e.on("requestRoom",function(e){t.room=e}),e.on("deviceOrientation",function(t){var e=(t.username,{});e.gamma=t.gamma,e.beta=t.beta,e.alpha=t.alpha}),t.usernames={},t.checkUserCount=!1,e.on("updateusers",function(e){i.setPlayers(e),t.usernames=e,t.checkUserCount=Object.keys(t.usernames).length<0}),t.startGame=function(){e.emit("startGame",null),a.setLCShow(!1),a.setPCShow(!0)},function(){o()}()};angular.module("app").controller("loginController",["$scope","socketService","displayService","playerService",t])}(),function(){"use strict";var t=function(t,e,a,i,o,r){function n(t,e){return e.username==t.userName}function s(){u.length>0,p.clearRect(0,0,d.width,d.height);var t=d.width/100;if(0!=f.length){var e=d.width/100,a=e*f[0].image.height/f[0].image.width;for(var i in f){var o=f[i];o.width=e,o.height=a,0==o.explodeStage?(p.save(),p.translate(o.x*t,o.y*t),p.rotate(o.rotation/180*Math.PI),p.drawImage(o.image,-e/2,-a/2,e,a),p.restore(),f[i].x=Math.cos((o.rotation-90)/180*Math.PI)+o.x,f[i].y=Math.sin((o.rotation-90)/180*Math.PI)+o.y):o.explodeStage<4&&(console.log(o.explosionImage),p.save(),p.translate(o.x*t,o.y*t),p.drawImage(o.explosionImage,-e,-e,2*e,2*e),p.restore())}}if(0!=u.length){var r=d.width/20,n=r*u[0].image.height/u[0].image.width;for(var s in u){var c=u[s];c.width=r,c.height=n,p.save(),p.translate(c.x*t,c.y*t),p.rotate(c.rotation/180*Math.PI),p.drawImage(c.image,-r/2,-n/2,r,n),c.damage>0&&p.drawImage(c.damageImage,-r/2,-n/2,r,n),p.restore(),u[s].x=Math.cos((c.rotation-90)/180*Math.PI)/10*c.speed+c.x,u[s].y=Math.sin((c.rotation-90)/180*Math.PI)/10*c.speed+c.y}}if(y.length>0)for(var g in y){var m=y[g];if(m.width=d.width/1500*m.image.width,m.height=m.width*m.image.height/m.image.width,p.save(),p.translate(m.x*t,m.y*t),p.rotate(m.rotation/180*Math.PI),p.drawImage(m.image,-m.width/2,-m.height/2,m.width,m.height),p.restore(),m.x<-5||m.x>105||m.y<-5||m.y>105){var v=Math.random();.25>v?(y[g].x=-4,y[g].y=Math.floor(100*Math.random()),y[g].rotation=Math.floor(180*Math.random()),y[g].setImage(Math.ceil(20*Math.random()))):.5>v?(y[g].x=Math.floor(100*Math.random()),y[g].y=-4,y[g].rotation=Math.floor(180*Math.random())+90,y[g].setImage(Math.ceil(20*Math.random()))):.75>v?(y[g].x=104,y[g].y=Math.floor(100*Math.random()),y[g].rotation=Math.floor(180*Math.random())+180,y[g].setImage(Math.ceil(20*Math.random()))):(y[g].x=Math.floor(100*Math.random()),y[g].y=104,y[g].rotation=Math.floor(180*Math.random())+270,y[g].setImage(Math.ceil(20*Math.random())))}else y[g].x=Math.cos((m.rotation-90)/180*Math.PI)/30+m.x,y[g].y=Math.sin((m.rotation-90)/180*Math.PI)/30+m.y}h(),l()}function h(){for(var t in f)f[t].x<0||f[t].x>d.width||f[t].y<0||f[t].y>d.height?f.splice(t,1):f[t].explodeStage>0&&(f[t].explodeStage<4?f[t].explode():f.splice(t,1))}function l(){var t=[];for(var e in u){u[e].damage<4&&t.push(u[e]);for(var a in f)if(0==f[a].explodeStage&&f[a].player!=u[e].userName){var o=Math.sqrt(2)/2*(f[a].height/2-f[a].width/2),r=(360-f[a].rotation)/180*Math.PI,n=f[a].x*d.width/100-o*Math.sin(r),s=f[a].y*d.width/100-o*Math.cos(r),h=u[e].x*d.width/100,l=u[e].y*d.width/100,g=Math.sqrt((n-h)*(n-h)+(s-l)*(s-l));if(g<f[a].width/2+u[e].width/2){var m=new Audio("../../assets/Bonus/sfx_lose.ogg");m.play(),u[e].increaseDamage();var p={};p.username=u[e].userName,p.life=3-u[e].damage,i.emit("playerLife",p),f[a].explode()}}for(var v in y){var w=y[v].x*d.width/100,x=y[v].y*d.width/100,h=u[e].x*d.width/100,l=u[e].y*d.width/100,g=Math.sqrt((w-h)*(w-h)+(x-l)*(x-l));if(g<y[v].width/2+u[e].width/2){var m=new Audio("../../assets/Bonus/sfx_lose.ogg");m.play(),u[e].increaseDamage();var p={};p.username=u[e].userName,p.life=3-u[e].damage,i.emit("playerLife",p),f[a].explode()}}}1==t.length&&c(t)}function c(a){angular.isDefined(m)&&(e.cancel(m),m=void 0),t.endGame=!0,t.endGameText=a[0].userName+" is the winner!",i.emit("endGame",a[0].userName)}var g=[{x:10,y:10,rotation:135},{x:90,y:10,rotation:225},{x:90,y:90,rotation:315},{x:10,y:90,rotation:45}];t.PCShow=o.getPCShow,t.endGame=!1;var m,d=document.getElementById("game"),p=d.getContext("2d"),u=new Array,f=new Array,y=new Array;i.on("initGame",function(){var t=r.getPlayers(),a=0;for(var i in t){var o=t[i];u.push(new Spaceship(o.username,g[a].x,g[a].y,o.color,g[a].rotation)),a++}for(var n=0;10>n;n++)y.push(new Asteroid(Math.floor(100*Math.random()),Math.floor(100*Math.random()),Math.floor(361*Math.random()),Math.ceil(20*Math.random())));m=e(s,10)}),i.on("userleft",function(t){var e=null;for(var a in u)1==n(u[a],t)&&(e=a);u.splice(e,1)}),i.on("updateGameData",function(t){var e=null;for(var a in u)1==n(u[a],t)&&(e=a);null!=e&&u[e].rotateSpaceshipRelative(t.orientation)}),i.on("playerShot",function(e){if(0==t.endGame){var a=null;for(var i in u)1==n(u[i],e)&&(a=i);if(null!=a){var o=u[a],r=(360-(o.rotation+180))/180*Math.PI,s=o.x+d.width/400*Math.sin(r),h=o.y+d.width/400*Math.cos(r);f.push(new Bullet(s,h,o.rotation,o.color,o.userName));var l="../../assets/Bonus/sfx_laser2.ogg";a%2==0&&(l="../../assets/Bonus/sfx_laser1.ogg");var c=new Audio(l);c.play()}}}),t.restartGame=function(){t.endGame=!1;var a=0;for(var o in u)u[o].reset(g[a].x,g[a].y,g[a].rotation),a++;p.clearRect(0,0,d.width,d.height),i.emit("restartGame",null),m=e(s,10)}};angular.module("app").controller("playController",["$scope","$interval","$window","socketService","displayService","playerService",t])}(),function(){var t=function(t){function e(e,a,i){t.innerWidth<t.innerHeight?e.width=t.innerWidth-20:e.width=t.innerHeight-20,angular.element(t).bind("resize",function(){t.innerWidth<t.innerHeight?e.width=t.innerWidth-20:e.width=t.innerHeight-20,e.$digest()})}return{restrict:"E",link:e,replace:!0,template:'<canvas id="game" class="playArea" width="{{width}}" height="{{width}}" />'}};angular.module("app").directive("canvasDirective",["$window",t])}();var Asteroid=function(t,e,a,i){this.x=t,this.y=e,this.width=0,this.height=0,this.rotation=a,this.stage=i,this.image=new Image,this.image.src="../assets/PNG/Meteors/meteor_"+i+".png"};Asteroid.prototype.setImage=function(t){this.stage=t,this.image.src="../assets/PNG/Meteors/meteor_"+t+".png"};var Bullet=function(t,e,a,i,o){this.x=t,this.y=e,this.rotation=a,this.image=new Image,this.color=i,this.width=0,this.height=0,this.player=o,this.explosionImage=new Image,this.explodeStage=0,"orange"==this.color&&(this.color="red"),this.image.src="../assets/PNG/Lasers/laser"+this.color.charAt(0).toUpperCase()+this.color.slice(1)+"01.png"};Bullet.prototype.explode=function(){if(this.explodeStage<4){this.explodeStage++;var t;t=this.explodeStage<3?1:2,this.explosionImage.src="../assets/PNG/Lasers/laser"+this.color.charAt(0).toUpperCase()+this.color.slice(1)+"Explode"+t+".png"}else this.explosionImage.src=""};var Spaceship=function(t,e,a,i,o){this.userName=t,this.x=e,this.y=a,this.speed=1,this.color=i,this.rotation=o,this.image=new Image,this.damage=0,this.width=0,this.height=0,this.damageImage=new Image,this.image.src="../assets/PNG/playerShip1_"+this.color+".png"};Spaceship.prototype.reset=function(t,e,a){this.speed=1,this.damage=0,this.damageImage=new Image,this.image.src="../assets/PNG/playerShip1_"+this.color+".png",this.x=t,this.y=e,this.rotation=a},Spaceship.prototype.moveSpaceship=function(t,e){this.x=t,this.y=e},Spaceship.prototype.moveSpaceshipRelative=function(t,e){this.x=this.x+t,this.y=this.y+e},Spaceship.prototype.rotateSpaceship=function(t){this.rotation=t},Spaceship.prototype.rotateSpaceshipRelative=function(t){this.rotation=this.rotation+t/5,this.rotation<-360&&(this.rotation=this.rotation+720),this.rotation>360&&(this.rotation=this.rotation-720)},Spaceship.prototype.increaseDamage=function(){this.damage<4&&(this.damage+=1),this.damage<=3&&this.damage>0?this.damageImage.src="../assets/PNG/Damage/playerShip1_damage"+this.damage+".png":4==this.damage&&(this.damageImage.src="../assets/PNG/Damage/explode.gif")},Spaceship.prototype.decreaseDamage=function(){this.damage>0&&(this.damage-=1),this.damage<=3&&this.damage>0&&(this.damageImage.src="../assets/PNG/Damage/playerShip1_damage"+this.damage+".png")},function(){var t=function(){var t=!0,e=!1;return{getLCShow:function(){return t},setLCShow:function(e){t=e},getPCShow:function(){return e},setPCShow:function(t){e=t}}};angular.module("app").factory("displayService",[t])}(),function(){var t=function(){var t=[];return{getPlayers:function(){return t},setPlayers:function(e){t=e}}};angular.module("app").factory("playerService",[t])}(),function(){var t=function(t){"use strict";var e=io.connect(window.location.host),a=function(a,i){e.on(a,function(){var a=arguments;t.$apply(function(){i.apply(e,a)})})},i=function(a,i,o){e.emit(a,i,function(){var a=arguments;t.$apply(function(){o&&o.apply(e,a)})})};return{on:a,emit:i,socket:e}};angular.module("app").factory("socketService",["$rootScope",t])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNvbnRyb2xsZXIvbG9naW5Db250cm9sbGVyLmpzIiwiY29udHJvbGxlci9wbGF5Q29udHJvbGxlci5qcyIsImRpcmVjdGl2ZXMvY2FudmFzRGlyZWN0aXZlLmpzIiwibW9kZWxzL0FzdGVyaW9kLmpzIiwibW9kZWxzL0J1bGxldC5qcyIsIm1vZGVscy9TcGFjZXNoaXAuanMiLCJzZXJ2aWNlcy9kaXNwbGF5U2VydmljZS5qcyIsInNlcnZpY2VzL3BsYXllclNlcnZpY2UuanMiLCJzZXJ2aWNlcy9zb2NrZXRTZXJ2aWNlLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJsb2dpbkNvbnRyb2xsZXIiLCIkc2NvcGUiLCJzb2NrZXRTZXJ2aWNlIiwiZGlzcGxheVNlcnZpY2UiLCJwbGF5ZXJTZXJ2aWNlIiwiTENTaG93IiwiZ2V0TENTaG93IiwibWFrZVJvb20iLCJlbWl0Iiwicm9vbSIsIm9uIiwiZGF0YSIsImRldmljZU9yaWVudGF0aW9uIiwidXNlcm5hbWUiLCJnYW1tYSIsImJldGEiLCJhbHBoYSIsInVzZXJuYW1lcyIsImNoZWNrVXNlckNvdW50Iiwic2V0UGxheWVycyIsIk9iamVjdCIsImtleXMiLCJsZW5ndGgiLCJzdGFydEdhbWUiLCJzZXRMQ1Nob3ciLCJzZXRQQ1Nob3ciLCJjb250cm9sbGVyIiwicGxheUNvbnRyb2xsZXIiLCIkaW50ZXJ2YWwiLCIkd2luZG93IiwiZmlsdGVyUGxheWVycyIsIm9iaiIsInVzZXJOYW1lIiwiZHJhdyIsIkFsbFBsYXllcnMiLCJjdHgiLCJjbGVhclJlY3QiLCJjYW52Iiwid2lkdGgiLCJoZWlnaHQiLCJyYXRpbyIsIkFsbEJ1bGxldHMiLCJCdWxsZXRXaWR0aCIsIkJ1bGxldEhlaWdodCIsImltYWdlIiwiYnVsbGV0IiwiYiIsImV4cGxvZGVTdGFnZSIsInNhdmUiLCJ0cmFuc2xhdGUiLCJ4IiwieSIsInJvdGF0ZSIsInJvdGF0aW9uIiwiTWF0aCIsIlBJIiwiZHJhd0ltYWdlIiwicmVzdG9yZSIsImNvcyIsInNpbiIsImNvbnNvbGUiLCJsb2ciLCJleHBsb3Npb25JbWFnZSIsIlNwYWNlc2hpcFdpZHRoIiwiU3BhY2VzaGlwSGVpZ2h0IiwicGxheWVyIiwicCIsImRhbWFnZSIsImRhbWFnZUltYWdlIiwic3BlZWQiLCJBbGxBc3Rlcm9pZHMiLCJBc3Rlcm9pZCIsImEiLCJrZXV6ZSIsInJhbmRvbSIsImZsb29yIiwic2V0SW1hZ2UiLCJjZWlsIiwiY2hlY2tCdWxsZXRzIiwiY29sbGlzaW9uRGV0ZWN0aW9uIiwic3BsaWNlIiwiZXhwbG9kZSIsImxpdmluZ1BsYXllcnMiLCJwdXNoIiwicmFkaXVzIiwic3FydCIsImFuZ2xlIiwiYnVsbGV0SGVhZFgiLCJidWxsZXRIZWFkWSIsInNwYWNlU2hpcFgiLCJzcGFjZVNoaXBZIiwiZGlzdGFuY2UiLCJkYW1hZ2Vzb3VuZCIsIkF1ZGlvIiwicGxheSIsImluY3JlYXNlRGFtYWdlIiwibGlmZSIsImFzdGVyb2lkWCIsImFzdGVyb2lkWSIsImVuZEdhbWUiLCJpc0RlZmluZWQiLCJjeWNsZSIsImNhbmNlbCIsInVuZGVmaW5lZCIsImVuZEdhbWVUZXh0IiwiZGVmYXVsdFZhcnMiLCJQQ1Nob3ciLCJnZXRQQ1Nob3ciLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiZ2V0Q29udGV4dCIsIkFycmF5IiwiQnVmZmVyUGxheWVyIiwiZ2V0UGxheWVycyIsInRlbGxlciIsIlNwYWNlc2hpcCIsImNvbG9yIiwiaSIsInJvdGF0ZVNwYWNlc2hpcFJlbGF0aXZlIiwib3JpZW50YXRpb24iLCJ0ZW1wIiwiQnVsbGV0IiwiYXVkaW9VcmwiLCJzaG90IiwicmVzdGFydEdhbWUiLCJyZXNldCIsImNhbnZhc0RpcmVjdGl2ZSIsImxpbmsiLCJzY29wZSIsImVsZW1lbnQiLCJhdHRycyIsImlubmVyV2lkdGgiLCJpbm5lckhlaWdodCIsImJpbmQiLCIkZGlnZXN0IiwicmVzdHJpY3QiLCJyZXBsYWNlIiwidGVtcGxhdGUiLCJkaXJlY3RpdmUiLCJzdGFnZSIsInRoaXMiLCJJbWFnZSIsInNyYyIsInByb3RvdHlwZSIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwic2xpY2UiLCJudW1iZXIiLCJtb3ZlU3BhY2VzaGlwIiwibW92ZVNwYWNlc2hpcFJlbGF0aXZlIiwicm90YXRlU3BhY2VzaGlwIiwiZGVncmVlIiwiZGVjcmVhc2VEYW1hZ2UiLCJ2YWx1ZSIsImZhY3RvcnkiLCJwbGF5ZXJzIiwicGxheWVyc0FycmF5IiwiJHJvb3RTY29wZSIsInNvY2tldCIsImlvIiwiY29ubmVjdCIsIndpbmRvdyIsImxvY2F0aW9uIiwiaG9zdCIsImV2ZW50TmFtZSIsImNhbGxiYWNrIiwiYXJncyIsImFyZ3VtZW50cyIsIiRhcHBseSIsImFwcGx5Il0sIm1hcHBpbmdzIjoiQ0FHQSxXQUVBQSxRQUFBQyxPQUFBLGFDREEsV0FDQSxHQUFBQyxHQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBRUFILEVBQUFJLE9BQUFGLEVBQUFHLFNBR0EsSUFBQUMsR0FBQSxXQUNBTCxFQUFBTSxLQUFBLFlBQUEsTUFFQVAsR0FBQVEsS0FBQSxHQUNBUCxFQUFBUSxHQUFBLGNBQUEsU0FBQUMsR0FDQVYsRUFBQVEsS0FBQUUsSUFFQVQsRUFBQVEsR0FBQSxvQkFBQSxTQUFBQyxHQUNBLEdBQ0FDLElBREFELEVBQUFFLFlBRUFELEdBQUFFLE1BQUFILEVBQUFHLE1BQ0FGLEVBQUFHLEtBQUFKLEVBQUFJLEtBQ0FILEVBQUFJLE1BQUFMLEVBQUFLLFFBRUFmLEVBQUFnQixhQUNBaEIsRUFBQWlCLGdCQUFBLEVBQ0FoQixFQUFBUSxHQUFBLGNBQUEsU0FBQUMsR0FDQVAsRUFBQWUsV0FBQVIsR0FDQVYsRUFBQWdCLFVBQUFOLEVBQ0FWLEVBQUFpQixlQUFBRSxPQUFBQyxLQUFBcEIsRUFBQWdCLFdBQUFLLE9BQUEsSUFHQXJCLEVBQUFzQixVQUFBLFdBQ0FyQixFQUFBTSxLQUFBLFlBQUEsTUFDQUwsRUFBQXFCLFdBQUEsR0FDQXJCLEVBQUFzQixXQUFBLElBSUEsV0FDQWxCLE9BS0FU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RUEsSUFBQUMsR0FBQUMsR0FBQUMsUUFBQUMsT0FBQUMsU0FBQUMsTUFFQXpKLEVBQUEsU0FBQTBKLEVBQUFDLEdBQ0FQLEVBQUFwSixHQUFBMEosRUFBQSxXQUNBLEdBQUFFLEdBQUFDLFNBQ0FWLEdBQUFXLE9BQUEsV0FDQUgsRUFBQUksTUFBQVgsRUFBQVEsUUFLQTlKLEVBQUEsU0FBQTRKLEVBQUF6SixFQUFBMEosR0FDQVAsRUFBQXRKLEtBQUE0SixFQUFBekosRUFBQSxXQUNBLEdBQUEySixHQUFBQyxTQUNBVixHQUFBVyxPQUFBLFdBQ0FILEdBQ0FBLEVBQUFJLE1BQUFYLEVBQUFRLE9BT0EsUUFDQTVKLEdBQUFBLEVBQ0FGLEtBQUFBLEVBQ0FzSixPQUFBQSxHQUlBaEssU0FBQUMsT0FBQSxPQUFBMkosUUFBQSxpQkFBQSxhQUFBeEoiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ3JlYXRlZCBieSBNaWNoaWVsIG9uIDI1LzExLzIwMTUuXG4gKi9cbihmdW5jdGlvbigpe1xuXG4gICAgdmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIsW10pO1xufSkoKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgTWljaGllbCBvbiAxMS8xMi8yMDE1LlxuICovXG5cbihmdW5jdGlvbigpe1xuICAgIHZhciBsb2dpbkNvbnRyb2xsZXIgPSBmdW5jdGlvbigkc2NvcGUsIHNvY2tldFNlcnZpY2UsIGRpc3BsYXlTZXJ2aWNlLCBwbGF5ZXJTZXJ2aWNlKXtcblxuICAgICAgICAkc2NvcGUuTENTaG93ID0gZGlzcGxheVNlcnZpY2UuZ2V0TENTaG93O1xuXG4gICAgICAgIC8vZnVuY3Rpb25zXG4gICAgICAgIHZhciBtYWtlUm9vbSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBzb2NrZXRTZXJ2aWNlLmVtaXQoXCJwY2Nvbm5lY3RcIiwgbnVsbCk7XG4gICAgICAgIH07XG4gICAgICAgICRzY29wZS5yb29tID0gXCJcIjtcbiAgICAgICAgc29ja2V0U2VydmljZS5vbigncmVxdWVzdFJvb20nLGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgJHNjb3BlLnJvb20gPSBkYXRhO1xuICAgICAgICB9KTtcbiAgICAgICAgc29ja2V0U2VydmljZS5vbignZGV2aWNlT3JpZW50YXRpb24nLCBmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgIHZhciB1c2VybmFtZSA9IGRhdGEudXNlcm5hbWU7XG4gICAgICAgICAgICB2YXIgZGV2aWNlT3JpZW50YXRpb24gPSB7fTtcbiAgICAgICAgICAgIGRldmljZU9yaWVudGF0aW9uLmdhbW1hID0gZGF0YS5nYW1tYTtcbiAgICAgICAgICAgIGRldmljZU9yaWVudGF0aW9uLmJldGEgPSBkYXRhLmJldGE7XG4gICAgICAgICAgICBkZXZpY2VPcmllbnRhdGlvbi5hbHBoYSA9IGRhdGEuYWxwaGE7XG4gICAgICAgIH0pO1xuICAgICAgICAkc2NvcGUudXNlcm5hbWVzID0ge307XG4gICAgICAgICRzY29wZS5jaGVja1VzZXJDb3VudCA9IGZhbHNlO1xuICAgICAgICBzb2NrZXRTZXJ2aWNlLm9uKCd1cGRhdGV1c2VycycsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBwbGF5ZXJTZXJ2aWNlLnNldFBsYXllcnMoZGF0YSk7XG4gICAgICAgICAgICAkc2NvcGUudXNlcm5hbWVzID0gZGF0YTtcbiAgICAgICAgICAgICRzY29wZS5jaGVja1VzZXJDb3VudCA9IE9iamVjdC5rZXlzKCRzY29wZS51c2VybmFtZXMpLmxlbmd0aCA8IDA7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICRzY29wZS5zdGFydEdhbWU9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNvY2tldFNlcnZpY2UuZW1pdChcInN0YXJ0R2FtZVwiLCBudWxsKTtcbiAgICAgICAgICAgIGRpc3BsYXlTZXJ2aWNlLnNldExDU2hvdyhmYWxzZSk7XG4gICAgICAgICAgICBkaXNwbGF5U2VydmljZS5zZXRQQ1Nob3codHJ1ZSk7XG4gICAgICAgIH07XG5cblxuICAgICAgICAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBtYWtlUm9vbSgpO1xuICAgICAgICB9KSgpO1xuXG4gICAgfTtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmNvbnRyb2xsZXIoXCJsb2dpbkNvbnRyb2xsZXJcIiwgW1wiJHNjb3BlXCIsIFwic29ja2V0U2VydmljZVwiICwgXCJkaXNwbGF5U2VydmljZVwiLCBcInBsYXllclNlcnZpY2VcIiwgbG9naW5Db250cm9sbGVyXSk7XG59KSgpOyIsIi8qKlxuICogQ3JlYXRlZCBieSBNaWNoaWVsIG9uIDE2LzEyLzIwMTUuXG4gKi9cblxuKGZ1bmN0aW9uKCl7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgdmFyIHBsYXlDb250cm9sbGVyID0gZnVuY3Rpb24oJHNjb3BlLCAkaW50ZXJ2YWwsICR3aW5kb3csIHNvY2tldFNlcnZpY2UsIGRpc3BsYXlTZXJ2aWNlLCBwbGF5ZXJTZXJ2aWNlKXtcbiAgICAgICAgdmFyIGRlZmF1bHRWYXJzID0gW3t4OjEwLCB5OjEwLHJvdGF0aW9uOjEzNX0se3g6OTAsIHk6MTAscm90YXRpb246MjI1fSx7eDo5MCwgeTo5MCxyb3RhdGlvbjozMTV9LHt4OjEwLCB5OjkwLHJvdGF0aW9uOjQ1fV07XG4gICAgICAgICRzY29wZS5QQ1Nob3cgPSBkaXNwbGF5U2VydmljZS5nZXRQQ1Nob3c7XG4gICAgICAgICRzY29wZS5lbmRHYW1lID0gZmFsc2U7XG4gICAgICAgIHZhciBjYW52ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWUnKTtcbiAgICAgICAgdmFyIGN0eCA9IGNhbnYuZ2V0Q29udGV4dCgnMmQnKTtcblxuICAgICAgICB2YXIgQWxsUGxheWVycyA9IG5ldyBBcnJheSgpO1xuICAgICAgICB2YXIgQWxsQnVsbGV0cyA9IG5ldyBBcnJheSgpO1xuICAgICAgICB2YXIgQWxsQXN0ZXJvaWRzID0gbmV3IEFycmF5KCk7XG5cbiAgICAgICAgdmFyIGN5Y2xlO1xuXG4gICAgICAgIHNvY2tldFNlcnZpY2Uub24oXCJpbml0R2FtZVwiLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgdmFyIEJ1ZmZlclBsYXllciA9IHBsYXllclNlcnZpY2UuZ2V0UGxheWVycygpO1xuICAgICAgICAgICAgdmFyIHRlbGxlcj0gMDtcbiAgICAgICAgICAgIGZvcih2YXIgcGxheWVyIGluIEJ1ZmZlclBsYXllcil7XG4gICAgICAgICAgICAgICAgdmFyIHAgPSBCdWZmZXJQbGF5ZXJbcGxheWVyXTtcbiAgICAgICAgICAgICAgICBBbGxQbGF5ZXJzLnB1c2gobmV3IFNwYWNlc2hpcChwLnVzZXJuYW1lLCBkZWZhdWx0VmFyc1t0ZWxsZXJdLngsIGRlZmF1bHRWYXJzW3RlbGxlcl0ueSwgcC5jb2xvciwgZGVmYXVsdFZhcnNbdGVsbGVyXS5yb3RhdGlvbikpO1xuICAgICAgICAgICAgICAgIHRlbGxlcisrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpPDEwOyBpKyspe1xuICAgICAgICAgICAgICAgIEFsbEFzdGVyb2lkcy5wdXNoKG5ldyBBc3Rlcm9pZChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMTAwKSwgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjEwMCksIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSozNjEpLCBNYXRoLmNlaWwoTWF0aC5yYW5kb20oKSoyMCkpKTtcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICBjeWNsZSA9ICRpbnRlcnZhbChkcmF3LCAxMCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHNvY2tldFNlcnZpY2Uub24oXCJ1c2VybGVmdFwiLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgdmFyIHAgPSBudWxsO1xuICAgICAgICAgICAgZm9yKHZhciBpIGluIEFsbFBsYXllcnMpe1xuICAgICAgICAgICAgICAgIGlmKGZpbHRlclBsYXllcnMoQWxsUGxheWVyc1tpXSxkYXRhKSA9PSB0cnVlKXtcbiAgICAgICAgICAgICAgICAgICAgcCA9IGk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgQWxsUGxheWVycy5zcGxpY2UocCwxKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgc29ja2V0U2VydmljZS5vbihcInVwZGF0ZUdhbWVEYXRhXCIsIGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgdmFyIHAgPSBudWxsO1xuICAgICAgICAgICAgZm9yKHZhciBpIGluIEFsbFBsYXllcnMpe1xuICAgICAgICAgICAgICAgIGlmKGZpbHRlclBsYXllcnMoQWxsUGxheWVyc1tpXSxkYXRhKSA9PSB0cnVlKXtcbiAgICAgICAgICAgICAgICAgICAgcCA9IGk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYocCAhPSBudWxsKXtcbiAgICAgICAgICAgICAgICBBbGxQbGF5ZXJzW3BdLnJvdGF0ZVNwYWNlc2hpcFJlbGF0aXZlKGRhdGEub3JpZW50YXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBzb2NrZXRTZXJ2aWNlLm9uKFwicGxheWVyU2hvdFwiLCBmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgIGlmKCRzY29wZS5lbmRHYW1lPT1mYWxzZSkge1xuICAgICAgICAgICAgICAgIHZhciBwID0gbnVsbDtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpIGluIEFsbFBsYXllcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbHRlclBsYXllcnMoQWxsUGxheWVyc1tpXSwgZGF0YSkgPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcCA9IGk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHAgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IEFsbFBsYXllcnNbcF07XG4gICAgICAgICAgICAgICAgICAgIHZhciBhbmdsZSA9ICgzNjAgLSAodGVtcC5yb3RhdGlvbiArIDE4MCkpIC8gMTgwICogTWF0aC5QSTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHggPSB0ZW1wLnggKyAoY2Fudi53aWR0aCAvIDQwMCAqIE1hdGguc2luKGFuZ2xlKSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB5ID0gdGVtcC55ICsgKGNhbnYud2lkdGggLyA0MDAgKiBNYXRoLmNvcyhhbmdsZSkpO1xuICAgICAgICAgICAgICAgICAgICBBbGxCdWxsZXRzLnB1c2gobmV3IEJ1bGxldCh4LCB5LCB0ZW1wLnJvdGF0aW9uLCB0ZW1wLmNvbG9yLCB0ZW1wLnVzZXJOYW1lKSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhdWRpb1VybCA9ICcuLi8uLi9hc3NldHMvQm9udXMvc2Z4X2xhc2VyMi5vZ2cnO1xuICAgICAgICAgICAgICAgICAgICBpZiAocCAlIDIgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXVkaW9VcmwgPSAnLi4vLi4vYXNzZXRzL0JvbnVzL3NmeF9sYXNlcjEub2dnJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgc2hvdCA9IG5ldyBBdWRpbyhhdWRpb1VybCk7XG4gICAgICAgICAgICAgICAgICAgIHNob3QucGxheSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgZnVuY3Rpb24gZmlsdGVyUGxheWVycyhvYmosZGF0YSl7XG4gICAgICAgICAgICByZXR1cm4gZGF0YS51c2VybmFtZSA9PSBvYmoudXNlck5hbWU7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBkcmF3KCl7XG4gICAgICAgICAgICBpZihBbGxQbGF5ZXJzLmxlbmd0aD4wKXtcbiAgICAgICAgICAgICAgICAvL0FsbFBsYXllcnNbMF0uc3BlZWQgPSAwO1xuICAgICAgICAgICAgICAgIC8vQWxsUGxheWVyc1sxXS5zcGVlZCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsMCxjYW52LndpZHRoLCBjYW52LmhlaWdodCk7XG4gICAgICAgICAgICB2YXIgcmF0aW8gPSBjYW52LndpZHRoLzEwMDtcblxuICAgICAgICAgICAgaWYoQWxsQnVsbGV0cy5sZW5ndGggIT0gMCl7XG4gICAgICAgICAgICAgICAgdmFyIEJ1bGxldFdpZHRoID0gY2Fudi53aWR0aC8xMDA7XG4gICAgICAgICAgICAgICAgdmFyIEJ1bGxldEhlaWdodCA9IEJ1bGxldFdpZHRoICogQWxsQnVsbGV0c1swXS5pbWFnZS5oZWlnaHQvQWxsQnVsbGV0c1swXS5pbWFnZS53aWR0aDtcblxuICAgICAgICAgICAgICAgIGZvcih2YXIgYnVsbGV0IGluIEFsbEJ1bGxldHMpe1xuICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IEFsbEJ1bGxldHNbYnVsbGV0XTtcbiAgICAgICAgICAgICAgICAgICAgYi53aWR0aCA9IEJ1bGxldFdpZHRoO1xuICAgICAgICAgICAgICAgICAgICBiLmhlaWdodCA9IEJ1bGxldEhlaWdodDtcblxuICAgICAgICAgICAgICAgICAgICBpZihiLmV4cGxvZGVTdGFnZSA9PSAwKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vRHJhdyBidWxsZXRcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zYXZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHgudHJhbnNsYXRlKGIueCpyYXRpbywgYi55KnJhdGlvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5yb3RhdGUoYi5yb3RhdGlvbi8xODAqTWF0aC5QSSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKGIuaW1hZ2UsIC1CdWxsZXRXaWR0aC8yLCAtQnVsbGV0SGVpZ2h0LzIsIEJ1bGxldFdpZHRoLCBCdWxsZXRIZWlnaHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgQWxsQnVsbGV0c1tidWxsZXRdLnggPSBNYXRoLmNvcygoYi5yb3RhdGlvbiAtIDkwKS8xODAqTWF0aC5QSSkgKyBiLng7XG4gICAgICAgICAgICAgICAgICAgICAgICBBbGxCdWxsZXRzW2J1bGxldF0ueSA9IE1hdGguc2luKChiLnJvdGF0aW9uIC0gOTApLzE4MCpNYXRoLlBJKSsgYi55O1xuICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZihiLmV4cGxvZGVTdGFnZSA8IDQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9EcmF3IGV4cGxvc2lvblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYi5leHBsb3Npb25JbWFnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguc2F2ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZShiLngqcmF0aW8sIGIueSpyYXRpbyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKGIuZXhwbG9zaW9uSW1hZ2UsIC1CdWxsZXRXaWR0aCwgLUJ1bGxldFdpZHRoLCBCdWxsZXRXaWR0aCoyLCBCdWxsZXRXaWR0aCoyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKEFsbFBsYXllcnMubGVuZ3RoICE9IDApe1xuICAgICAgICAgICAgICAgIHZhciBTcGFjZXNoaXBXaWR0aCA9IGNhbnYud2lkdGgvMjA7XG4gICAgICAgICAgICAgICAgdmFyIFNwYWNlc2hpcEhlaWdodCA9IFNwYWNlc2hpcFdpZHRoICogQWxsUGxheWVyc1swXS5pbWFnZS5oZWlnaHQvIEFsbFBsYXllcnNbMF0uaW1hZ2Uud2lkdGg7XG5cbiAgICAgICAgICAgICAgICBmb3IodmFyIHBsYXllciBpbiBBbGxQbGF5ZXJzKXtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHAgPSBBbGxQbGF5ZXJzW3BsYXllcl07XG4gICAgICAgICAgICAgICAgICAgIHAud2lkdGggPSBTcGFjZXNoaXBXaWR0aDtcbiAgICAgICAgICAgICAgICAgICAgcC5oZWlnaHQgPSBTcGFjZXNoaXBIZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIGN0eC5zYXZlKCk7XG4gICAgICAgICAgICAgICAgICAgIGN0eC50cmFuc2xhdGUocC54KnJhdGlvLCBwLnkqcmF0aW8pO1xuICAgICAgICAgICAgICAgICAgICBjdHgucm90YXRlKHAucm90YXRpb24vMTgwKk1hdGguUEkpO1xuICAgICAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKHAuaW1hZ2UsIC1TcGFjZXNoaXBXaWR0aC8yLCAtU3BhY2VzaGlwSGVpZ2h0LzIsIFNwYWNlc2hpcFdpZHRoLCBTcGFjZXNoaXBIZWlnaHQpO1xuICAgICAgICAgICAgICAgICAgICBpZihwLmRhbWFnZSA+IDApe1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShwLmRhbWFnZUltYWdlLCAtU3BhY2VzaGlwV2lkdGgvMiwgLVNwYWNlc2hpcEhlaWdodC8yLCBTcGFjZXNoaXBXaWR0aCwgU3BhY2VzaGlwSGVpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjdHgucmVzdG9yZSgpO1xuICAgICAgICAgICAgICAgICAgICBBbGxQbGF5ZXJzW3BsYXllcl0ueCA9IE1hdGguY29zKChwLnJvdGF0aW9uIC0gOTApLzE4MCpNYXRoLlBJKS8xMCogcC5zcGVlZCArIHAueDtcbiAgICAgICAgICAgICAgICAgICAgQWxsUGxheWVyc1twbGF5ZXJdLnkgPSBNYXRoLnNpbigocC5yb3RhdGlvbiAtIDkwKS8xODAqTWF0aC5QSSkvMTAqIHAuc3BlZWQgKyBwLnk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZihBbGxBc3Rlcm9pZHMubGVuZ3RoPjApe1xuICAgICAgICAgICAgICAgIGZvcih2YXIgQXN0ZXJvaWQgaW4gQWxsQXN0ZXJvaWRzKXtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBBbGxBc3Rlcm9pZHNbQXN0ZXJvaWRdO1xuICAgICAgICAgICAgICAgICAgICBhLndpZHRoID0gY2Fudi53aWR0aC8xNTAwKiBhLmltYWdlLndpZHRoO1xuICAgICAgICAgICAgICAgICAgICBhLmhlaWdodCA9IGEud2lkdGgqIGEuaW1hZ2UuaGVpZ2h0LyBhLmltYWdlLndpZHRoO1xuICAgICAgICAgICAgICAgICAgICBjdHguc2F2ZSgpO1xuICAgICAgICAgICAgICAgICAgICBjdHgudHJhbnNsYXRlKGEueCpyYXRpbywgYS55KnJhdGlvKTtcbiAgICAgICAgICAgICAgICAgICAgY3R4LnJvdGF0ZShhLnJvdGF0aW9uLzE4MCpNYXRoLlBJKTtcbiAgICAgICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShhLmltYWdlLCAtYS53aWR0aC8yLCAtYS5oZWlnaHQvMiwgYS53aWR0aCwgYS5oZWlnaHQpO1xuICAgICAgICAgICAgICAgICAgICBjdHgucmVzdG9yZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZihhLnggPCAtNSB8fCBhLnggPiAxMDUgfHwgYS55IDwgLTUgfHwgYS55ID4gMTA1KXtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vbmlldXdlIGFzdGVyb2lkIHRla2VuZW5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrZXV6ZSA9IE1hdGgucmFuZG9tKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihrZXV6ZSA8IDAuMjUpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vbGlua3NcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbGxBc3Rlcm9pZHNbQXN0ZXJvaWRdLnggPSAtNDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbGxBc3Rlcm9pZHNbQXN0ZXJvaWRdLnkgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMTAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbGxBc3Rlcm9pZHNbQXN0ZXJvaWRdLnJvdGF0aW9uID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjE4MCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQWxsQXN0ZXJvaWRzW0FzdGVyb2lkXS5zZXRJbWFnZShNYXRoLmNlaWwoTWF0aC5yYW5kb20oKSoyMCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYoa2V1emUgPCAwLjUpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYm92ZW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbGxBc3Rlcm9pZHNbQXN0ZXJvaWRdLnggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMTAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbGxBc3Rlcm9pZHNbQXN0ZXJvaWRdLnkgPSAtNDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbGxBc3Rlcm9pZHNbQXN0ZXJvaWRdLnJvdGF0aW9uID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjE4MCkgKyA5MDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbGxBc3Rlcm9pZHNbQXN0ZXJvaWRdLnNldEltYWdlKE1hdGguY2VpbChNYXRoLnJhbmRvbSgpKjIwKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZihrZXV6ZSA8IDAuNzUpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vcmVjaHRzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQWxsQXN0ZXJvaWRzW0FzdGVyb2lkXS54ID0gMTA0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFsbEFzdGVyb2lkc1tBc3Rlcm9pZF0ueSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoxMDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFsbEFzdGVyb2lkc1tBc3Rlcm9pZF0ucm90YXRpb24gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMTgwKSArIDE4MDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbGxBc3Rlcm9pZHNbQXN0ZXJvaWRdLnNldEltYWdlKE1hdGguY2VpbChNYXRoLnJhbmRvbSgpKjIwKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL29uZGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQWxsQXN0ZXJvaWRzW0FzdGVyb2lkXS54ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjEwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQWxsQXN0ZXJvaWRzW0FzdGVyb2lkXS55ID0gMTA0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFsbEFzdGVyb2lkc1tBc3Rlcm9pZF0ucm90YXRpb24gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMTgwKSArIDI3MDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbGxBc3Rlcm9pZHNbQXN0ZXJvaWRdLnNldEltYWdlKE1hdGguY2VpbChNYXRoLnJhbmRvbSgpKjIwKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICBBbGxBc3Rlcm9pZHNbQXN0ZXJvaWRdLnggPSBNYXRoLmNvcygoYS5yb3RhdGlvbiAtIDkwKS8xODAqTWF0aC5QSSkvMzAgKyBhLng7XG4gICAgICAgICAgICAgICAgICAgICAgICBBbGxBc3Rlcm9pZHNbQXN0ZXJvaWRdLnkgPSBNYXRoLnNpbigoYS5yb3RhdGlvbiAtIDkwKS8xODAqTWF0aC5QSSkvMzAgKyBhLnk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNoZWNrQnVsbGV0cygpO1xuXG4gICAgICAgICAgICBjb2xsaXNpb25EZXRlY3Rpb24oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGNoZWNrQnVsbGV0cygpe1xuICAgICAgICAgICAgZm9yKHZhciBiIGluIEFsbEJ1bGxldHMpe1xuICAgICAgICAgICAgICAgIGlmKEFsbEJ1bGxldHNbYl0ueCA8IDAgfHwgQWxsQnVsbGV0c1tiXS54ID4gY2Fudi53aWR0aCB8fCBBbGxCdWxsZXRzW2JdLnkgPCAwIHx8IEFsbEJ1bGxldHNbYl0ueSA+IGNhbnYuaGVpZ2h0KXtcbiAgICAgICAgICAgICAgICAgICAgQWxsQnVsbGV0cy5zcGxpY2UoYiwgMSk7XG4gICAgICAgICAgICAgICAgfWVsc2UgaWYoQWxsQnVsbGV0c1tiXS5leHBsb2RlU3RhZ2UgPjApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKEFsbEJ1bGxldHNbYl0uZXhwbG9kZVN0YWdlIDwgNCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgQWxsQnVsbGV0c1tiXS5leHBsb2RlKCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBBbGxCdWxsZXRzLnNwbGljZShiLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGNvbGxpc2lvbkRldGVjdGlvbigpe1xuICAgICAgICAgICAgLy9QbGF5ZXIgLSBCdWxsZXRcbiAgICAgICAgICAgIHZhciBsaXZpbmdQbGF5ZXJzPVtdO1xuICAgICAgICAgICAgZm9yKHZhciBwIGluIEFsbFBsYXllcnMpe1xuICAgICAgICAgICAgICAgIGlmKEFsbFBsYXllcnNbcF0uZGFtYWdlPDQpe1xuICAgICAgICAgICAgICAgICAgICBsaXZpbmdQbGF5ZXJzLnB1c2goQWxsUGxheWVyc1twXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvcih2YXIgYiBpbiBBbGxCdWxsZXRzKXtcbiAgICAgICAgICAgICAgICAgICAgaWYoQWxsQnVsbGV0c1tiXS5leHBsb2RlU3RhZ2UgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFsbEJ1bGxldHNbYl0ucGxheWVyICE9IEFsbFBsYXllcnNbcF0udXNlck5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmFkaXVzID0gTWF0aC5zcXJ0KDIpIC8gMiAqIChBbGxCdWxsZXRzW2JdLmhlaWdodCAvIDIgLSBBbGxCdWxsZXRzW2JdLndpZHRoIC8gMik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFuZ2xlID0gKDM2MCAtIChBbGxCdWxsZXRzW2JdLnJvdGF0aW9uKSkgLyAxODAgKiBNYXRoLlBJO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBidWxsZXRIZWFkWCA9IChBbGxCdWxsZXRzW2JdLnggKiBjYW52LndpZHRoIC8gMTAwIC0gKHJhZGl1cyAqIE1hdGguc2luKGFuZ2xlKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBidWxsZXRIZWFkWSA9IChBbGxCdWxsZXRzW2JdLnkgKiBjYW52LndpZHRoIC8gMTAwIC0gKHJhZGl1cyAqIE1hdGguY29zKGFuZ2xlKSkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNwYWNlU2hpcFggPSBBbGxQbGF5ZXJzW3BdLnggKiBjYW52LndpZHRoIC8gMTAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcGFjZVNoaXBZID0gQWxsUGxheWVyc1twXS55ICogY2Fudi53aWR0aCAvIDEwMDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkaXN0YW5jZSA9IE1hdGguc3FydCgoYnVsbGV0SGVhZFggLSBzcGFjZVNoaXBYKSAqIChidWxsZXRIZWFkWCAtIHNwYWNlU2hpcFgpICsgKGJ1bGxldEhlYWRZIC0gc3BhY2VTaGlwWSkgKiAoYnVsbGV0SGVhZFkgLSBzcGFjZVNoaXBZKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRpc3RhbmNlIDwgKEFsbEJ1bGxldHNbYl0ud2lkdGggLyAyICsgQWxsUGxheWVyc1twXS53aWR0aCAvIDIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYW1hZ2Vzb3VuZCA9IG5ldyBBdWRpbygnLi4vLi4vYXNzZXRzL0JvbnVzL3NmeF9sb3NlLm9nZycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYW1hZ2Vzb3VuZC5wbGF5KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFsbFBsYXllcnNbcF0uaW5jcmVhc2VEYW1hZ2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS51c2VybmFtZSA9IEFsbFBsYXllcnNbcF0udXNlck5hbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEubGlmZSA9IDMtQWxsUGxheWVyc1twXS5kYW1hZ2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvY2tldFNlcnZpY2UuZW1pdChcInBsYXllckxpZmVcIixkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWxsQnVsbGV0c1tiXS5leHBsb2RlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vUGxheWVyIC0gQXN0ZXJvaWRcbiAgICAgICAgICAgICAgICBmb3IodmFyIGEgaW4gQWxsQXN0ZXJvaWRzKXtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFzdGVyb2lkWCA9IEFsbEFzdGVyb2lkc1thXS54ICogY2Fudi53aWR0aCAvIDEwMDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFzdGVyb2lkWSA9IEFsbEFzdGVyb2lkc1thXS55ICogY2Fudi53aWR0aCAvIDEwMDtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgc3BhY2VTaGlwWCA9IEFsbFBsYXllcnNbcF0ueCAqIGNhbnYud2lkdGggLyAxMDA7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzcGFjZVNoaXBZID0gQWxsUGxheWVyc1twXS55ICogY2Fudi53aWR0aCAvIDEwMDtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgZGlzdGFuY2UgPSBNYXRoLnNxcnQoKGFzdGVyb2lkWCAtIHNwYWNlU2hpcFgpICogKGFzdGVyb2lkWCAtIHNwYWNlU2hpcFgpICsgKGFzdGVyb2lkWSAtIHNwYWNlU2hpcFkpICogKGFzdGVyb2lkWSAtIHNwYWNlU2hpcFkpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRpc3RhbmNlIDwgKEFsbEFzdGVyb2lkc1thXS53aWR0aCAvIDIgKyBBbGxQbGF5ZXJzW3BdLndpZHRoIC8gMikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYW1hZ2Vzb3VuZCA9IG5ldyBBdWRpbygnLi4vLi4vYXNzZXRzL0JvbnVzL3NmeF9sb3NlLm9nZycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGFtYWdlc291bmQucGxheSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgQWxsUGxheWVyc1twXS5pbmNyZWFzZURhbWFnZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEudXNlcm5hbWUgPSBBbGxQbGF5ZXJzW3BdLnVzZXJOYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5saWZlID0gMy1BbGxQbGF5ZXJzW3BdLmRhbWFnZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvY2tldFNlcnZpY2UuZW1pdChcInBsYXllckxpZmVcIixkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIEFsbEJ1bGxldHNbYl0uZXhwbG9kZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy9QbGF5ZXIgLSBQbGF5ZXJcblxuICAgICAgICAgICAgfVxuXG5cblxuXG4gICAgICAgICAgICAvL0J1bGxldCAtIEFzdGVyb2lkXG5cblxuICAgICAgICAgICAgaWYobGl2aW5nUGxheWVycy5sZW5ndGg9PTEpe1xuICAgICAgICAgICAgICAgIGVuZEdhbWUobGl2aW5nUGxheWVycyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBlbmRHYW1lKGxpdmluZ1BsYXllcnMpe1xuICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKGN5Y2xlKSkge1xuICAgICAgICAgICAgICAgICRpbnRlcnZhbC5jYW5jZWwoY3ljbGUpO1xuICAgICAgICAgICAgICAgIGN5Y2xlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJHNjb3BlLmVuZEdhbWU9dHJ1ZTtcbiAgICAgICAgICAgICRzY29wZS5lbmRHYW1lVGV4dD0gbGl2aW5nUGxheWVyc1swXS51c2VyTmFtZSArIFwiIGlzIHRoZSB3aW5uZXIhXCJcbiAgICAgICAgICAgIHNvY2tldFNlcnZpY2UuZW1pdChcImVuZEdhbWVcIiwgbGl2aW5nUGxheWVyc1swXS51c2VyTmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgJHNjb3BlLnJlc3RhcnRHYW1lID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICRzY29wZS5lbmRHYW1lPWZhbHNlO1xuICAgICAgICAgICAgdmFyIHRlbGxlcj0wO1xuICAgICAgICAgICAgZm9yKHZhciBwIGluIEFsbFBsYXllcnMpe1xuICAgICAgICAgICAgICAgIEFsbFBsYXllcnNbcF0ucmVzZXQoZGVmYXVsdFZhcnNbdGVsbGVyXS54LGRlZmF1bHRWYXJzW3RlbGxlcl0ueSxkZWZhdWx0VmFyc1t0ZWxsZXJdLnJvdGF0aW9uKTtcbiAgICAgICAgICAgICAgICB0ZWxsZXIrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN0eC5jbGVhclJlY3QoMCwwLGNhbnYud2lkdGgsIGNhbnYuaGVpZ2h0KTtcbiAgICAgICAgICAgIHNvY2tldFNlcnZpY2UuZW1pdChcInJlc3RhcnRHYW1lXCIsbnVsbCk7XG4gICAgICAgICAgICBjeWNsZSA9ICRpbnRlcnZhbChkcmF3LCAxMCk7XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmNvbnRyb2xsZXIoXCJwbGF5Q29udHJvbGxlclwiLCBbXCIkc2NvcGVcIiwgXCIkaW50ZXJ2YWxcIiwgXCIkd2luZG93XCIsIFwic29ja2V0U2VydmljZVwiLCBcImRpc3BsYXlTZXJ2aWNlXCIsIFwicGxheWVyU2VydmljZVwiLCBwbGF5Q29udHJvbGxlcl0pXG59KSgpOyIsIi8qKlxuICogQ3JlYXRlZCBieSBqdXN0aWpuZGVwb3ZlciBvbiAxNi8xMi8xNS5cbiAqL1xuKGZ1bmN0aW9uKCl7XG4gICAgdmFyIGNhbnZhc0RpcmVjdGl2ZSA9IGZ1bmN0aW9uKCR3aW5kb3cpe1xuICAgICAgICByZXR1cm57XG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICAgICAgbGluazpsaW5rLFxuICAgICAgICAgICAgcmVwbGFjZTp0cnVlLFxuICAgICAgICAgICAgdGVtcGxhdGU6JzxjYW52YXMgaWQ9XCJnYW1lXCIgY2xhc3M9XCJwbGF5QXJlYVwiIHdpZHRoPVwie3t3aWR0aH19XCIgaGVpZ2h0PVwie3t3aWR0aH19XCIgLz4nXG4gICAgICAgIH07XG5cbiAgICAgICAgZnVuY3Rpb24gbGluayhzY29wZSwgZWxlbWVudCwgYXR0cnMpe1xuICAgICAgICAgICAgaWYoJHdpbmRvdy5pbm5lcldpZHRoIDwgJHdpbmRvdy5pbm5lckhlaWdodCl7XG4gICAgICAgICAgICAgICAgc2NvcGUud2lkdGggPSAkd2luZG93LmlubmVyV2lkdGggLSAyMDtcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIHNjb3BlLndpZHRoID0gJHdpbmRvdy5pbm5lckhlaWdodCAtIDIwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJHdpbmRvdykuYmluZCgncmVzaXplJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBpZigkd2luZG93LmlubmVyV2lkdGggPCAkd2luZG93LmlubmVySGVpZ2h0KXtcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUud2lkdGggPSAkd2luZG93LmlubmVyV2lkdGggLSAyMDtcbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUud2lkdGggPSAkd2luZG93LmlubmVySGVpZ2h0IC0gMjA7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgc2NvcGUuJGRpZ2VzdCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmRpcmVjdGl2ZShcImNhbnZhc0RpcmVjdGl2ZVwiLCBbXCIkd2luZG93XCIsIGNhbnZhc0RpcmVjdGl2ZV0pO1xufSkoKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkganVzdGlqbmRlcG92ZXIgb24gMDkvMTIvMTUuXG4gKi9cblxuXG52YXIgQXN0ZXJvaWQgPSBmdW5jdGlvbih4LCB5LCByb3RhdGlvbiwgc3RhZ2Upe1xuICAgIHRoaXMueCA9IHg7XG4gICAgdGhpcy55ID0geTtcbiAgICB0aGlzLndpZHRoID0gMDtcbiAgICB0aGlzLmhlaWdodCA9IDA7XG4gICAgdGhpcy5yb3RhdGlvbiA9IHJvdGF0aW9uO1xuICAgIHRoaXMuc3RhZ2UgPSBzdGFnZTtcbiAgICB0aGlzLmltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgdGhpcy5pbWFnZS5zcmMgPSAoXCIuLi9hc3NldHMvUE5HL01ldGVvcnMvbWV0ZW9yX1wiICsgc3RhZ2UgKyBcIi5wbmdcIik7XG59O1xuXG5Bc3Rlcm9pZC5wcm90b3R5cGUuc2V0SW1hZ2UgPSBmdW5jdGlvbihzdGFnZSl7XG4gICAgdGhpcy5zdGFnZSA9IHN0YWdlO1xuICAgIHRoaXMuaW1hZ2Uuc3JjID0gKFwiLi4vYXNzZXRzL1BORy9NZXRlb3JzL21ldGVvcl9cIiArIHN0YWdlICsgXCIucG5nXCIpO1xufTsiLCIvKipcbiAqIENyZWF0ZWQgYnkganVzdGlqbmRlcG92ZXIgb24gMjIvMTIvMTUuXG4gKi9cblxudmFyIEJ1bGxldCA9IGZ1bmN0aW9uKHgsIHkscm90YXRpb24sIGNvbG9yLCBwbGF5ZXIpe1xuICAgIHRoaXMueCA9IHg7XG4gICAgdGhpcy55ID0geTtcbiAgICB0aGlzLnJvdGF0aW9uID0gcm90YXRpb247XG4gICAgdGhpcy5pbWFnZSA9IG5ldyBJbWFnZSgpO1xuICAgIHRoaXMuY29sb3IgPSBjb2xvcjtcbiAgICB0aGlzLndpZHRoID0gMDtcbiAgICB0aGlzLmhlaWdodCA9IDA7XG4gICAgdGhpcy5wbGF5ZXIgPSBwbGF5ZXI7XG4gICAgdGhpcy5leHBsb3Npb25JbWFnZSA9IG5ldyBJbWFnZSgpO1xuICAgIHRoaXMuZXhwbG9kZVN0YWdlID0gMDtcbiAgICBpZih0aGlzLmNvbG9yID09IFwib3JhbmdlXCIpe1xuICAgICAgICB0aGlzLmNvbG9yID0gJ3JlZCc7XG4gICAgfVxuICAgIHRoaXMuaW1hZ2Uuc3JjID0gJy4uL2Fzc2V0cy9QTkcvTGFzZXJzL2xhc2VyJysgdGhpcy5jb2xvci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHRoaXMuY29sb3Iuc2xpY2UoMSkgKycwMS5wbmcnXG59O1xuXG5CdWxsZXQucHJvdG90eXBlLmV4cGxvZGUgPSBmdW5jdGlvbigpe1xuICAgIGlmKHRoaXMuZXhwbG9kZVN0YWdlIDwgNCl7XG4gICAgICAgIHRoaXMuZXhwbG9kZVN0YWdlKys7XG4gICAgICAgIHZhciBudW1iZXI7XG4gICAgICAgIGlmKHRoaXMuZXhwbG9kZVN0YWdlIDwgMyl7XG4gICAgICAgICAgIG51bWJlciA9IDFcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBudW1iZXIgPSAyXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5leHBsb3Npb25JbWFnZS5zcmMgPSAnLi4vYXNzZXRzL1BORy9MYXNlcnMvbGFzZXInICsgdGhpcy5jb2xvci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHRoaXMuY29sb3Iuc2xpY2UoMSkgKyAnRXhwbG9kZScrIG51bWJlciArJy5wbmcnO1xuICAgIH1lbHNle1xuICAgICAgICB0aGlzLmV4cGxvc2lvbkltYWdlLnNyYyA9ICcnO1xuICAgIH1cbn07XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkganVzdGlqbmRlcG92ZXIgb24gMDkvMTIvMTUuXG4gKi9cblxudmFyIFNwYWNlc2hpcCA9IGZ1bmN0aW9uKHVzZXJOYW1lLCB4LCB5LCBjb2xvciwgcm90YXRpb24pe1xuICAgIHRoaXMudXNlck5hbWUgPSB1c2VyTmFtZTtcbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG4gICAgdGhpcy5zcGVlZCA9IDE7XG4gICAgdGhpcy5jb2xvciA9IGNvbG9yO1xuICAgIHRoaXMucm90YXRpb24gPSByb3RhdGlvbjtcbiAgICB0aGlzLmltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgdGhpcy5kYW1hZ2UgPSAwO1xuICAgIHRoaXMud2lkdGggPSAwO1xuICAgIHRoaXMuaGVpZ2h0ID0gMDtcbiAgICB0aGlzLmRhbWFnZUltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgdGhpcy5pbWFnZS5zcmMgPSAnLi4vYXNzZXRzL1BORy9wbGF5ZXJTaGlwMV8nKyB0aGlzLmNvbG9yICsnLnBuZydcbn07XG5cblNwYWNlc2hpcC5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbiAoeCwgeSwgcm90YXRpb24pIHtcbiAgICB0aGlzLnNwZWVkID0gMTtcbiAgICB0aGlzLmRhbWFnZSA9IDA7XG4gICAgdGhpcy5kYW1hZ2VJbWFnZSA9IG5ldyBJbWFnZSgpO1xuICAgIHRoaXMuaW1hZ2Uuc3JjID0gJy4uL2Fzc2V0cy9QTkcvcGxheWVyU2hpcDFfJysgdGhpcy5jb2xvciArJy5wbmcnXG4gICAgdGhpcy54ID0geDtcbiAgICB0aGlzLnkgPSB5O1xuICAgIHRoaXMucm90YXRpb24gPSByb3RhdGlvbjtcbn07XG5cblNwYWNlc2hpcC5wcm90b3R5cGUubW92ZVNwYWNlc2hpcCA9IGZ1bmN0aW9uKHgsIHkpe1xuICAgIHRoaXMueCA9IHg7XG4gICAgdGhpcy55ID0geTtcbn07XG5cblNwYWNlc2hpcC5wcm90b3R5cGUubW92ZVNwYWNlc2hpcFJlbGF0aXZlID0gZnVuY3Rpb24oeCwgeSl7XG4gICAgdGhpcy54ID0gdGhpcy54K3g7XG4gICAgdGhpcy55ID0gdGhpcy55K3k7XG59O1xuXG5TcGFjZXNoaXAucHJvdG90eXBlLnJvdGF0ZVNwYWNlc2hpcCA9IGZ1bmN0aW9uKGRlZ3JlZSl7XG4gICAgdGhpcy5yb3RhdGlvbiA9IGRlZ3JlZTtcbn07XG5cblNwYWNlc2hpcC5wcm90b3R5cGUucm90YXRlU3BhY2VzaGlwUmVsYXRpdmUgPSBmdW5jdGlvbihkZWdyZWUpe1xuICAgIHRoaXMucm90YXRpb24gPSB0aGlzLnJvdGF0aW9uICsgZGVncmVlLzU7XG4gICAgaWYodGhpcy5yb3RhdGlvbiA8IC0zNjApe1xuICAgICAgICB0aGlzLnJvdGF0aW9uID0gdGhpcy5yb3RhdGlvbiArIDcyMDtcbiAgICB9XG4gICAgaWYodGhpcy5yb3RhdGlvbiA+IDM2MCl7XG4gICAgICAgIHRoaXMucm90YXRpb24gPSB0aGlzLnJvdGF0aW9uIC0gNzIwO1xuICAgIH1cbn07XG5cblNwYWNlc2hpcC5wcm90b3R5cGUuaW5jcmVhc2VEYW1hZ2UgPSBmdW5jdGlvbigpe1xuICAgIGlmKHRoaXMuZGFtYWdlIDwgNCl7XG4gICAgICAgIHRoaXMuZGFtYWdlICs9IDE7XG4gICAgfVxuXG4gICAgaWYodGhpcy5kYW1hZ2UgPD0gMyAmJiB0aGlzLmRhbWFnZSA+IDApe1xuICAgICAgICB0aGlzLmRhbWFnZUltYWdlLnNyYyA9ICcuLi9hc3NldHMvUE5HL0RhbWFnZS9wbGF5ZXJTaGlwMV9kYW1hZ2UnKyB0aGlzLmRhbWFnZSArICcucG5nJztcbiAgICB9ZWxzZSBpZih0aGlzLmRhbWFnZT09NCl7XG4gICAgICAgIHRoaXMuZGFtYWdlSW1hZ2Uuc3JjID0gJy4uL2Fzc2V0cy9QTkcvRGFtYWdlL2V4cGxvZGUuZ2lmJztcbiAgICB9XG59O1xuXG5TcGFjZXNoaXAucHJvdG90eXBlLmRlY3JlYXNlRGFtYWdlID0gZnVuY3Rpb24oKXtcbiAgICBpZih0aGlzLmRhbWFnZSA+IDApe1xuICAgICAgICB0aGlzLmRhbWFnZSAtPSAxO1xuICAgIH1cblxuICAgIGlmKHRoaXMuZGFtYWdlIDw9IDMgJiYgdGhpcy5kYW1hZ2UgPiAwKXtcbiAgICAgICAgdGhpcy5kYW1hZ2VJbWFnZS5zcmMgPSAnLi4vYXNzZXRzL1BORy9EYW1hZ2UvcGxheWVyU2hpcDFfZGFtYWdlJysgdGhpcy5kYW1hZ2UgKyAnLnBuZyc7XG4gICAgfVxufTtcblxuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IE1pY2hpZWwgb24gMTYvMTIvMjAxNS5cbiAqL1xuLyoqXG4gKiBDcmVhdGVkIGJ5IGp1c3Rpam5kZXBvdmVyIG9uIDE2LzEyLzE1LlxuICovXG5cblxuKGZ1bmN0aW9uKCl7XG4gICAgdmFyIGRpc3BsYXlTZXJ2aWNlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgLy9Mb2dpbiBDb250cm9sbGVyXG4gICAgICAgIHZhciBMQ1Nob3cgPSB0cnVlO1xuICAgICAgICAvL1BsYXkgY29udHJvbGxlclxuICAgICAgICB2YXIgUENTaG93ID0gZmFsc2U7XG5cbiAgICAgICAgcmV0dXJue1xuICAgICAgICAgICAgZ2V0TENTaG93OiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIHJldHVybiBMQ1Nob3c7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0TENTaG93OiBmdW5jdGlvbih2YWx1ZSl7XG4gICAgICAgICAgICAgICAgTENTaG93ID0gdmFsdWU7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0UENTaG93OiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIHJldHVybiBQQ1Nob3c7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0UENTaG93OiBmdW5jdGlvbih2YWx1ZSl7XG4gICAgICAgICAgICAgICAgUENTaG93ID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmZhY3RvcnkoJ2Rpc3BsYXlTZXJ2aWNlJywgW2Rpc3BsYXlTZXJ2aWNlXSk7XG59KSgpOyIsIi8qKlxuICogQ3JlYXRlZCBieSBqdXN0aWpuZGVwb3ZlciBvbiAxNy8xMi8xNS5cbiAqL1xuXG4oZnVuY3Rpb24oKXtcbiAgICB2YXIgcGxheWVyU2VydmljZSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIC8vTG9naW4gQ29udHJvbGxlclxuICAgICAgICB2YXIgcGxheWVycyA9IFtdO1xuXG4gICAgICAgIHJldHVybntcbiAgICAgICAgICAgIGdldFBsYXllcnM6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBsYXllcnM7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0UGxheWVyczogZnVuY3Rpb24ocGxheWVyc0FycmF5KXtcbiAgICAgICAgICAgICAgICBwbGF5ZXJzID0gcGxheWVyc0FycmF5O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5mYWN0b3J5KCdwbGF5ZXJTZXJ2aWNlJywgW3BsYXllclNlcnZpY2VdKTtcbn0pKCk7IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGp1c3Rpam5kZXBvdmVyIG9uIDA5LzEyLzE1LlxuICovXG5cbihmdW5jdGlvbigpe1xuXG4gICAgdmFyIHNvY2tldFNlcnZpY2UgPSBmdW5jdGlvbigkcm9vdFNjb3BlKXtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIC8vcHJpdmF0ZVxuICAgICAgICB2YXIgc29ja2V0ID0gaW8uY29ubmVjdCh3aW5kb3cubG9jYXRpb24uaG9zdCk7XG4gICAgICAgIC8vZnVuY3Rpb25zXG4gICAgICAgIHZhciBvbiA9IGZ1bmN0aW9uIChldmVudE5hbWUsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICBzb2NrZXQub24oZXZlbnROYW1lLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5hcHBseShzb2NrZXQsIGFyZ3MpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGVtaXQgPSBmdW5jdGlvbiAoZXZlbnROYW1lLCBkYXRhLCBjYWxsYmFjaykge1xuICAgICAgICAgICAgc29ja2V0LmVtaXQoZXZlbnROYW1lLCBkYXRhLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KHNvY2tldCwgYXJncyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH07XG5cbiAgICAgICAgLy9wdWJsaWNcbiAgICAgICAgcmV0dXJue1xuICAgICAgICAgICAgb246IG9uLFxuICAgICAgICAgICAgZW1pdDogZW1pdCxcbiAgICAgICAgICAgIHNvY2tldDogc29ja2V0XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJhcHBcIikuZmFjdG9yeShcInNvY2tldFNlcnZpY2VcIiwgW1wiJHJvb3RTY29wZVwiLCBzb2NrZXRTZXJ2aWNlXSk7XG5cbn0pKCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
